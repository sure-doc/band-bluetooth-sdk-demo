(()=>{var e={7492:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E});var n=r(901),i=r.n(n),o=r(4067),a=r(1801),u=r.n(a),c=r(6047),s=r.n(c),l=r(3505),f=r.n(l),d=r(2101),p=r.n(d);function h(e){return"function"==typeof e}function v(e){return void 0===e}function y(e){return e&&"object"===i()(e)}var b=function(e){return!y(e)};function m(e){throw new TypeError(e)}h(Object.assign)||(Object.assign=function(e){null==e&&m("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(null!=n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}),h(Object.defineProperties)||(Object.defineProperties=function(e,t){function r(e){function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}b(e)&&m("bad desc");var r={};if(t(e,"enumerable")&&(r.enumerable=!!e.enumerable),t(e,"configurable")&&(r.configurable=!!e.configurable),t(e,"value")&&(r.value=e.value),t(e,"writable")&&(r.writable=!!e.writable),t(e,"get")){var n=e.get;h(n)||v(n)||m("bad get"),r.get=n}if(t(e,"set")){var i=e.set;h(i)||v(i)||m("bad set"),r.set=i}return("get"in r||"set"in r)&&("value"in r||"writable"in r)&&m("identity-confused descriptor"),r}b(e)&&m("bad obj"),t=Object(t);for(var n=Object.keys(t),i=[],o=0;o<n.length;o++)i.push([n[o],r(t[n[o]])]);for(var a=0;a<i.length;a++)Object.defineProperty(e,i[a][0],i[a][1]);return e});var g={WEAPP:"WEAPP",WEB:"WEB",RN:"RN",SWAN:"SWAN",ALIPAY:"ALIPAY",TT:"TT",QQ:"QQ",JD:"JD"};var w=function(){function e(t,r,n){s()(this,e),this.index=n||0,this.requestParams=t,this.interceptors=r||[]}return f()(e,[{key:"proceed",value:function(e){if(this.requestParams=e,this.index>=this.interceptors.length)throw new Error("chain 参数错误, 请勿直接修改 request.chain");var t=this._getNextInterceptor()(this._getNextChain()),r=t.catch((function(e){return Promise.reject(e)}));return Object.keys(t).forEach((function(e){return h(t[e])&&(r[e]=t[e])})),r}},{key:"_getNextInterceptor",value:function(){return this.interceptors[this.index]}},{key:"_getNextChain",value:function(){return new e(this.requestParams,this.interceptors,this.index+1)}}]),e}();var S={640:1.17,750:1,828:.905};function _(e){return function(t){var r=t.designWidth,n=void 0===r?750:r,i=t.deviceRatio,o=void 0===i?S:i,a=t.baseFontSize,u=void 0===a?20:a;e.config=e.config||{},e.config.designWidth=n,e.config.deviceRatio=o,e.config.baseFontSize=u}}var O,I,E={Behavior:function(e){return e},getEnv:function(){return g.WEAPP},ENV_TYPE:g,Link:function(){function e(t){s()(this,e),this.taroInterceptor=t,this.chain=new w}return f()(e,[{key:"request",value:function(e){var t=this.chain,r=this.taroInterceptor;return t.interceptors=t.interceptors.filter((function(e){return e!==r})).concat(r),t.proceed(u()({},e))}},{key:"addInterceptor",value:function(e){this.chain.interceptors.push(e)}},{key:"cleanInterceptors",value:function(){this.chain=new w}}]),e}(),interceptors:Object.freeze({__proto__:null,timeoutInterceptor:function(e){var t,r=e.requestParams,n=new Promise((function(n,i){var o=setTimeout((function(){o=null,i(new Error("网络链接超时,请稍后再试！"))}),r&&r.timeout||6e4);(t=e.proceed(r)).then((function(e){o&&(clearTimeout(o),n(e))})).catch((function(e){o&&clearTimeout(o),i(e)}))}));return!v(t)&&h(t.abort)&&(n.abort=t.abort),n},logInterceptor:function(e){var t=e.requestParams;t.method,t.data,t.url;var r=e.proceed(t),n=r.then((function(e){return e}));return h(r.abort)&&(n.abort=r.abort),n}}),Current:o.Current,getCurrentInstance:o.getCurrentInstance,options:o.options,nextTick:o.nextTick,eventCenter:o.eventCenter,Events:o.Events,getInitPxTransform:_};E.initPxTransform=_(E),E.preload=(O=o.Current,function(e,t){O.preloadData=y(e)?e:p()({},e,t)}),E.pxTransform=(I=E,function(e){var t=I.config||{},r=t.designWidth,n=void 0===r?750:r,i=t.deviceRatio,o=void 0===i?S:i;if(!(n in o))throw new Error("deviceRatio 配置中不存在 ".concat(n," 的设置！"));return parseInt(e,10)*o[n]+"rpx"})},4067:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Current:()=>xt,Events:()=>v,FormElement:()=>ft,MutationObserver:()=>de,SVGElement:()=>At,Style:()=>Xe,TaroElement:()=>nt,TaroEvent:()=>ut,TaroNode:()=>je,TaroRootElement:()=>ht,TaroText:()=>vt,addLeadingSlash:()=>Bt,cancelAnimationFrame:()=>It,createComponentConfig:()=>Vt,createEvent:()=>ct,createPageConfig:()=>$t,createRecursiveComponentConfig:()=>zt,document:()=>bt,eventCenter:()=>Et,eventHandler:()=>lt,eventSource:()=>Ie,getComputedStyle:()=>mt,getCurrentInstance:()=>Tt,getPageInstance:()=>kt,hooks:()=>E,hydrate:()=>xe,incrementId:()=>pe,injectPageInstance:()=>Dt,navigator:()=>wt,nextTick:()=>Wt,now:()=>St,options:()=>it,removePageInstance:()=>Mt,requestAnimationFrame:()=>Ot,safeExecute:()=>Lt,stringify:()=>Nt,window:()=>Ct});const n="[]",i="",o="!0",a="!1",u={bindTouchStart:i,bindTouchMove:i,bindTouchEnd:i,bindTouchCancel:i,bindLongTap:i},c={animation:i,bindAnimationStart:i,bindAnimationIteration:i,bindAnimationEnd:i,bindTransitionEnd:i};function s(e){return`'${e}'`}const l=Object.assign(Object.assign({"hover-class":s("none"),"hover-stop-propagation":a,"hover-start-time":"50","hover-stay-time":"400"},u),c),f={type:i,size:"23",color:i},d=Object.assign({longitude:i,latitude:i,scale:"16",markers:n,covers:i,polyline:n,circles:n,controls:n,"include-points":n,"show-location":i,"layer-style":"1",bindMarkerTap:i,bindControlTap:i,bindCalloutTap:i,bindUpdated:i},u),p={View:l,Icon:f,Progress:{percent:i,"stroke-width":"6",color:s("#09BB07"),activeColor:s("#09BB07"),backgroundColor:s("#EBEBEB"),active:a,"active-mode":s("backwards"),"show-info":a},RichText:{nodes:n},Text:{selectable:a,space:i,decode:a},Button:Object.assign({size:s("default"),type:i,plain:a,disabled:i,loading:a,"form-type":i,"open-type":i,"hover-class":s("button-hover"),"hover-stop-propagation":a,"hover-start-time":"20","hover-stay-time":"70",name:i},u),Checkbox:{value:i,disabled:i,checked:a,color:s("#09BB07"),name:i},CheckboxGroup:{bindChange:i,name:i},Form:{"report-submit":a,bindSubmit:i,bindReset:i,name:i},Input:{value:i,type:s(i),password:a,placeholder:i,"placeholder-style":i,"placeholder-class":s("input-placeholder"),disabled:i,maxlength:"140","cursor-spacing":"0",focus:a,"confirm-type":s("done"),"confirm-hold":a,cursor:"i.value.length","selection-start":"-1","selection-end":"-1",bindInput:i,bindFocus:i,bindBlur:i,bindConfirm:i,name:i},Label:{for:i,name:i},Picker:{mode:s("selector"),disabled:i,range:i,"range-key":i,value:i,start:i,end:i,fields:s("day"),"custom-item":i,name:i,bindCancel:i,bindChange:i,bindColumnChange:i},PickerView:{value:i,"indicator-style":i,"indicator-class":i,"mask-style":i,"mask-class":i,bindChange:i,name:i},PickerViewColumn:{name:i},Radio:{value:i,checked:a,disabled:i,color:s("#09BB07"),name:i},RadioGroup:{bindChange:i,name:i},Slider:{min:"0",max:"100",step:"1",disabled:i,value:"0",activeColor:s("#1aad19"),backgroundColor:s("#e9e9e9"),"block-size":"28","block-color":s("#ffffff"),"show-value":a,bindChange:i,bindChanging:i,name:i},Switch:{checked:a,disabled:i,type:s("switch"),color:s("#04BE02"),bindChange:i,name:i},CoverImage:{src:i,bindLoad:"eh",bindError:"eh"},Textarea:{value:i,placeholder:i,"placeholder-style":i,"placeholder-class":s("textarea-placeholder"),disabled:i,maxlength:"140","auto-focus":a,focus:a,"auto-height":a,fixed:a,"cursor-spacing":"0",cursor:"-1","selection-start":"-1","selection-end":"-1",bindFocus:i,bindBlur:i,bindLineChange:i,bindInput:i,bindConfirm:i,name:i},CoverView:Object.assign({"scroll-top":a},u),MovableArea:{"scale-area":a},MovableView:Object.assign(Object.assign({direction:"none",inertia:a,"out-of-bounds":a,x:i,y:i,damping:"20",friction:"2",disabled:i,scale:a,"scale-min":"0.5","scale-max":"10","scale-value":"1",bindChange:i,bindScale:i,bindHTouchMove:i,bindVTouchMove:i,width:s("10px"),height:s("10px")},u),c),ScrollView:Object.assign(Object.assign({"scroll-x":a,"scroll-y":a,"upper-threshold":"50","lower-threshold":"50","scroll-top":i,"scroll-left":i,"scroll-into-view":i,"scroll-with-animation":a,"enable-back-to-top":a,bindScrollToUpper:i,bindScrollToLower:i,bindScroll:i},u),c),Swiper:Object.assign({"indicator-dots":a,"indicator-color":s("rgba(0, 0, 0, .3)"),"indicator-active-color":s("#000000"),autoplay:a,current:"0",interval:"5000",duration:"500",circular:a,vertical:a,"previous-margin":s("0px"),"next-margin":s("0px"),"display-multiple-items":"1",bindChange:i,bindTransition:i,bindAnimationFinish:i},u),SwiperItem:{"item-id":i},Navigator:{url:i,"open-type":s("navigate"),delta:"1","hover-class":s("navigator-hover"),"hover-stop-propagation":a,"hover-start-time":"50","hover-stay-time":"600",bindSuccess:i,bindFail:i,bindComplete:i},Audio:{id:i,src:i,loop:a,controls:a,poster:i,name:i,author:i,bindError:i,bindPlay:i,bindPause:i,bindTimeUpdate:i,bindEnded:i},Camera:{"device-position":s("back"),flash:s("auto"),bindStop:i,bindError:i},Image:Object.assign({src:i,mode:s("scaleToFill"),"lazy-load":a,bindError:i,bindLoad:i},u),LivePlayer:Object.assign({src:i,autoplay:a,muted:a,orientation:s("vertical"),"object-fit":s("contain"),"background-mute":a,"min-cache":"1","max-cache":"3",bindStateChange:i,bindFullScreenChange:i,bindNetStatus:i},c),Video:Object.assign({src:i,duration:i,controls:o,"danmu-list":i,"danmu-btn":i,"enable-danmu":i,autoplay:a,loop:a,muted:a,"initial-time":"0","page-gesture":a,direction:i,"show-progress":o,"show-fullscreen-btn":o,"show-play-btn":o,"show-center-play-btn":o,"enable-progress-gesture":o,"object-fit":s("contain"),poster:i,"show-mute-btn":a,bindPlay:i,bindPause:i,bindEnded:i,bindTimeUpdate:i,bindFullScreenChange:i,bindWaiting:i,bindError:i},c),Canvas:Object.assign({"canvas-id":i,"disable-scroll":a,bindError:i},u),Ad:{"unit-id":i,"ad-intervals":i,bindLoad:i,bindError:i,bindClose:i},WebView:{src:i,bindMessage:i,bindLoad:i,bindError:i},Block:{},Map:d,Slot:{name:i},SlotView:{name:i}},h=new Set(["input","checkbox","picker","picker-view","radio","slider","switch","textarea"]);new Set(["input","textarea"]),new Set(["progress","icon","rich-text","input","textarea","slider","switch","audio","ad","official-account","open-data","navigation-bar"]),new Map([["view",-1],["catch-view",-1],["cover-view",-1],["static-view",-1],["pure-view",-1],["block",-1],["text",-1],["static-text",6],["slot",8],["slot-view",8],["label",6],["form",4],["scroll-view",4],["swiper",4],["swiper-item",4]]);class v{constructor(e){var t;this.callbacks=null!==(t=null==e?void 0:e.callbacks)&&void 0!==t?t:{}}on(e,t,r){let n,i,o,a;if(!t)return this;e=e.split(v.eventSplitter),this.callbacks||(this.callbacks={});const u=this.callbacks;for(;n=e.shift();)a=u[n],i=a?a.tail:{},i.next=o={},i.context=r,i.callback=t,u[n]={tail:o,next:a?a.next:i};return this}once(e,t,r){const n=(...i)=>{t.apply(this,i),this.off(e,n,r)};return this.on(e,n,r),this}off(e,t,r){let n,i,o,a,u,c;if(!(i=this.callbacks))return this;if(!(e||t||r))return delete this.callbacks,this;for(e=e?e.split(v.eventSplitter):Object.keys(i);n=e.shift();)if(o=i[n],delete i[n],o&&(t||r))for(a=o.tail;(o=o.next)!==a;)u=o.callback,c=o.context,(t&&u!==t||r&&c!==r)&&this.on(n,u,c);return this}trigger(e){let t,r,n,i;if(!(n=this.callbacks))return this;e=e.split(v.eventSplitter);const o=[].slice.call(arguments,1);for(;t=e.shift();)if(r=n[t])for(i=r.tail;(r=r.next)!==i;)r.callback.apply(r.context||this,o);return this}}function y(e){return"string"==typeof e}function b(e){return void 0===e}function m(e){return null===e}function g(e){return null!==e&&"object"==typeof e}function w(e){return"function"==typeof e}v.eventSplitter=/\s+/;const S=Array.isArray;var _;!function(e){e[e.SINGLE=0]="SINGLE",e[e.MULTI=1]="MULTI",e[e.WATERFALL=2]="WATERFALL"}(_||(_={}));const O={app:["onLaunch","onShow","onHide"],page:["onLoad","onUnload","onReady","onShow","onHide",["onPullDownRefresh","onReachBottom","onPageScroll","onResize","onTabItemTap","onTitleClick","onOptionMenuClick","onPopMenuClick","onPullIntercept","onAddToFavorites"],["onShareAppMessage","onShareTimeline"]],component:["attached","detached"]};function I(e,t){return{type:e,initial:t||null}}const E=new class extends v{constructor(e,t){super(t),this.hooks=e;for(const t in e){const{initial:r}=e[t];w(r)&&this.on(t,r)}}tapOneOrMany(e,t){(w(t)?[t]:t).forEach((t=>this.on(e,t)))}tap(e,t){const r=this.hooks,{type:n,initial:i}=r[e];n===_.SINGLE?(this.off(e),this.on(e,w(t)?t:t[t.length-1])):(i&&this.off(e,i),this.tapOneOrMany(e,t))}call(e,...t){var r;const n=this.hooks[e];if(!n)return;const{type:i}=n,o=this.callbacks;if(!o)return;const a=o[e];if(a){const e=a.tail;let n,o=a.next,u=t;for(;o!==e;){if(n=null===(r=o.callback)||void 0===r?void 0:r.apply(o.context||this,u),i===_.WATERFALL){u=[n]}o=o.next}return n}}isExist(e){var t;return Boolean(null===(t=this.callbacks)||void 0===t?void 0:t[e])}}({getMiniLifecycle:I(_.SINGLE,(e=>e)),getMiniLifecycleImpl:I(_.SINGLE,(function(){return this.call("getMiniLifecycle",O)})),getLifecycle:I(_.SINGLE,((e,t)=>e[t])),getPathIndex:I(_.SINGLE,(e=>`[${e}]`)),getEventCenter:I(_.SINGLE,(e=>new e)),isBubbleEvents:I(_.SINGLE,(e=>new Set(["touchstart","touchmove","touchcancel","touchend","touchforcechange","tap","longpress","longtap","transitionend","animationstart","animationiteration","animationend"]).has(e))),getSpecialNodes:I(_.SINGLE,(()=>["view","text","image"])),onRemoveAttribute:I(_.SINGLE),batchedEventUpdates:I(_.SINGLE),mergePageInstance:I(_.SINGLE),modifyPageObject:I(_.SINGLE),createPullDownComponent:I(_.SINGLE),getDOMNode:I(_.SINGLE),modifyHydrateData:I(_.SINGLE),modifySetAttrPayload:I(_.SINGLE),modifyRmAttrPayload:I(_.SINGLE),onAddEvent:I(_.SINGLE),modifyMpEvent:I(_.MULTI),modifyMpEventImpl:I(_.SINGLE,(function(e){try{this.call("modifyMpEvent",e)}catch(e){console.warn("[Taro modifyMpEvent hook Error]: ",e)}})),modifyTaroEvent:I(_.MULTI),modifyDispatchEvent:I(_.MULTI),initNativeApi:I(_.MULTI),patchElement:I(_.MULTI)}),C={},A=(...e)=>{};function x(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}function T(e){let t="",r=!1;for(let n=0;n<e.length;n++)"-"!==e[n]?(t+=r?e[n].toUpperCase():e[n],r=!1):r=!0;return t}Object.prototype.hasOwnProperty;function P(e,t){if(!e)throw new Error(t)}(new Date).getTime().toString();new Set(["addPhoneContact","authorize","canvasGetImageData","canvasPutImageData","canvasToTempFilePath","checkSession","chooseAddress","chooseImage","chooseInvoiceTitle","chooseLocation","chooseVideo","clearStorage","closeBLEConnection","closeBluetoothAdapter","closeSocket","compressImage","connectSocket","createBLEConnection","downloadFile","exitMiniProgram","getAvailableAudioSources","getBLEDeviceCharacteristics","getBLEDeviceServices","getBatteryInfo","getBeacons","getBluetoothAdapterState","getBluetoothDevices","getClipboardData","getConnectedBluetoothDevices","getConnectedWifi","getExtConfig","getFileInfo","getImageInfo","getLocation","getNetworkType","getSavedFileInfo","getSavedFileList","getScreenBrightness","getSetting","getStorage","getStorageInfo","getSystemInfo","getUserInfo","getWifiList","hideHomeButton","hideShareMenu","hideTabBar","hideTabBarRedDot","loadFontFace","login","makePhoneCall","navigateBack","navigateBackMiniProgram","navigateTo","navigateToBookshelf","navigateToMiniProgram","notifyBLECharacteristicValueChange","hideKeyboard","hideLoading","hideNavigationBarLoading","hideToast","openBluetoothAdapter","openDocument","openLocation","openSetting","pageScrollTo","previewImage","queryBookshelf","reLaunch","readBLECharacteristicValue","redirectTo","removeSavedFile","removeStorage","removeTabBarBadge","requestSubscribeMessage","saveFile","saveImageToPhotosAlbum","saveVideoToPhotosAlbum","scanCode","sendSocketMessage","setBackgroundColor","setBackgroundTextStyle","setClipboardData","setEnableDebug","setInnerAudioOption","setKeepScreenOn","setNavigationBarColor","setNavigationBarTitle","setScreenBrightness","setStorage","setTabBarBadge","setTabBarItem","setTabBarStyle","showActionSheet","showFavoriteGuide","showLoading","showModal","showShareMenu","showTabBar","showTabBarRedDot","showToast","startBeaconDiscovery","startBluetoothDevicesDiscovery","startDeviceMotionListening","startPullDownRefresh","stopBeaconDiscovery","stopBluetoothDevicesDiscovery","stopCompass","startCompass","startAccelerometer","stopAccelerometer","showNavigationBarLoading","stopDeviceMotionListening","stopPullDownRefresh","switchTab","uploadFile","vibrateLong","vibrateShort","writeBLECharacteristicValue"]);const j="小程序 setData",D="页面初始化",k="root",M="document-fragment",B="id",L="class",N="style",R="focus",F="view",U="static-view",q="pure-view",$="value",V="input",z="custom-wrapper",W="target",G="currentTarget",H="type",J="confirm",Y="timeStamp",K="keyCode",Z="touchmove",Q="catchMove",X="catch-view",ee="comment",te="onLoad",re="onReady",ne="onShow",ie="onHide",oe="options",ae="externalClasses",ue="behaviors",ce=[];const se=(e,t)=>{const{characterData:r,characterDataOldValue:n,attributes:i,attributeOldValue:o,childList:a}=t;switch(e.type){case"characterData":return!!r&&(n||(e.oldValue=null),!0);case"attributes":return!!i&&(o||(e.oldValue=null),!0);case"childList":return!!a}};let le=!1;function fe(e,t){e.records.push(t),le||(le=!0,Promise.resolve().then((()=>{le=!1,ce.forEach((e=>e.callback(e.takeRecords())))})))}class de{constructor(e){this.core={observe:A,disconnect:A,takeRecords:A}}observe(...e){this.core.observe(...e)}disconnect(){this.core.disconnect()}takeRecords(){return this.core.takeRecords()}static record(e){!function(e){ce.forEach((t=>{const{options:r}=t;for(let o=e.target;o;o=o.parentNode){if(i=o,(n=t.target)&&n.sid===(null==i?void 0:i.sid)&&se(e,r)){fe(t,e);break}if(!r.subtree)break}var n,i}))}(e)}}const pe=()=>{const e=[];for(let t=65;t<=90;t++)e.push(t);for(let t=97;t<=122;t++)e.push(t);const t=e.length-1,r=[0,0];return()=>{const n=r.map((t=>e[t])),i=String.fromCharCode(...n);let o=r.length-1;for(r[o]++;r[o]>t;){if(r[o]=0,o-=1,o<0){r.push(0);break}r[o]++}return i}};function he(e){return 1===e.nodeType}function ve(e){return e.nodeName===ee}function ye(e){const t=Object.keys(e.props).find((e=>!(/^(class|style|id)$/.test(e)||e.startsWith("data-"))));return Boolean(t)}function be(e){switch(e){case N:return"st";case B:return"uid";case L:return"cl";default:return e}}const me=new Map;function ge(e,t,r){w(r)&&(r={value:r}),Object.defineProperty(e.prototype,t,Object.assign({configurable:!0,enumerable:!0},r))}let we;function Se(){return we||(we=function(e){const t={},r=e.View,n={"#text":{},StaticView:r,StaticImage:e.Image,StaticText:e.Text,PureView:r,CatchView:r};return e=Object.assign(Object.assign({},e),n),Object.keys(e).sort(((e,t)=>{const r=/^(Static|Pure|Catch)*(View|Image|Text)$/,n=r.test(e),i=r.test(t);return n&&i?e>t?1:-1:n?-1:i||e>=t?1:-1})).forEach(((r,n)=>{const i={_num:String(n)};Object.keys(e[r]).filter((e=>!/^bind/.test(e)&&!["focus","blur"].includes(e))).sort().forEach(((e,t)=>{i[T(e)]="p"+t})),t[x(r)]=i})),t}(p)),we}class _e extends Set{constructor(e,t){super(),e.trim().split(/\s+/).forEach(super.add.bind(this)),this.el=t}get value(){return[...this].filter((e=>""!==e)).join(" ")}add(e){return super.add(e),this._update(),this}get length(){return this.size}remove(e){super.delete(e),this._update()}toggle(e){super.has(e)?super.delete(e):super.add(e),this._update()}replace(e,t){super.delete(e),super.add(t),this._update()}contains(e){return super.has(e)}toString(){return this.value}_update(){this.el.className=this.value}}class Oe extends Map{removeNode(e){const{sid:t,uid:r}=e;this.delete(t),r!==t&&r&&this.delete(r)}removeNodeTree(e){this.removeNode(e);const{childNodes:t}=e;t.forEach((e=>this.removeNodeTree(e)))}}const Ie=new Oe,Ee={window:C,document:C};let Ce,Ae;function xe(e){Ae||(Ae=Se()),Ce||(Ce=E.call("getSpecialNodes"));const t=e.nodeName;if(function(e){return 3===e.nodeType}(e))return{v:e.nodeValue,nn:Ae[t]._num};const r={nn:t,sid:e.sid};e.uid!==e.sid&&(r.uid=e.uid),!e.isAnyEventBinded()&&Ce.indexOf(t)>-1&&(r.nn=`static-${t}`,t!==F||ye(e)||(r.nn=q));const{props:n}=e;for(const e in n){const i=T(e);e.startsWith("data-")||e===L||e===N||e===B||i===Q||(r[i]=n[e]),t===F&&i===Q&&!1!==n[e]&&(r.nn=X)}let{childNodes:i}=e;i=i.filter((e=>!ve(e))),i.length>0?r.cn=i.map(xe):r.cn=[],""!==e.className&&(r.cl=e.className);const o=e.cssText;""!==o&&"swiper-item"!==t&&(r.st=o),E.call("modifyHydrateData",r);const a=r.nn,u=Ae[a];if(u){r.nn=u._num;for(const e in r)e in u&&(r[u[e]]=r[e],delete r[e])}return r}class Te{constructor(){this.__handlers={}}addEventListener(e,t,r){if(e=e.toLowerCase(),E.call("onAddEvent",e,t,r,this),"regionchange"===e)return this.addEventListener("begin",t,r),void this.addEventListener("end",t,r);let n=Boolean(r),i=!1;if(g(r)&&(n=Boolean(r.capture),i=Boolean(r.once)),i){const n=function(){t.apply(this,arguments),this.removeEventListener(e,n)};return void this.addEventListener(e,n,Object.assign(Object.assign({},r),{once:!1}))}const o=t;t=function(){o.apply(this,arguments)},t.oldHandler=o;const a=this.__handlers[e];S(a)?a.push(t):this.__handlers[e]=[t]}removeEventListener(e,t){if("regionchange"===(e=e.toLowerCase()))return this.removeEventListener("begin",t),void this.removeEventListener("end",t);if(!t)return;const r=this.__handlers[e];if(!S(r))return;const n=r.findIndex((e=>{if(e===t||e.oldHandler===t)return!0}));r.splice(n,1)}isAnyEventBinded(){const e=this.__handlers,t=Object.keys(e).find((t=>e[t].length));return Boolean(t)}}const Pe=pe();class je extends Te{constructor(){super(),this.parentNode=null,this.childNodes=[],this.hydrate=e=>()=>xe(e),this.uid="_"+Pe(),this.sid=this.uid,Ie.set(this.sid,this)}updateChildNodes(e){this.enqueueUpdate({path:`${this._path}.cn`,value:e?()=>[]:()=>this.childNodes.filter((e=>!ve(e))).map(xe)})}get _root(){var e;return(null===(e=this.parentNode)||void 0===e?void 0:e._root)||null}findIndex(e){const t=this.childNodes.indexOf(e);return P(-1!==t,"The node to be replaced is not a child of this node."),t}get _path(){const e=this.parentNode;if(e){const t=e.childNodes.filter((e=>!ve(e))).indexOf(this),r=E.call("getPathIndex",t);return`${e._path}.cn.${r}`}return""}get nextSibling(){const e=this.parentNode;return(null==e?void 0:e.childNodes[e.findIndex(this)+1])||null}get previousSibling(){const e=this.parentNode;return(null==e?void 0:e.childNodes[e.findIndex(this)-1])||null}get parentElement(){const e=this.parentNode;return 1===(null==e?void 0:e.nodeType)?e:null}get firstChild(){return this.childNodes[0]||null}get lastChild(){const e=this.childNodes;return e[e.length-1]||null}set textContent(e){const t=this.childNodes.slice(),r=[];for(;this.firstChild;)this.removeChild(this.firstChild,{doUpdate:!1});if(""===e)this.updateChildNodes(!0);else{const t=Ee.document.createTextNode(e);r.push(t),this.appendChild(t),this.updateChildNodes()}de.record({type:"childList",target:this,removedNodes:t,addedNodes:r})}insertBefore(e,t,r){if(e.nodeName===M)return e.childNodes.reduceRight(((e,t)=>(this.insertBefore(t,e),t)),t),e;if(e.remove({cleanRef:!1}),e.parentNode=this,t){const r=this.findIndex(t);this.childNodes.splice(r,0,e)}else this.childNodes.push(e);if(this._root)if(t)r?this.enqueueUpdate({path:e._path,value:this.hydrate(e)}):this.updateChildNodes();else{1===this.childNodes.length?this.updateChildNodes():this.enqueueUpdate({path:e._path,value:this.hydrate(e)})}return de.record({type:"childList",target:this,addedNodes:[e],removedNodes:r?[t]:[],nextSibling:r?t.nextSibling:t||null,previousSibling:e.previousSibling}),e}appendChild(e){return this.insertBefore(e)}replaceChild(e,t){if(t.parentNode===this)return this.insertBefore(e,t,!0),t.remove({doUpdate:!1}),t}removeChild(e,t={}){const{cleanRef:r,doUpdate:n}=t;!1!==r&&!1!==n&&de.record({type:"childList",target:this,removedNodes:[e],nextSibling:e.nextSibling,previousSibling:e.previousSibling});const i=this.findIndex(e);return this.childNodes.splice(i,1),e.parentNode=null,!1!==r&&Ie.removeNodeTree(e),this._root&&!1!==n&&this.updateChildNodes(),e}remove(e){var t;null===(t=this.parentNode)||void 0===t||t.removeChild(this,e)}hasChildNodes(){return this.childNodes.length>0}enqueueUpdate(e){var t;null===(t=this._root)||void 0===t||t.enqueueUpdate(e)}get ownerDocument(){return Ee.document}static extend(e,t){ge(je,e,t)}}const De="webkit",ke=["all","appearance","blockOverflow","blockSize","bottom","clear","contain","content","continue","cursor","direction","display","filter","float","gap","height","inset","isolation","left","letterSpacing","lightingColor","markerSide","mixBlendMode","opacity","order","position","quotes","resize","right","rowGap","tabSize","tableLayout","top","userSelect","verticalAlign","visibility","voiceFamily","volume","whiteSpace","widows","width","zIndex","pointerEvents"];function Me(e,t,r){!r&&ke.push(e),t.forEach((t=>{ke.push(e+t),e===De&&ke.push("Webkit"+t)}))}const Be="Color",Le="Style",Ne="Width",Re="Image",Fe="Size",Ue=[Be,Le,Ne],qe=["FitLength","FitWidth",Re],$e=[...qe,"Radius"],Ve=[...Ue,...qe],ze=["EndRadius","StartRadius"],We=["Bottom","Left","Right","Top"],Ge=["End","Start"],He=["Content","Items","Self"],Je=["BlockSize","Height","InlineSize",Ne],Ye=["After","Before"];function Ke(e){de.record({type:"attributes",target:e._element,attributeName:"style",oldValue:e.cssText})}function Ze(e){const t=e._element;t._root&&t.enqueueUpdate({path:`${t._path}.st`,value:e.cssText})}function Qe(e,t){this[t]!==e&&(!this._pending&&Ke(this),m(e)||b(e)?(this._usedStyleProp.delete(t),delete this._value[t]):(this._usedStyleProp.add(t),this._value[t]=e),!this._pending&&Ze(this))}Me("borderBlock",Ue),Me("borderBlockEnd",Ue),Me("borderBlockStart",Ue),Me("outline",[...Ue,"Offset"]),Me("border",[...Ue,"Boundary","Break","Collapse","Radius","Spacing"]),Me("borderFit",["Length",Ne]),Me("borderInline",Ue),Me("borderInlineEnd",Ue),Me("borderInlineStart",Ue),Me("borderLeft",Ve),Me("borderRight",Ve),Me("borderTop",Ve),Me("borderBottom",Ve),Me("textDecoration",[Be,Le,"Line"]),Me("textEmphasis",[Be,Le,"Position"]),Me("scrollMargin",We),Me("scrollPadding",We),Me("padding",We),Me("margin",[...We,"Trim"]),Me("scrollMarginBlock",Ge),Me("scrollMarginInline",Ge),Me("scrollPaddingBlock",Ge),Me("scrollPaddingInline",Ge),Me("gridColumn",Ge),Me("gridRow",Ge),Me("insetBlock",Ge),Me("insetInline",Ge),Me("marginBlock",Ge),Me("marginInline",Ge),Me("paddingBlock",Ge),Me("paddingInline",Ge),Me("pause",Ye),Me("cue",Ye),Me("mask",["Clip","Composite",Re,"Mode","Origin","Position","Repeat",Fe,"Type"]),Me("borderImage",["Outset","Repeat","Slice","Source","Transform",Ne]),Me("maskBorder",["Mode","Outset","Repeat","Slice","Source",Ne]),Me("font",["Family","FeatureSettings","Kerning","LanguageOverride","MaxSize","MinSize","OpticalSizing","Palette",Fe,"SizeAdjust","Stretch",Le,"Weight","VariationSettings"]),Me("transform",["Box","Origin",Le]),Me("background",[Be,Re,"Attachment","BlendMode","Clip","Origin","Position","Repeat",Fe]),Me("listStyle",[Re,"Position","Type"]),Me("scrollSnap",["Align","Stop","Type"]),Me("grid",["Area","AutoColumns","AutoFlow","AutoRows"]),Me("gridTemplate",["Areas","Columns","Rows"]),Me("overflow",["Block","Inline","Wrap","X","Y"]),Me("transition",["Delay","Duration","Property","TimingFunction"]),Me("color",["Adjust","InterpolationFilters","Scheme"]),Me("textAlign",["All","Last"]),Me("page",["BreakAfter","BreakBefore","BreakInside"]),Me("animation",["Delay","Direction","Duration","FillMode","IterationCount","Name","PlayState","TimingFunction"]),Me("flex",["Basis","Direction","Flow","Grow","Shrink","Wrap"]),Me("offset",[...Ye,...Ge,"Anchor","Distance","Path","Position","Rotate"]),Me("perspective",["Origin"]),Me("clip",["Path","Rule"]),Me("flow",["From","Into"]),Me("align",["Content","Items","Self"],!0),Me("alignment",["Adjust","Baseline"],!0),Me("borderStart",ze,!0),Me("borderEnd",ze,!0),Me("borderCorner",["Fit",Re,"ImageTransform"],!0),Me("borderTopLeft",$e,!0),Me("borderTopRight",$e,!0),Me("borderBottomLeft",$e,!0),Me("borderBottomRight",$e,!0),Me("column",["s","Count","Fill","Gap","Rule","RuleColor","RuleStyle","RuleWidth","Span",Ne],!0),Me("break",[...Ye,"Inside"],!0),Me("wrap",[...Ye,"Flow","Inside","Through"],!0),Me("justify",He,!0),Me("place",He,!0),Me("max",[...Je,"Lines"],!0),Me("min",Je,!0),Me("line",["Break","Clamp","Grid","Height","Padding","Snap"],!0),Me("inline",["BoxAlign",Fe,"Sizing"],!0),Me("text",["CombineUpright","GroupAlign","Height","Indent","Justify","Orientation","Overflow","Shadow","SpaceCollapse","SpaceTrim","Spacing","Transform","UnderlinePosition","Wrap"],!0),Me("shape",["ImageThreshold","Inside","Margin","Outside"],!0),Me("word",["Break","Spacing","Wrap"],!0),Me("object",["Fit","Position"],!0),Me("box",["DecorationBreak","Shadow","Sizing","Snap"],!0),Me(De,["LineClamp","BoxOrient","TextFillColor","TextStroke","TextStrokeColor","TextStrokeWidth"],!0);class Xe{constructor(e){this._element=e,this._usedStyleProp=new Set,this._value={}}setCssVariables(e){this.hasOwnProperty(e)||Object.defineProperty(this,e,{enumerable:!0,configurable:!0,get:()=>this._value[e]||"",set:t=>{Qe.call(this,t,e)}})}get cssText(){if(!this._usedStyleProp.size)return"";const e=[];return this._usedStyleProp.forEach((t=>{const r=this[t];if(m(r)||b(r))return;let n=/^--/.test(t)?t:x(t);0!==n.indexOf("webkit")&&0!==n.indexOf("Webkit")||(n=`-${n}`),e.push(`${n}: ${r};`)})),e.join(" ")}set cssText(e){if(this._pending=!0,Ke(this),this._usedStyleProp.forEach((e=>{this.removeProperty(e)})),""===e||b(e)||m(e))return this._pending=!1,void Ze(this);const t=e.split(";");for(let e=0;e<t.length;e++){const r=t[e].trim();if(""===r)continue;const[n,...i]=r.split(":"),o=i.join(":");b(o)||this.setProperty(n.trim(),o.trim())}this._pending=!1,Ze(this)}setProperty(e,t){"-"===e[0]?this.setCssVariables(e):e=T(e),m(t)||b(t)?this.removeProperty(e):this[e]=t}removeProperty(e){if(e=T(e),!this._usedStyleProp.has(e))return"";const t=this[e];return this[e]=void 0,t}getPropertyValue(e){const t=this[e=T(e)];return t||""}}function et(){return!0}function tt(e,t){const r=[],n=null!=t?t:et;let i=e;for(;i;)1===i.nodeType&&n(i)&&r.push(i),i=rt(i,e);return r}function rt(e,t){const r=e.firstChild;if(r)return r;let n=e;do{if(n===t)return null;const e=n.nextSibling;if(e)return e;n=n.parentElement}while(n);return null}!function(e){const t={};for(let e=0;e<ke.length;e++){const r=ke[e];t[r]={get(){const e=this._value[r];return m(e)||b(e)?"":e},set(e){Qe.call(this,e,r)}}}Object.defineProperties(e.prototype,t)}(Xe);class nt extends je{constructor(){super(),this.props={},this.dataset=C,this.nodeType=1,this.style=new Xe(this),E.call("patchElement",this)}_stopPropagation(e){let t=this;for(;t=t.parentNode;){const r=t.__handlers[e.type];if(S(r))for(let e=r.length;e--;){r[e]._stop=!0}}}get id(){return this.getAttribute(B)}set id(e){this.setAttribute(B,e)}get className(){return this.getAttribute(L)||""}set className(e){this.setAttribute(L,e)}get cssText(){return this.getAttribute(N)||""}get classList(){return new _e(this.className,this)}get children(){return this.childNodes.filter(he)}get attributes(){const e=this.props,t=Object.keys(e),r=this.style.cssText;return t.map((t=>({name:t,value:e[t]}))).concat(r?{name:N,value:r}:[])}get textContent(){let e="";const t=this.childNodes;for(let r=0;r<t.length;r++)e+=t[r].textContent;return e}set textContent(e){super.textContent=e}hasAttribute(e){return!b(this.props[e])}hasAttributes(){return this.attributes.length>0}get focus(){return function(){this.setAttribute(R,!0)}}set focus(e){this.setAttribute(R,e)}blur(){this.setAttribute(R,!1)}setAttribute(e,t){const r=this.nodeName===F&&!ye(this)&&!this.isAnyEventBinded();switch(e!==N&&de.record({target:this,type:"attributes",attributeName:e,oldValue:this.getAttribute(e)}),e){case N:this.style.cssText=t;break;case B:this.uid!==this.sid&&Ie.delete(this.uid),t=String(t),this.props[e]=this.uid=t,Ie.set(t,this);break;default:this.props[e]=t,e.startsWith("data-")&&(this.dataset===C&&(this.dataset=Object.create(null)),this.dataset[T(e.replace(/^data-/,""))]=t)}if(!this._root)return;const n=Se(),i=n[this.nodeName],o=n[F]._num,a=n[U]._num,u=n[X]._num,c=this._path,s=T(e=be(e)),l={path:`${c}.${s}`,value:w(t)?()=>t:t};if(E.call("modifySetAttrPayload",this,e,l,n),i){const t=i[s]||e;l.path=`${c}.${T(t)}`}this.enqueueUpdate(l),this.nodeName===F&&(s===Q?this.enqueueUpdate({path:`${c}.nn`,value:t?u:this.isAnyEventBinded()?o:a}):r&&ye(this)&&this.enqueueUpdate({path:`${c}.nn`,value:a}))}removeAttribute(e){const t=this.nodeName===F&&ye(this)&&!this.isAnyEventBinded();if(de.record({target:this,type:"attributes",attributeName:e,oldValue:this.getAttribute(e)}),e===N)this.style.cssText="";else{if(E.call("onRemoveAttribute",this,e))return;if(!this.props.hasOwnProperty(e))return;delete this.props[e]}if(!this._root)return;const r=Se(),n=r[this.nodeName],i=r[F]._num,o=r[U]._num,a=r[q]._num,u=this._path,c=T(e=be(e)),s={path:`${u}.${c}`,value:""};if(E.call("modifyRmAttrPayload",this,e,s,r),n){const t=n[c]||e;s.path=`${u}.${T(t)}`}this.enqueueUpdate(s),this.nodeName===F&&(c===Q?this.enqueueUpdate({path:`${u}.nn`,value:this.isAnyEventBinded()?i:ye(this)?o:a}):t&&!ye(this)&&this.enqueueUpdate({path:`${u}.nn`,value:a}))}getAttribute(e){const t=e===N?this.style.cssText:this.props[e];return null!=t?t:""}getElementsByTagName(e){return tt(this,(t=>t.nodeName===e||"*"===e&&this!==t))}getElementsByClassName(e){return tt(this,(t=>{const r=t.classList;return e.trim().split(/\s+/).every((e=>r.has(e)))}))}dispatchEvent(e){const t=e.cancelable,r=this.__handlers[e.type];if(!S(r))return!1;for(let n=r.length;n--;){const i=r[n];let o;if(i._stop?i._stop=!1:(E.call("modifyDispatchEvent",e,this),o=i.call(this,e)),(!1===o||e._end)&&t&&(e.defaultPrevented=!0),e._end&&e._stop)break}return e._stop?this._stopPropagation(e):e._stop=!0,null!=r}addEventListener(e,t,r){const n=this.nodeName,i=E.call("getSpecialNodes");let o=!0;if(g(r)&&!1===r.sideEffect&&(o=!1,delete r.sideEffect),!1!==o&&!this.isAnyEventBinded()&&i.indexOf(n)>-1){const e=Se()[n]._num;this.enqueueUpdate({path:`${this._path}.nn`,value:e})}super.addEventListener(e,t,r)}removeEventListener(e,t,r=!0){super.removeEventListener(e,t);const n=this.nodeName,i=E.call("getSpecialNodes");if(!1!==r&&!this.isAnyEventBinded()&&i.indexOf(n)>-1){const e=Se()[ye(this)?`static-${n}`:`pure-${n}`]._num;this.enqueueUpdate({path:`${this._path}.nn`,value:e})}}static extend(e,t){ge(nt,e,t)}}const it={prerender:!0,debug:!1};function ot(e,t){const r=Object.create(null),n=e.split(",");for(let e=0;e<n.length;e++)r[n[e]]=!0;return t?e=>!!r[e.toLowerCase()]:e=>!!r[e]}const at=Object.keys(p).map((e=>e.toLowerCase())).join(",");ot(at,!0),ot("a,i,abbr,iframe,select,acronym,slot,small,span,bdi,kbd,strong,big,map,sub,sup,br,mark,mark,meter,template,canvas,textarea,cite,object,time,code,output,u,data,picture,tt,datalist,var,dfn,del,q,em,s,embed,samp,b",!0),ot("address,fieldset,li,article,figcaption,main,aside,figure,nav,blockquote,footer,ol,details,form,p,dialog,h1,h2,h3,h4,h5,h6,pre,dd,header,section,div,hgroup,table,dl,hr,ul,dt",!0);it.html={skipElements:new Set(["style","script"]),voidElements:new Set(["!doctype","area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),closingElements:new Set(["html","head","body","p","dt","dd","li","option","thead","th","tbody","tr","td","tfoot","colgroup"]),renderHTMLTag:!1};class ut{constructor(e,t,r){this._stop=!1,this._end=!1,this.defaultPrevented=!1,this.timeStamp=Date.now(),this.type=e.toLowerCase(),this.mpEvent=r,this.bubbles=Boolean(t&&t.bubbles),this.cancelable=Boolean(t&&t.cancelable)}stopPropagation(){this._stop=!0}stopImmediatePropagation(){this._end=this._stop=!0}preventDefault(){this.defaultPrevented=!0}get target(){var e,t;const r=this.cacheTarget;if(r)return r;{const r=Object.create((null===(e=this.mpEvent)||void 0===e?void 0:e.target)||null),n=Ee.document.getElementById(r.id);r.dataset=null!==n?n.dataset:C;for(const e in null===(t=this.mpEvent)||void 0===t?void 0:t.detail)r[e]=this.mpEvent.detail[e];return this.cacheTarget=r,r}}get currentTarget(){var e,t,r,n;const i=this.cacheCurrentTarget;if(i)return i;{const i=Ee.document,o=Object.create((null===(e=this.mpEvent)||void 0===e?void 0:e.currentTarget)||null),a=i.getElementById(o.id),u=i.getElementById((null===(r=null===(t=this.mpEvent)||void 0===t?void 0:t.target)||void 0===r?void 0:r.id)||null);if(null===a||a&&a===u)return this.cacheCurrentTarget=this.target,this.target;o.dataset=a.dataset;for(const e in null===(n=this.mpEvent)||void 0===n?void 0:n.detail)o[e]=this.mpEvent.detail[e];return this.cacheCurrentTarget=o,o}}}function ct(e,t){if("string"==typeof e)return new ut(e,{bubbles:!0,cancelable:!0});const r=new ut(e.type,{bubbles:!0,cancelable:!0},e);for(const t in e)t!==G&&t!==W&&t!==H&&t!==Y&&(r[t]=e[t]);return r.type===J&&(null==t?void 0:t.nodeName)===V&&(r[K]=13),r}const st={};function lt(e){var t;E.call("modifyMpEventImpl",e),e.currentTarget||(e.currentTarget=e.target);const r=e.currentTarget,n=(null===(t=r.dataset)||void 0===t?void 0:t.sid)||r.id||"",i=Ee.document.getElementById(n);if(i){const t=()=>{const t=ct(e,i);E.call("modifyTaroEvent",t,i),i.dispatchEvent(t)};if(E.isExist("batchedEventUpdates")){const r=e.type;!E.call("isBubbleEvents",r)||!function(e,t){var r;let n=!1;for(;(null==e?void 0:e.parentElement)&&e.parentElement._path!==k;){if(null===(r=e.parentElement.__handlers[t])||void 0===r?void 0:r.length){n=!0;break}e=e.parentElement}return n}(i,r)||r===Z&&i.props.catchMove?E.call("batchedEventUpdates",(()=>{st[r]&&(st[r].forEach((e=>e())),delete st[r]),t()})):(st[r]||(st[r]=[])).push(t)}else t()}}class ft extends nt{get value(){const e=this.props[$];return null==e?"":e}set value(e){this.setAttribute($,e)}dispatchEvent(e){if(e.mpEvent){const t=e.mpEvent.detail.value;"change"===e.type?this.props.value=t:e.type===V&&(this.value=t)}return super.dispatchEvent(e)}}const dt=new class{constructor(){this.recorder=new Map}start(e){it.debug&&this.recorder.set(e,Date.now())}stop(e){if(!it.debug)return;const t=Date.now()-this.recorder.get(e);console.log(`${e} 时长： ${t}ms`)}};function pt(e,t){const r=t.slice(1);let n,i=e,o="";if(r.some(((e,r)=>{const a=e.replace(/^\[(.+)\]$/,"$1").replace(/\bcn\b/g,"childNodes");if(i=i[a],b(i))return!0;if(i.nodeName===z){const e=me.get(i.sid);e&&(n=e,o=t.slice(r+2).join("."))}})),n)return{customWrapper:n,splitedPath:o}}class ht extends nt{constructor(){super(),this.updatePayloads=[],this.updateCallbacks=[],this.pendingUpdate=!1,this.ctx=null,this.nodeName=k,this.tagName=k.toUpperCase()}get _path(){return k}get _root(){return this}enqueueUpdate(e){this.updatePayloads.push(e),!this.pendingUpdate&&this.ctx&&this.performUpdate()}performUpdate(e=!1,t){this.pendingUpdate=!0;const r=this.ctx;setTimeout((()=>{dt.start(j);const n=Object.create(null),i=new Set(e?["root.cn.[0]","root.cn[0]"]:[]);for(;this.updatePayloads.length>0;){const{path:e,value:t}=this.updatePayloads.shift();e.endsWith("cn")&&i.add(e),n[e]=t}for(const e in n){i.forEach((t=>{e.includes(t)&&e!==t&&delete n[e]}));const t=n[e];w(t)&&(n[e]=t())}if(w(t))return t(n);this.pendingUpdate=!1;let o={};const a=new Map;if(e)o=n;else for(const e in n){const t=pt(this,e.split("."));if(t){const{customWrapper:r,splitedPath:i}=t;a.set(r,Object.assign(Object.assign({},a.get(r)||{}),{[`i.${i}`]:n[e]}))}else o[e]=n[e]}const u=a.size,c=Object.keys(o).length>0,s=u+(c?1:0);let l=0;const f=()=>{++l===s&&(dt.stop(j),this.flushUpdateCallback(),e&&dt.stop(D))};u&&a.forEach(((e,t)=>{t.setData(e,f)})),c&&r.setData(o,f)}),0)}enqueueUpdateCallback(e,t){this.updateCallbacks.push((()=>{t?e.call(t):e()}))}flushUpdateCallback(){const e=this.updateCallbacks;if(!e.length)return;const t=e.slice(0);this.updateCallbacks.length=0;for(let e=0;e<t.length;e++)t[e]()}}class vt extends je{constructor(e){super(),this.nodeType=3,this.nodeName="#text",this._value=e}set textContent(e){de.record({target:this,type:"characterData",oldValue:this._value}),this._value=e,this.enqueueUpdate({path:`${this._path}.v`,value:e})}get textContent(){return this._value}set nodeValue(e){this.textContent=e}get nodeValue(){return this._value}set data(e){this.textContent=e}get data(){return this._value}}class yt extends nt{constructor(){super(),this.createEvent=ct,this.nodeType=9,this.nodeName="#document"}createElement(e){if(e===k)return new ht;const t=h.has(e)?new ft:new nt;return t.nodeName=e,t.tagName=e.toUpperCase(),t}createElementNS(e,t){return this.createElement(t)}createTextNode(e){return new vt(e)}getElementById(e){const t=Ie.get(e);return b(t)?null:t}querySelector(e){return/^#/.test(e)?this.getElementById(e.slice(1)):null}querySelectorAll(){return[]}createComment(){const e=new vt("");return e.nodeName=ee,e}get defaultView(){return Ee.window}}let bt;{function Gt(){const e=new yt,t=e.createElement.bind(e),r=t("html"),n=t("head"),i=t("body"),o=t("app");o.id="app";const a=t("container");return e.appendChild(r),r.appendChild(n),r.appendChild(i),i.appendChild(a),a.appendChild(o),e.documentElement=r,e.head=n,e.body=i,e}bt=Ee.document=Gt()}function mt(e){return e.style}const gt="(Macintosh; Intel Mac OS X 10_14_5) AppleWebKit/534.36 (KHTML, like Gecko) NodeJS/v4.1.0 Chrome/76.0.3809.132 Safari/534.36",wt={appCodeName:"Mozilla",appName:"Netscape",appVersion:"5.0 "+gt,cookieEnabled:!0,mimeTypes:[],onLine:!0,platform:"MacIntel",plugins:[],product:"Taro",productSub:"20030107",userAgent:"Mozilla/5.0 "+gt,vendor:"Joyent",vendorSub:""};let St;!function(){let e;"undefined"!=typeof performance&&null!==performance&&performance.now?St=()=>performance.now():Date.now?(e=Date.now(),St=()=>Date.now()-e):(e=(new Date).getTime(),St=()=>(new Date).getTime()-e)}();let _t=0;const Ot="undefined"!=typeof requestAnimationFrame&&null!==requestAnimationFrame?requestAnimationFrame:function(e){const t=St(),r=Math.max(_t+16,t);return setTimeout((function(){e(_t=r)}),r-t)},It="undefined"!=typeof cancelAnimationFrame&&null!==cancelAnimationFrame?cancelAnimationFrame:function(e){clearTimeout(e)},Et=E.call("getEventCenter",v);let Ct;{class Ht extends v{constructor(){super(),this.navigator=wt,this.requestAnimationFrame=Ot,this.cancelAnimationFrame=It,this.getComputedStyle=mt;[...Object.getOwnPropertyNames(global||{}),...Object.getOwnPropertySymbols(global||{})].forEach((e=>{"atob"!==e&&"document"!==e&&(Object.prototype.hasOwnProperty.call(this,e)||(this[e]=global[e]))})),this.Date||(this.Date=Date)}get document(){return Ee.document}addEventListener(e,t){y(e)&&this.on(e,t,null)}removeEventListener(e,t){y(e)&&this.off(e,t,null)}setTimeout(...e){return setTimeout(...e)}clearTimeout(...e){return clearTimeout(...e)}}Ct=Ee.window=new Ht}class At extends nt{}const xt={app:null,router:null,page:null},Tt=()=>xt,Pt=new Map,jt=pe();function Dt(e,t){E.call("mergePageInstance",Pt.get(t),e),Pt.set(t,e)}function kt(e){return Pt.get(e)}function Mt(e){Pt.delete(e)}function Bt(e){return null==e?"":"/"===e.charAt(0)?e:"/"+e}function Lt(e,t,...r){const n=Pt.get(e);if(null==n)return;const i=E.call("getLifecycle",n,t);if(S(i)){return i.map((e=>e.apply(n,r)))[0]}return w(i)?i.apply(n,r):void 0}function Nt(e){if(null==e)return"";const t=Object.keys(e).map((t=>t+"="+e[t])).join("&");return""===t?t:"?"+t}function Rt(e,t){const r=e.indexOf("?");return`${r>-1?e.substring(0,r):e}${Nt(t)}`}function Ft(e){return e+"."+re}function Ut(e){return e+"."+ne}function qt(e){return e+"."+ie}function $t(e,t,r,n){const i=null!=t?t:`taro_page_${jt()}`,[o,a,u,c,s,l,f]=E.call("getMiniLifecycleImpl").page;let d,p,h=null,v=!1,y=[];function m(e){const t=e.route||e.__route__||e.$taroPath;xt.router={params:e.$taroParams,path:Bt(t),$taroPath:e.$taroPath,onReady:Ft(i),onShow:Ut(i),onHide:qt(i)},b(e.exitState)||(xt.router.exitState=e.exitState)}const g={[o](t={},r){p=new Promise((e=>{d=e})),dt.start(D),xt.page=this,this.config=n||{};const o=Object.assign({},t,{$taroTimestamp:Date.now()}),a=this.$taroPath=Rt(i,o);null==this.$taroParams&&(this.$taroParams=o),m(this);const u=()=>{xt.app.mount(e,a,(()=>{h=Ee.document.getElementById(a),P(null!==h,"没有找到页面实例。"),Lt(a,te,this.$taroParams),d(),h.ctx=this,h.performUpdate(!0,r)}))};v?y.push(u):u()},[a](){const e=this.$taroPath;Lt(e,a),v=!0,xt.app.unmount(e,(()=>{v=!1,Pt.delete(e),h&&(h.ctx=null,h=null),y.length&&(y.forEach((e=>e())),y=[])}))},[u](){Lt(this.$taroPath,re),Ot((()=>Et.trigger(Ft(i)))),this.onReady.called=!0},[c](e={}){p.then((()=>{xt.page=this,m(this),Lt(this.$taroPath,ne,e),Ot((()=>Et.trigger(Ut(i))))}))},[s](){xt.page===this&&(xt.page=null,xt.router=null),Lt(this.$taroPath,ie),Et.trigger(qt(i))}};return l.forEach((e=>{g[e]=function(){return Lt(this.$taroPath,e,...arguments)}})),f.forEach((t=>{var r;(e[t]||(null===(r=e.prototype)||void 0===r?void 0:r[t])||e[t.replace(/^on/,"enable")])&&(g[t]=function(...e){var r;const n=null===(r=e[0])||void 0===r?void 0:r.target;if(null==n?void 0:n.id){const e=n.id,t=Ee.document.getElementById(e);t&&(n.dataset=t.dataset)}return Lt(this.$taroPath,t,...e)})})),g.eh=lt,b(r)||(g.data=r),E.call("modifyPageObject",g),g}function Vt(e,t,r){const n=null!=t?t:`taro_component_${jt()}`;let i=null;const[o,a]=E.call("getMiniLifecycleImpl").component,u={[o](){var t;dt.start(D);const r=Rt(n,{id:(null===(t=this.getPageId)||void 0===t?void 0:t.call(this))||jt()});xt.app.mount(e,r,(()=>{i=Ee.document.getElementById(r),P(null!==i,"没有找到组件实例。"),this.$taroInstances=Pt.get(r),Lt(r,te),i.ctx=this,i.performUpdate(!0)}))},[a](){const e=Rt(n,{id:this.getPageId()});xt.app.unmount(e,(()=>{Pt.delete(e),i&&(i.ctx=null)}))},methods:{eh:lt}};return b(r)||(u.data=r),[oe,ae,ue].forEach((t=>{var r;u[t]=null!==(r=e[t])&&void 0!==r?r:C})),u}function zt(e){const t=e===z,[r,n]=E.call("getMiniLifecycleImpl").component,i=t?{[r](){var e,t;const r=(null===(e=this.data.i)||void 0===e?void 0:e.sid)||(null===(t=this.props.i)||void 0===t?void 0:t.sid);y(r)&&me.set(r,this)},[n](){var e,t;const r=(null===(e=this.data.i)||void 0===e?void 0:e.sid)||(null===(t=this.props.i)||void 0===t?void 0:t.sid);y(r)&&me.delete(r)}}:C;return Object.assign({properties:{i:{type:Object,value:{nn:F}},l:{type:String,value:""}},options:{addGlobalClass:!0,virtualHost:!t},methods:{eh:lt}},i)}const Wt=(e,t)=>{const r=xt.router,n=()=>{setTimeout((function(){t?e.call(t):e()}),1)};if(null!==r){let i=null;const o=r.$taroPath;i=Ee.document.getElementById(o),(null==i?void 0:i.pendingUpdate)?i.enqueueUpdateCallback(e,t):n()}else n()}},398:(e,t,r)=>{const{hooks:n}=r(4067),i=r(7492).Z;n.isExist("initNativeApi")&&n.call("initNativeApi",i),e.exports=i,e.exports.default=e.exports},6085:e=>{"use strict";var t="%[a-f0-9]{2}",r=new RegExp("("+t+")|([^%]+?)","gi"),n=new RegExp("("+t+")+","gi");function i(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],i(r),i(n))}function o(e){try{return decodeURIComponent(e)}catch(o){for(var t=e.match(r)||[],n=1;n<t.length;n++)t=(e=i(t,n).join("")).match(r)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},r=n.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch(e){var i=o(r[0]);i!==r[0]&&(t[r[0]]=i)}r=n.exec(e)}t["%C2"]="�";for(var a=Object.keys(t),u=0;u<a.length;u++){var c=a[u];e=e.replace(new RegExp(c,"g"),t[c])}return e}(e)}}},560:e=>{"use strict";e.exports=function(e,t){for(var r={},n=Object.keys(e),i=Array.isArray(t),o=0;o<n.length;o++){var a=n[o],u=e[a];(i?-1!==t.indexOf(a):t(a,u,e))&&(r[a]=u)}return r}},7973:(e,t,r)=>{var n=r(1783),i=r(1012),o=r(9900),a=r(6691),u=r(2018);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=u,e.exports=c},2768:(e,t,r)=>{var n=r(9896),i=r(2473),o=r(4678),a=r(1240),u=r(4296);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=u,e.exports=c},1725:(e,t,r)=>{var n=r(6369)(r(5031),"Map");e.exports=n},736:(e,t,r)=>{var n=r(6660),i=r(8472),o=r(5637),a=r(9389),u=r(9804);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=u,e.exports=c},5869:(e,t,r)=>{var n=r(5031).Symbol;e.exports=n},2517:(e,t,r)=>{var n=r(3947);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},4365:(e,t,r)=>{var n=r(5869),i=r(7043),o=r(5283),a=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):o(e)}},9930:(e,t,r)=>{var n=r(3098),i=r(8754),o=r(2917),a=r(1304),u=/^\[object .+?Constructor\]$/,c=Function.prototype,s=Object.prototype,l=c.toString,f=s.hasOwnProperty,d=RegExp("^"+l.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(n(e)?d:u).test(a(e))}},3823:(e,t,r)=>{var n=r(5031)["__core-js_shared__"];e.exports=n},5274:e=>{var t="object"==typeof global&&global&&global.Object===Object&&global;e.exports=t},9623:(e,t,r)=>{var n=r(9005);e.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},6369:(e,t,r)=>{var n=r(9930),i=r(4502);e.exports=function(e,t){var r=i(e,t);return n(r)?r:void 0}},7043:(e,t,r)=>{var n=r(5869),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,u=n?n.toStringTag:void 0;e.exports=function(e){var t=o.call(e,u),r=e[u];try{e[u]=void 0;var n=!0}catch(e){}var i=a.call(e);return n&&(t?e[u]=r:delete e[u]),i}},4502:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},1783:(e,t,r)=>{var n=r(8163);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},1012:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},9900:(e,t,r)=>{var n=r(8163),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return i.call(t,e)?t[e]:void 0}},6691:(e,t,r)=>{var n=r(8163),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:i.call(t,e)}},2018:(e,t,r)=>{var n=r(8163);e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},9005:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},8754:(e,t,r)=>{var n,i=r(3823),o=(n=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!o&&o in e}},9896:e=>{e.exports=function(){this.__data__=[],this.size=0}},2473:(e,t,r)=>{var n=r(2517),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0)&&(r==t.length-1?t.pop():i.call(t,r,1),--this.size,!0)}},4678:(e,t,r)=>{var n=r(2517);e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},1240:(e,t,r)=>{var n=r(2517);e.exports=function(e){return n(this.__data__,e)>-1}},4296:(e,t,r)=>{var n=r(2517);e.exports=function(e,t){var r=this.__data__,i=n(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}},6660:(e,t,r)=>{var n=r(7973),i=r(2768),o=r(1725);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(o||i),string:new n}}},8472:(e,t,r)=>{var n=r(9623);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},5637:(e,t,r)=>{var n=r(9623);e.exports=function(e){return n(this,e).get(e)}},9389:(e,t,r)=>{var n=r(9623);e.exports=function(e){return n(this,e).has(e)}},9804:(e,t,r)=>{var n=r(9623);e.exports=function(e,t){var r=n(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}},8163:(e,t,r)=>{var n=r(6369)(Object,"create");e.exports=n},5283:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5031:(e,t,r)=>{var n=r(5274),i="object"==typeof self&&self&&self.Object===Object&&self,o=n||i||Function("return this")();e.exports=o},1304:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},3947:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},3098:(e,t,r)=>{var n=r(4365),i=r(2917);e.exports=function(e){if(!i(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},2917:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},6983:(e,t,r)=>{var n=r(736);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=e.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(i.Cache||n),r}i.Cache=n,e.exports=i},1125:function(e,t,r){var n,i;!function(o,a){"use strict";n=function(){var e=function(){},t="undefined",r=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"];function i(e,t){var r=e[t];if("function"==typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(t){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function o(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(n){return"debug"===n&&(n="log"),typeof console!==t&&("trace"===n&&r?o:void 0!==console[n]?i(console,n):void 0!==console.log?i(console,"log"):e)}function u(t,r){for(var i=0;i<n.length;i++){var o=n[i];this[o]=i<t?e:this.methodFactory(o,t,r)}this.log=this.debug}function c(e,r,n){return function(){typeof console!==t&&(u.call(this,r,n),this[e].apply(this,arguments))}}function s(e,t,r){return a(e)||c.apply(this,arguments)}function l(e,r,i){var o,a=this;r=null==r?"WARN":r;var c="loglevel";function l(e){var r=(n[e]||"silent").toUpperCase();if(typeof window!==t&&c){try{return void(window.localStorage[c]=r)}catch(e){}try{window.document.cookie=encodeURIComponent(c)+"="+r+";"}catch(e){}}}function f(){var e;if(typeof window!==t&&c){try{e=window.localStorage[c]}catch(e){}if(typeof e===t)try{var r=window.document.cookie,n=r.indexOf(encodeURIComponent(c)+"=");-1!==n&&(e=/^([^;]+)/.exec(r.slice(n))[1])}catch(e){}return void 0===a.levels[e]&&(e=void 0),e}}function d(){if(typeof window!==t&&c){try{return void window.localStorage.removeItem(c)}catch(e){}try{window.document.cookie=encodeURIComponent(c)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}"string"==typeof e?c+=":"+e:"symbol"==typeof e&&(c=void 0),a.name=e,a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=i||s,a.getLevel=function(){return o},a.setLevel=function(r,n){if("string"==typeof r&&void 0!==a.levels[r.toUpperCase()]&&(r=a.levels[r.toUpperCase()]),!("number"==typeof r&&r>=0&&r<=a.levels.SILENT))throw"log.setLevel() called with invalid level: "+r;if(o=r,!1!==n&&l(r),u.call(a,r,e),typeof console===t&&r<a.levels.SILENT)return"No console available for logging"},a.setDefaultLevel=function(e){r=e,f()||a.setLevel(e,!1)},a.resetLevel=function(){a.setLevel(r,!1),d()},a.enableAll=function(e){a.setLevel(a.levels.TRACE,e)},a.disableAll=function(e){a.setLevel(a.levels.SILENT,e)};var p=f();null==p&&(p=r),a.setLevel(p,!1)}var f=new l,d={};f.getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=d[e];return t||(t=d[e]=new l(e,f.getLevel(),f.methodFactory)),t};var p=typeof window!==t?window.log:void 0;return f.noConflict=function(){return typeof window!==t&&window.log===f&&(window.log=p),f},f.getLoggers=function(){return d},f.default=f,f},void 0===(i="function"==typeof n?n.call(t,r,t,e):n)||(e.exports=i)}()},4803:(e,t,r)=>{"use strict";const n=r(6570),i=r(6085),o=r(602),a=r(560),u=Symbol("encodeFragmentIdentifier");function c(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function s(e,t){return t.encode?t.strict?n(e):encodeURIComponent(e):e}function l(e,t){return t.decode?i(e):e}function f(e){return Array.isArray(e)?e.sort():"object"==typeof e?f(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function d(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function p(e){const t=(e=d(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function h(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function v(e,t){c((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const r=function(e){let t;switch(e.arrayFormat){case"index":return(e,r,n)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=r):n[e]=r};case"bracket":return(e,r,n)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==n[e]?n[e]=[].concat(n[e],r):n[e]=[r]:n[e]=r};case"colon-list-separator":return(e,r,n)=>{t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),t?void 0!==n[e]?n[e]=[].concat(n[e],r):n[e]=[r]:n[e]=r};case"comma":case"separator":return(t,r,n)=>{const i="string"==typeof r&&r.includes(e.arrayFormatSeparator),o="string"==typeof r&&!i&&l(r,e).includes(e.arrayFormatSeparator);r=o?l(r,e):r;const a=i||o?r.split(e.arrayFormatSeparator).map((t=>l(t,e))):null===r?r:l(r,e);n[t]=a};case"bracket-separator":return(t,r,n)=>{const i=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!i)return void(n[t]=r?l(r,e):r);const o=null===r?[]:r.split(e.arrayFormatSeparator).map((t=>l(t,e)));void 0!==n[t]?n[t]=[].concat(n[t],o):n[t]=o};default:return(e,t,r)=>{void 0!==r[e]?r[e]=[].concat(r[e],t):r[e]=t}}}(t),n=Object.create(null);if("string"!=typeof e)return n;if(!(e=e.trim().replace(/^[?#&]/,"")))return n;for(const i of e.split("&")){if(""===i)continue;let[e,a]=o(t.decode?i.replace(/\+/g," "):i,"=");a=void 0===a?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?a:l(a,t),r(l(e,t),a,n)}for(const e of Object.keys(n)){const r=n[e];if("object"==typeof r&&null!==r)for(const e of Object.keys(r))r[e]=h(r[e],t);else n[e]=h(r,t)}return!1===t.sort?n:(!0===t.sort?Object.keys(n).sort():Object.keys(n).sort(t.sort)).reduce(((e,t)=>{const r=n[t];return Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?e[t]=f(r):e[t]=r,e}),Object.create(null))}t.extract=p,t.parse=v,t.stringify=(e,t)=>{if(!e)return"";c((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const r=r=>t.skipNull&&null==e[r]||t.skipEmptyString&&""===e[r],n=function(e){switch(e.arrayFormat){case"index":return t=>(r,n)=>{const i=r.length;return void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,[s(t,e),"[",i,"]"].join("")]:[...r,[s(t,e),"[",s(i,e),"]=",s(n,e)].join("")]};case"bracket":return t=>(r,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,[s(t,e),"[]"].join("")]:[...r,[s(t,e),"[]=",s(n,e)].join("")];case"colon-list-separator":return t=>(r,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,[s(t,e),":list="].join("")]:[...r,[s(t,e),":list=",s(n,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t="bracket-separator"===e.arrayFormat?"[]=":"=";return r=>(n,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?n:(i=null===i?"":i,0===n.length?[[s(r,e),t,s(i,e)].join("")]:[[n,s(i,e)].join(e.arrayFormatSeparator)])}default:return t=>(r,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,s(t,e)]:[...r,[s(t,e),"=",s(n,e)].join("")]}}(t),i={};for(const t of Object.keys(e))r(t)||(i[t]=e[t]);const o=Object.keys(i);return!1!==t.sort&&o.sort(t.sort),o.map((r=>{const i=e[r];return void 0===i?"":null===i?s(r,t):Array.isArray(i)?0===i.length&&"bracket-separator"===t.arrayFormat?s(r,t)+"[]":i.reduce(n(r),[]).join("&"):s(r,t)+"="+s(i,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[r,n]=o(e,"#");return Object.assign({url:r.split("?")[0]||"",query:v(p(e),t)},t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:l(n,t)}:{})},t.stringifyUrl=(e,r)=>{r=Object.assign({encode:!0,strict:!0,[u]:!0},r);const n=d(e.url).split("?")[0]||"",i=t.extract(e.url),o=t.parse(i,{sort:!1}),a=Object.assign(o,e.query);let c=t.stringify(a,r);c&&(c=`?${c}`);let l=function(e){let t="";const r=e.indexOf("#");return-1!==r&&(t=e.slice(r)),t}(e.url);return e.fragmentIdentifier&&(l=`#${r[u]?s(e.fragmentIdentifier,r):e.fragmentIdentifier}`),`${n}${c}${l}`},t.pick=(e,r,n)=>{n=Object.assign({parseFragmentIdentifier:!0,[u]:!1},n);const{url:i,query:o,fragmentIdentifier:c}=t.parseUrl(e,n);return t.stringifyUrl({url:i,query:a(o,r),fragmentIdentifier:c},n)},t.exclude=(e,r,n)=>{const i=Array.isArray(r)?e=>!r.includes(e):(e,t)=>!r(e,t);return t.pick(e,i,n)}},6570:e=>{"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},3405:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.interval=t.iif=t.generate=t.fromEventPattern=t.fromEvent=t.from=t.forkJoin=t.empty=t.defer=t.connectable=t.concat=t.combineLatest=t.bindNodeCallback=t.bindCallback=t.UnsubscriptionError=t.TimeoutError=t.SequenceError=t.ObjectUnsubscribedError=t.NotFoundError=t.EmptyError=t.ArgumentOutOfRangeError=t.firstValueFrom=t.lastValueFrom=t.isObservable=t.identity=t.noop=t.pipe=t.NotificationKind=t.Notification=t.Subscriber=t.Subscription=t.Scheduler=t.VirtualAction=t.VirtualTimeScheduler=t.animationFrameScheduler=t.animationFrame=t.queueScheduler=t.queue=t.asyncScheduler=t.async=t.asapScheduler=t.asap=t.AsyncSubject=t.ReplaySubject=t.BehaviorSubject=t.Subject=t.animationFrames=t.observable=t.ConnectableObservable=t.Observable=void 0,t.filter=t.expand=t.exhaustMap=t.exhaustAll=t.exhaust=t.every=t.endWith=t.elementAt=t.distinctUntilKeyChanged=t.distinctUntilChanged=t.distinct=t.dematerialize=t.delayWhen=t.delay=t.defaultIfEmpty=t.debounceTime=t.debounce=t.count=t.connect=t.concatWith=t.concatMapTo=t.concatMap=t.concatAll=t.combineLatestWith=t.combineLatestAll=t.combineAll=t.catchError=t.bufferWhen=t.bufferToggle=t.bufferTime=t.bufferCount=t.buffer=t.auditTime=t.audit=t.config=t.NEVER=t.EMPTY=t.scheduled=t.zip=t.using=t.timer=t.throwError=t.range=t.race=t.partition=t.pairs=t.onErrorResumeNext=t.of=t.never=t.merge=void 0,t.switchMap=t.switchAll=t.subscribeOn=t.startWith=t.skipWhile=t.skipUntil=t.skipLast=t.skip=t.single=t.shareReplay=t.share=t.sequenceEqual=t.scan=t.sampleTime=t.sample=t.refCount=t.retryWhen=t.retry=t.repeatWhen=t.repeat=t.reduce=t.raceWith=t.publishReplay=t.publishLast=t.publishBehavior=t.publish=t.pluck=t.pairwise=t.onErrorResumeNextWith=t.observeOn=t.multicast=t.min=t.mergeWith=t.mergeScan=t.mergeMapTo=t.mergeMap=t.flatMap=t.mergeAll=t.max=t.materialize=t.mapTo=t.map=t.last=t.isEmpty=t.ignoreElements=t.groupBy=t.first=t.findIndex=t.find=t.finalize=void 0,t.zipWith=t.zipAll=t.withLatestFrom=t.windowWhen=t.windowToggle=t.windowTime=t.windowCount=t.window=t.toArray=t.timestamp=t.timeoutWith=t.timeout=t.timeInterval=t.throwIfEmpty=t.throttleTime=t.throttle=t.tap=t.takeWhile=t.takeUntil=t.takeLast=t.take=t.switchScan=t.switchMapTo=void 0;var o=r(6122);Object.defineProperty(t,"Observable",{enumerable:!0,get:function(){return o.Observable}});var a=r(1479);Object.defineProperty(t,"ConnectableObservable",{enumerable:!0,get:function(){return a.ConnectableObservable}});var u=r(4847);Object.defineProperty(t,"observable",{enumerable:!0,get:function(){return u.observable}});var c=r(1415);Object.defineProperty(t,"animationFrames",{enumerable:!0,get:function(){return c.animationFrames}});var s=r(5558);Object.defineProperty(t,"Subject",{enumerable:!0,get:function(){return s.Subject}});var l=r(9949);Object.defineProperty(t,"BehaviorSubject",{enumerable:!0,get:function(){return l.BehaviorSubject}});var f=r(378);Object.defineProperty(t,"ReplaySubject",{enumerable:!0,get:function(){return f.ReplaySubject}});var d=r(4199);Object.defineProperty(t,"AsyncSubject",{enumerable:!0,get:function(){return d.AsyncSubject}});var p=r(2760);Object.defineProperty(t,"asap",{enumerable:!0,get:function(){return p.asap}}),Object.defineProperty(t,"asapScheduler",{enumerable:!0,get:function(){return p.asapScheduler}});var h=r(8764);Object.defineProperty(t,"async",{enumerable:!0,get:function(){return h.async}}),Object.defineProperty(t,"asyncScheduler",{enumerable:!0,get:function(){return h.asyncScheduler}});var v=r(1582);Object.defineProperty(t,"queue",{enumerable:!0,get:function(){return v.queue}}),Object.defineProperty(t,"queueScheduler",{enumerable:!0,get:function(){return v.queueScheduler}});var y=r(7261);Object.defineProperty(t,"animationFrame",{enumerable:!0,get:function(){return y.animationFrame}}),Object.defineProperty(t,"animationFrameScheduler",{enumerable:!0,get:function(){return y.animationFrameScheduler}});var b=r(9880);Object.defineProperty(t,"VirtualTimeScheduler",{enumerable:!0,get:function(){return b.VirtualTimeScheduler}}),Object.defineProperty(t,"VirtualAction",{enumerable:!0,get:function(){return b.VirtualAction}});var m=r(3597);Object.defineProperty(t,"Scheduler",{enumerable:!0,get:function(){return m.Scheduler}});var g=r(6775);Object.defineProperty(t,"Subscription",{enumerable:!0,get:function(){return g.Subscription}});var w=r(1873);Object.defineProperty(t,"Subscriber",{enumerable:!0,get:function(){return w.Subscriber}});var S=r(2244);Object.defineProperty(t,"Notification",{enumerable:!0,get:function(){return S.Notification}}),Object.defineProperty(t,"NotificationKind",{enumerable:!0,get:function(){return S.NotificationKind}});var _=r(9433);Object.defineProperty(t,"pipe",{enumerable:!0,get:function(){return _.pipe}});var O=r(7310);Object.defineProperty(t,"noop",{enumerable:!0,get:function(){return O.noop}});var I=r(3555);Object.defineProperty(t,"identity",{enumerable:!0,get:function(){return I.identity}});var E=r(5708);Object.defineProperty(t,"isObservable",{enumerable:!0,get:function(){return E.isObservable}});var C=r(5722);Object.defineProperty(t,"lastValueFrom",{enumerable:!0,get:function(){return C.lastValueFrom}});var A=r(1157);Object.defineProperty(t,"firstValueFrom",{enumerable:!0,get:function(){return A.firstValueFrom}});var x=r(1386);Object.defineProperty(t,"ArgumentOutOfRangeError",{enumerable:!0,get:function(){return x.ArgumentOutOfRangeError}});var T=r(9137);Object.defineProperty(t,"EmptyError",{enumerable:!0,get:function(){return T.EmptyError}});var P=r(4890);Object.defineProperty(t,"NotFoundError",{enumerable:!0,get:function(){return P.NotFoundError}});var j=r(3339);Object.defineProperty(t,"ObjectUnsubscribedError",{enumerable:!0,get:function(){return j.ObjectUnsubscribedError}});var D=r(3848);Object.defineProperty(t,"SequenceError",{enumerable:!0,get:function(){return D.SequenceError}});var k=r(1763);Object.defineProperty(t,"TimeoutError",{enumerable:!0,get:function(){return k.TimeoutError}});var M=r(4376);Object.defineProperty(t,"UnsubscriptionError",{enumerable:!0,get:function(){return M.UnsubscriptionError}});var B=r(1066);Object.defineProperty(t,"bindCallback",{enumerable:!0,get:function(){return B.bindCallback}});var L=r(6367);Object.defineProperty(t,"bindNodeCallback",{enumerable:!0,get:function(){return L.bindNodeCallback}});var N=r(2886);Object.defineProperty(t,"combineLatest",{enumerable:!0,get:function(){return N.combineLatest}});var R=r(3251);Object.defineProperty(t,"concat",{enumerable:!0,get:function(){return R.concat}});var F=r(8432);Object.defineProperty(t,"connectable",{enumerable:!0,get:function(){return F.connectable}});var U=r(3835);Object.defineProperty(t,"defer",{enumerable:!0,get:function(){return U.defer}});var q=r(4025);Object.defineProperty(t,"empty",{enumerable:!0,get:function(){return q.empty}});var $=r(533);Object.defineProperty(t,"forkJoin",{enumerable:!0,get:function(){return $.forkJoin}});var V=r(9752);Object.defineProperty(t,"from",{enumerable:!0,get:function(){return V.from}});var z=r(577);Object.defineProperty(t,"fromEvent",{enumerable:!0,get:function(){return z.fromEvent}});var W=r(888);Object.defineProperty(t,"fromEventPattern",{enumerable:!0,get:function(){return W.fromEventPattern}});var G=r(9533);Object.defineProperty(t,"generate",{enumerable:!0,get:function(){return G.generate}});var H=r(7991);Object.defineProperty(t,"iif",{enumerable:!0,get:function(){return H.iif}});var J=r(8160);Object.defineProperty(t,"interval",{enumerable:!0,get:function(){return J.interval}});var Y=r(9969);Object.defineProperty(t,"merge",{enumerable:!0,get:function(){return Y.merge}});var K=r(1250);Object.defineProperty(t,"never",{enumerable:!0,get:function(){return K.never}});var Z=r(2743);Object.defineProperty(t,"of",{enumerable:!0,get:function(){return Z.of}});var Q=r(4315);Object.defineProperty(t,"onErrorResumeNext",{enumerable:!0,get:function(){return Q.onErrorResumeNext}});var X=r(4e3);Object.defineProperty(t,"pairs",{enumerable:!0,get:function(){return X.pairs}});var ee=r(8746);Object.defineProperty(t,"partition",{enumerable:!0,get:function(){return ee.partition}});var te=r(3903);Object.defineProperty(t,"race",{enumerable:!0,get:function(){return te.race}});var re=r(2040);Object.defineProperty(t,"range",{enumerable:!0,get:function(){return re.range}});var ne=r(2236);Object.defineProperty(t,"throwError",{enumerable:!0,get:function(){return ne.throwError}});var ie=r(5635);Object.defineProperty(t,"timer",{enumerable:!0,get:function(){return ie.timer}});var oe=r(1405);Object.defineProperty(t,"using",{enumerable:!0,get:function(){return oe.using}});var ae=r(9852);Object.defineProperty(t,"zip",{enumerable:!0,get:function(){return ae.zip}});var ue=r(9931);Object.defineProperty(t,"scheduled",{enumerable:!0,get:function(){return ue.scheduled}});var ce=r(4025);Object.defineProperty(t,"EMPTY",{enumerable:!0,get:function(){return ce.EMPTY}});var se=r(1250);Object.defineProperty(t,"NEVER",{enumerable:!0,get:function(){return se.NEVER}}),i(r(8669),t);var le=r(4560);Object.defineProperty(t,"config",{enumerable:!0,get:function(){return le.config}});var fe=r(6305);Object.defineProperty(t,"audit",{enumerable:!0,get:function(){return fe.audit}});var de=r(2571);Object.defineProperty(t,"auditTime",{enumerable:!0,get:function(){return de.auditTime}});var pe=r(7863);Object.defineProperty(t,"buffer",{enumerable:!0,get:function(){return pe.buffer}});var he=r(6605);Object.defineProperty(t,"bufferCount",{enumerable:!0,get:function(){return he.bufferCount}});var ve=r(9355);Object.defineProperty(t,"bufferTime",{enumerable:!0,get:function(){return ve.bufferTime}});var ye=r(2909);Object.defineProperty(t,"bufferToggle",{enumerable:!0,get:function(){return ye.bufferToggle}});var be=r(792);Object.defineProperty(t,"bufferWhen",{enumerable:!0,get:function(){return be.bufferWhen}});var me=r(3371);Object.defineProperty(t,"catchError",{enumerable:!0,get:function(){return me.catchError}});var ge=r(9633);Object.defineProperty(t,"combineAll",{enumerable:!0,get:function(){return ge.combineAll}});var we=r(5706);Object.defineProperty(t,"combineLatestAll",{enumerable:!0,get:function(){return we.combineLatestAll}});var Se=r(4094);Object.defineProperty(t,"combineLatestWith",{enumerable:!0,get:function(){return Se.combineLatestWith}});var _e=r(6525);Object.defineProperty(t,"concatAll",{enumerable:!0,get:function(){return _e.concatAll}});var Oe=r(7307);Object.defineProperty(t,"concatMap",{enumerable:!0,get:function(){return Oe.concatMap}});var Ie=r(7724);Object.defineProperty(t,"concatMapTo",{enumerable:!0,get:function(){return Ie.concatMapTo}});var Ee=r(6142);Object.defineProperty(t,"concatWith",{enumerable:!0,get:function(){return Ee.concatWith}});var Ce=r(7932);Object.defineProperty(t,"connect",{enumerable:!0,get:function(){return Ce.connect}});var Ae=r(5997);Object.defineProperty(t,"count",{enumerable:!0,get:function(){return Ae.count}});var xe=r(6621);Object.defineProperty(t,"debounce",{enumerable:!0,get:function(){return xe.debounce}});var Te=r(8819);Object.defineProperty(t,"debounceTime",{enumerable:!0,get:function(){return Te.debounceTime}});var Pe=r(2652);Object.defineProperty(t,"defaultIfEmpty",{enumerable:!0,get:function(){return Pe.defaultIfEmpty}});var je=r(9225);Object.defineProperty(t,"delay",{enumerable:!0,get:function(){return je.delay}});var De=r(7285);Object.defineProperty(t,"delayWhen",{enumerable:!0,get:function(){return De.delayWhen}});var ke=r(4862);Object.defineProperty(t,"dematerialize",{enumerable:!0,get:function(){return ke.dematerialize}});var Me=r(6463);Object.defineProperty(t,"distinct",{enumerable:!0,get:function(){return Me.distinct}});var Be=r(8203);Object.defineProperty(t,"distinctUntilChanged",{enumerable:!0,get:function(){return Be.distinctUntilChanged}});var Le=r(4467);Object.defineProperty(t,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return Le.distinctUntilKeyChanged}});var Ne=r(1176);Object.defineProperty(t,"elementAt",{enumerable:!0,get:function(){return Ne.elementAt}});var Re=r(6754);Object.defineProperty(t,"endWith",{enumerable:!0,get:function(){return Re.endWith}});var Fe=r(4726);Object.defineProperty(t,"every",{enumerable:!0,get:function(){return Fe.every}});var Ue=r(85);Object.defineProperty(t,"exhaust",{enumerable:!0,get:function(){return Ue.exhaust}});var qe=r(7753);Object.defineProperty(t,"exhaustAll",{enumerable:!0,get:function(){return qe.exhaustAll}});var $e=r(5489);Object.defineProperty(t,"exhaustMap",{enumerable:!0,get:function(){return $e.exhaustMap}});var Ve=r(3360);Object.defineProperty(t,"expand",{enumerable:!0,get:function(){return Ve.expand}});var ze=r(1912);Object.defineProperty(t,"filter",{enumerable:!0,get:function(){return ze.filter}});var We=r(8475);Object.defineProperty(t,"finalize",{enumerable:!0,get:function(){return We.finalize}});var Ge=r(7276);Object.defineProperty(t,"find",{enumerable:!0,get:function(){return Ge.find}});var He=r(4459);Object.defineProperty(t,"findIndex",{enumerable:!0,get:function(){return He.findIndex}});var Je=r(2262);Object.defineProperty(t,"first",{enumerable:!0,get:function(){return Je.first}});var Ye=r(8741);Object.defineProperty(t,"groupBy",{enumerable:!0,get:function(){return Ye.groupBy}});var Ke=r(586);Object.defineProperty(t,"ignoreElements",{enumerable:!0,get:function(){return Ke.ignoreElements}});var Ze=r(9238);Object.defineProperty(t,"isEmpty",{enumerable:!0,get:function(){return Ze.isEmpty}});var Qe=r(3782);Object.defineProperty(t,"last",{enumerable:!0,get:function(){return Qe.last}});var Xe=r(3559);Object.defineProperty(t,"map",{enumerable:!0,get:function(){return Xe.map}});var et=r(5691);Object.defineProperty(t,"mapTo",{enumerable:!0,get:function(){return et.mapTo}});var tt=r(5540);Object.defineProperty(t,"materialize",{enumerable:!0,get:function(){return tt.materialize}});var rt=r(9556);Object.defineProperty(t,"max",{enumerable:!0,get:function(){return rt.max}});var nt=r(7610);Object.defineProperty(t,"mergeAll",{enumerable:!0,get:function(){return nt.mergeAll}});var it=r(3536);Object.defineProperty(t,"flatMap",{enumerable:!0,get:function(){return it.flatMap}});var ot=r(439);Object.defineProperty(t,"mergeMap",{enumerable:!0,get:function(){return ot.mergeMap}});var at=r(8614);Object.defineProperty(t,"mergeMapTo",{enumerable:!0,get:function(){return at.mergeMapTo}});var ut=r(5974);Object.defineProperty(t,"mergeScan",{enumerable:!0,get:function(){return ut.mergeScan}});var ct=r(1535);Object.defineProperty(t,"mergeWith",{enumerable:!0,get:function(){return ct.mergeWith}});var st=r(4603);Object.defineProperty(t,"min",{enumerable:!0,get:function(){return st.min}});var lt=r(1662);Object.defineProperty(t,"multicast",{enumerable:!0,get:function(){return lt.multicast}});var ft=r(2027);Object.defineProperty(t,"observeOn",{enumerable:!0,get:function(){return ft.observeOn}});var dt=r(8042);Object.defineProperty(t,"onErrorResumeNextWith",{enumerable:!0,get:function(){return dt.onErrorResumeNextWith}});var pt=r(5551);Object.defineProperty(t,"pairwise",{enumerable:!0,get:function(){return pt.pairwise}});var ht=r(8580);Object.defineProperty(t,"pluck",{enumerable:!0,get:function(){return ht.pluck}});var vt=r(3278);Object.defineProperty(t,"publish",{enumerable:!0,get:function(){return vt.publish}});var yt=r(374);Object.defineProperty(t,"publishBehavior",{enumerable:!0,get:function(){return yt.publishBehavior}});var bt=r(9686);Object.defineProperty(t,"publishLast",{enumerable:!0,get:function(){return bt.publishLast}});var mt=r(9659);Object.defineProperty(t,"publishReplay",{enumerable:!0,get:function(){return mt.publishReplay}});var gt=r(4223);Object.defineProperty(t,"raceWith",{enumerable:!0,get:function(){return gt.raceWith}});var wt=r(985);Object.defineProperty(t,"reduce",{enumerable:!0,get:function(){return wt.reduce}});var St=r(2717);Object.defineProperty(t,"repeat",{enumerable:!0,get:function(){return St.repeat}});var _t=r(6182);Object.defineProperty(t,"repeatWhen",{enumerable:!0,get:function(){return _t.repeatWhen}});var Ot=r(1823);Object.defineProperty(t,"retry",{enumerable:!0,get:function(){return Ot.retry}});var It=r(1026);Object.defineProperty(t,"retryWhen",{enumerable:!0,get:function(){return It.retryWhen}});var Et=r(4256);Object.defineProperty(t,"refCount",{enumerable:!0,get:function(){return Et.refCount}});var Ct=r(741);Object.defineProperty(t,"sample",{enumerable:!0,get:function(){return Ct.sample}});var At=r(844);Object.defineProperty(t,"sampleTime",{enumerable:!0,get:function(){return At.sampleTime}});var xt=r(4125);Object.defineProperty(t,"scan",{enumerable:!0,get:function(){return xt.scan}});var Tt=r(5963);Object.defineProperty(t,"sequenceEqual",{enumerable:!0,get:function(){return Tt.sequenceEqual}});var Pt=r(5542);Object.defineProperty(t,"share",{enumerable:!0,get:function(){return Pt.share}});var jt=r(8061);Object.defineProperty(t,"shareReplay",{enumerable:!0,get:function(){return jt.shareReplay}});var Dt=r(7613);Object.defineProperty(t,"single",{enumerable:!0,get:function(){return Dt.single}});var kt=r(1789);Object.defineProperty(t,"skip",{enumerable:!0,get:function(){return kt.skip}});var Mt=r(9796);Object.defineProperty(t,"skipLast",{enumerable:!0,get:function(){return Mt.skipLast}});var Bt=r(16);Object.defineProperty(t,"skipUntil",{enumerable:!0,get:function(){return Bt.skipUntil}});var Lt=r(614);Object.defineProperty(t,"skipWhile",{enumerable:!0,get:function(){return Lt.skipWhile}});var Nt=r(846);Object.defineProperty(t,"startWith",{enumerable:!0,get:function(){return Nt.startWith}});var Rt=r(3344);Object.defineProperty(t,"subscribeOn",{enumerable:!0,get:function(){return Rt.subscribeOn}});var Ft=r(7286);Object.defineProperty(t,"switchAll",{enumerable:!0,get:function(){return Ft.switchAll}});var Ut=r(7184);Object.defineProperty(t,"switchMap",{enumerable:!0,get:function(){return Ut.switchMap}});var qt=r(3198);Object.defineProperty(t,"switchMapTo",{enumerable:!0,get:function(){return qt.switchMapTo}});var $t=r(7485);Object.defineProperty(t,"switchScan",{enumerable:!0,get:function(){return $t.switchScan}});var Vt=r(2642);Object.defineProperty(t,"take",{enumerable:!0,get:function(){return Vt.take}});var zt=r(2337);Object.defineProperty(t,"takeLast",{enumerable:!0,get:function(){return zt.takeLast}});var Wt=r(2247);Object.defineProperty(t,"takeUntil",{enumerable:!0,get:function(){return Wt.takeUntil}});var Gt=r(1339);Object.defineProperty(t,"takeWhile",{enumerable:!0,get:function(){return Gt.takeWhile}});var Ht=r(1119);Object.defineProperty(t,"tap",{enumerable:!0,get:function(){return Ht.tap}});var Jt=r(5652);Object.defineProperty(t,"throttle",{enumerable:!0,get:function(){return Jt.throttle}});var Yt=r(5355);Object.defineProperty(t,"throttleTime",{enumerable:!0,get:function(){return Yt.throttleTime}});var Kt=r(596);Object.defineProperty(t,"throwIfEmpty",{enumerable:!0,get:function(){return Kt.throwIfEmpty}});var Zt=r(671);Object.defineProperty(t,"timeInterval",{enumerable:!0,get:function(){return Zt.timeInterval}});var Qt=r(1763);Object.defineProperty(t,"timeout",{enumerable:!0,get:function(){return Qt.timeout}});var Xt=r(1467);Object.defineProperty(t,"timeoutWith",{enumerable:!0,get:function(){return Xt.timeoutWith}});var er=r(2574);Object.defineProperty(t,"timestamp",{enumerable:!0,get:function(){return er.timestamp}});var tr=r(6531);Object.defineProperty(t,"toArray",{enumerable:!0,get:function(){return tr.toArray}});var rr=r(2949);Object.defineProperty(t,"window",{enumerable:!0,get:function(){return rr.window}});var nr=r(4809);Object.defineProperty(t,"windowCount",{enumerable:!0,get:function(){return nr.windowCount}});var ir=r(3195);Object.defineProperty(t,"windowTime",{enumerable:!0,get:function(){return ir.windowTime}});var or=r(9934);Object.defineProperty(t,"windowToggle",{enumerable:!0,get:function(){return or.windowToggle}});var ar=r(2962);Object.defineProperty(t,"windowWhen",{enumerable:!0,get:function(){return ar.windowWhen}});var ur=r(2567);Object.defineProperty(t,"withLatestFrom",{enumerable:!0,get:function(){return ur.withLatestFrom}});var cr=r(4387);Object.defineProperty(t,"zipAll",{enumerable:!0,get:function(){return cr.zipAll}});var sr=r(8738);Object.defineProperty(t,"zipWith",{enumerable:!0,get:function(){return sr.zipWith}})},4199:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncSubject=void 0;var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._value=null,t._hasValue=!1,t._isComplete=!1,t}return i(t,e),t.prototype._checkFinalizedStatuses=function(e){var t=this,r=t.hasError,n=t._hasValue,i=t._value,o=t.thrownError,a=t.isStopped,u=t._isComplete;r?e.error(o):(a||u)&&(n&&e.next(i),e.complete())},t.prototype.next=function(e){this.isStopped||(this._value=e,this._hasValue=!0)},t.prototype.complete=function(){var t=this,r=t._hasValue,n=t._value;t._isComplete||(this._isComplete=!0,r&&e.prototype.next.call(this,n),e.prototype.complete.call(this))},t}(r(5558).Subject);t.AsyncSubject=o},9949:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.BehaviorSubject=void 0;var o=function(e){function t(t){var r=e.call(this)||this;return r._value=t,r}return i(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var r=e.prototype._subscribe.call(this,t);return!r.closed&&t.next(this._value),r},t.prototype.getValue=function(){var e=this,t=e.hasError,r=e.thrownError,n=e._value;if(t)throw r;return this._throwIfClosed(),n},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(r(5558).Subject);t.BehaviorSubject=o},2244:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observeNotification=t.Notification=t.NotificationKind=void 0;var n=r(4025),i=r(2743),o=r(2236),a=r(4523);!function(e){e.NEXT="N",e.ERROR="E",e.COMPLETE="C"}(t.NotificationKind||(t.NotificationKind={}));var u=function(){function e(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}return e.prototype.observe=function(e){return c(this,e)},e.prototype.do=function(e,t,r){var n=this,i=n.kind,o=n.value,a=n.error;return"N"===i?null==e?void 0:e(o):"E"===i?null==t?void 0:t(a):null==r?void 0:r()},e.prototype.accept=function(e,t,r){var n;return a.isFunction(null===(n=e)||void 0===n?void 0:n.next)?this.observe(e):this.do(e,t,r)},e.prototype.toObservable=function(){var e=this,t=e.kind,r=e.value,a=e.error,u="N"===t?i.of(r):"E"===t?o.throwError((function(){return a})):"C"===t?n.EMPTY:0;if(!u)throw new TypeError("Unexpected notification kind "+t);return u},e.createNext=function(t){return new e("N",t)},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e}();function c(e,t){var r,n,i,o=e,a=o.kind,u=o.value,c=o.error;if("string"!=typeof a)throw new TypeError('Invalid notification, missing "kind"');"N"===a?null===(r=t.next)||void 0===r||r.call(t,u):"E"===a?null===(n=t.error)||void 0===n||n.call(t,c):null===(i=t.complete)||void 0===i||i.call(t)}t.Notification=u,t.observeNotification=c},6773:(e,t)=>{"use strict";function r(e,t,r){return{kind:e,value:t,error:r}}Object.defineProperty(t,"__esModule",{value:!0}),t.createNotification=t.nextNotification=t.errorNotification=t.COMPLETE_NOTIFICATION=void 0,t.COMPLETE_NOTIFICATION=r("C",void 0,void 0),t.errorNotification=function(e){return r("E",void 0,e)},t.nextNotification=function(e){return r("N",e,void 0)},t.createNotification=r},6122:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Observable=void 0;var n=r(1873),i=r(6775),o=r(4847),a=r(9433),u=r(4560),c=r(4523),s=r(89),l=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var o,a=this,u=(o=e)&&o instanceof n.Subscriber||function(e){return e&&c.isFunction(e.next)&&c.isFunction(e.error)&&c.isFunction(e.complete)}(o)&&i.isSubscription(o)?e:new n.SafeSubscriber(e,t,r);return s.errorContext((function(){var e=a,t=e.operator,r=e.source;u.add(t?t.call(u,r):r?a._subscribe(u):a._trySubscribe(u))})),u},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=f(t))((function(t,i){var o=new n.SafeSubscriber({next:function(t){try{e(t)}catch(e){i(e),o.unsubscribe()}},error:i,complete:t});r.subscribe(o)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[o.observable]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.pipeFromArray(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=f(e))((function(e,r){var n;t.subscribe((function(e){return n=e}),(function(e){return r(e)}),(function(){return e(n)}))}))},e.create=function(t){return new e(t)},e}();function f(e){var t;return null!==(t=null!=e?e:u.config.Promise)&&void 0!==t?t:Promise}t.Observable=l},378:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ReplaySubject=void 0;var o=r(5558),a=r(5138),u=function(e){function t(t,r,n){void 0===t&&(t=1/0),void 0===r&&(r=1/0),void 0===n&&(n=a.dateTimestampProvider);var i=e.call(this)||this;return i._bufferSize=t,i._windowTime=r,i._timestampProvider=n,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=r===1/0,i._bufferSize=Math.max(1,t),i._windowTime=Math.max(1,r),i}return i(t,e),t.prototype.next=function(t){var r=this,n=r.isStopped,i=r._buffer,o=r._infiniteTimeWindow,a=r._timestampProvider,u=r._windowTime;n||(i.push(t),!o&&i.push(a.now()+u)),this._trimBuffer(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(e),r=this._infiniteTimeWindow,n=this._buffer.slice(),i=0;i<n.length&&!e.closed;i+=r?1:2)e.next(n[i]);return this._checkFinalizedStatuses(e),t},t.prototype._trimBuffer=function(){var e=this,t=e._bufferSize,r=e._timestampProvider,n=e._buffer,i=e._infiniteTimeWindow,o=(i?1:2)*t;if(t<1/0&&o<n.length&&n.splice(0,n.length-o),!i){for(var a=r.now(),u=0,c=1;c<n.length&&n[c]<=a;c+=2)u=c;u&&n.splice(0,u+1)}},t}(o.Subject);t.ReplaySubject=u},3597:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Scheduler=void 0;var n=r(5138),i=function(){function e(t,r){void 0===r&&(r=e.now),this.schedulerActionCtor=t,this.now=r}return e.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(r,t)},e.now=n.dateTimestampProvider.now,e}();t.Scheduler=i},5558:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.AnonymousSubject=t.Subject=void 0;var a=r(6122),u=r(6775),c=r(3339),s=r(3359),l=r(89),f=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return i(t,e),t.prototype.lift=function(e){var t=new d(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new c.ObjectUnsubscribedError},t.prototype.next=function(e){var t=this;l.errorContext((function(){var r,n;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var i=o(t.currentObservers),a=i.next();!a.done;a=i.next()){a.value.next(e)}}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}}}))},t.prototype.error=function(e){var t=this;l.errorContext((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var r=t.observers;r.length;)r.shift().error(e)}}))},t.prototype.complete=function(){var e=this;l.errorContext((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,r=this,n=r.hasError,i=r.isStopped,o=r.observers;return n||i?u.EMPTY_SUBSCRIPTION:(this.currentObservers=null,o.push(e),new u.Subscription((function(){t.currentObservers=null,s.arrRemove(o,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,r=t.hasError,n=t.thrownError,i=t.isStopped;r?e.error(n):i&&e.complete()},t.prototype.asObservable=function(){var e=new a.Observable;return e.source=this,e},t.create=function(e,t){return new d(e,t)},t}(a.Observable);t.Subject=f;var d=function(e){function t(t,r){var n=e.call(this)||this;return n.destination=t,n.source=r,n}return i(t,e),t.prototype.next=function(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)},t.prototype.error=function(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:u.EMPTY_SUBSCRIPTION},t}(f);t.AnonymousSubject=d},1873:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.EMPTY_OBSERVER=t.SafeSubscriber=t.Subscriber=void 0;var o=r(4523),a=r(6775),u=r(4560),c=r(7405),s=r(7310),l=r(6773),f=r(3645),d=r(89),p=function(e){function r(r){var n=e.call(this)||this;return n.isStopped=!1,r?(n.destination=r,a.isSubscription(r)&&r.add(n)):n.destination=t.EMPTY_OBSERVER,n}return i(r,e),r.create=function(e,t,r){return new b(e,t,r)},r.prototype.next=function(e){this.isStopped?g(l.nextNotification(e),this):this._next(e)},r.prototype.error=function(e){this.isStopped?g(l.errorNotification(e),this):(this.isStopped=!0,this._error(e))},r.prototype.complete=function(){this.isStopped?g(l.COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},r.prototype._next=function(e){this.destination.next(e)},r.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},r.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},r}(a.Subscription);t.Subscriber=p;var h=Function.prototype.bind;function v(e,t){return h.call(e,t)}var y=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){m(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){m(e)}else m(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){m(e)}},e}(),b=function(e){function t(t,r,n){var i,a,c=e.call(this)||this;o.isFunction(t)||!t?i={next:null!=t?t:void 0,error:null!=r?r:void 0,complete:null!=n?n:void 0}:c&&u.config.useDeprecatedNextContext?((a=Object.create(t)).unsubscribe=function(){return c.unsubscribe()},i={next:t.next&&v(t.next,a),error:t.error&&v(t.error,a),complete:t.complete&&v(t.complete,a)}):i=t;return c.destination=new y(i),c}return i(t,e),t}(p);function m(e){u.config.useDeprecatedSynchronousErrorHandling?d.captureError(e):c.reportUnhandledError(e)}function g(e,t){var r=u.config.onStoppedNotification;r&&f.timeoutProvider.setTimeout((function(){return r(e,t)}))}t.SafeSubscriber=b,t.EMPTY_OBSERVER={closed:!0,next:s.noop,error:function(e){throw e},complete:s.noop}},6775:function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},o=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.isSubscription=t.EMPTY_SUBSCRIPTION=t.Subscription=void 0;var a=r(4523),u=r(4376),c=r(3359),s=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,r,c,s;if(!this.closed){this.closed=!0;var f=this._parentage;if(f)if(this._parentage=null,Array.isArray(f))try{for(var d=n(f),p=d.next();!p.done;p=d.next()){p.value.remove(this)}}catch(t){e={error:t}}finally{try{p&&!p.done&&(t=d.return)&&t.call(d)}finally{if(e)throw e.error}}else f.remove(this);var h=this.initialTeardown;if(a.isFunction(h))try{h()}catch(e){s=e instanceof u.UnsubscriptionError?e.errors:[e]}var v=this._finalizers;if(v){this._finalizers=null;try{for(var y=n(v),b=y.next();!b.done;b=y.next()){var m=b.value;try{l(m)}catch(e){s=null!=s?s:[],e instanceof u.UnsubscriptionError?s=o(o([],i(s)),i(e.errors)):s.push(e)}}}catch(e){r={error:e}}finally{try{b&&!b.done&&(c=y.return)&&c.call(y)}finally{if(r)throw r.error}}}if(s)throw new u.UnsubscriptionError(s)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)l(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&c.arrRemove(t,e)},e.prototype.remove=function(t){var r=this._finalizers;r&&c.arrRemove(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}();function l(e){a.isFunction(e)?e():e.unsubscribe()}t.Subscription=s,t.EMPTY_SUBSCRIPTION=s.EMPTY,t.isSubscription=function(e){return e instanceof s||e&&"closed"in e&&a.isFunction(e.remove)&&a.isFunction(e.add)&&a.isFunction(e.unsubscribe)}},4560:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0,t.config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},1157:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.firstValueFrom=void 0;var n=r(9137),i=r(1873);t.firstValueFrom=function(e,t){var r="object"==typeof t;return new Promise((function(o,a){var u=new i.SafeSubscriber({next:function(e){o(e),u.unsubscribe()},error:a,complete:function(){r?o(t.defaultValue):a(new n.EmptyError)}});e.subscribe(u)}))}},5722:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lastValueFrom=void 0;var n=r(9137);t.lastValueFrom=function(e,t){var r="object"==typeof t;return new Promise((function(i,o){var a,u=!1;e.subscribe({next:function(e){a=e,u=!0},error:o,complete:function(){u?i(a):r?i(t.defaultValue):o(new n.EmptyError)}})}))}},1479:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectableObservable=void 0;var o=r(6122),a=r(6775),u=r(4256),c=r(5464),s=r(2724),l=function(e){function t(t,r){var n=e.call(this)||this;return n.source=t,n.subjectFactory=r,n._subject=null,n._refCount=0,n._connection=null,s.hasLift(t)&&(n.lift=t.lift),n}return i(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype._teardown=function(){this._refCount=0;var e=this._connection;this._subject=this._connection=null,null==e||e.unsubscribe()},t.prototype.connect=function(){var e=this,t=this._connection;if(!t){t=this._connection=new a.Subscription;var r=this.getSubject();t.add(this.source.subscribe(c.createOperatorSubscriber(r,void 0,(function(){e._teardown(),r.complete()}),(function(t){e._teardown(),r.error(t)}),(function(){return e._teardown()})))),t.closed&&(this._connection=null,t=a.Subscription.EMPTY)}return t},t.prototype.refCount=function(){return u.refCount()(this)},t}(o.Observable);t.ConnectableObservable=l},1066:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bindCallback=void 0;var n=r(709);t.bindCallback=function(e,t,r){return n.bindCallbackInternals(!1,e,t,r)}},709:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.bindCallbackInternals=void 0;var o=r(6774),a=r(6122),u=r(3344),c=r(1672),s=r(2027),l=r(4199);t.bindCallbackInternals=function e(t,r,f,d){if(f){if(!o.isScheduler(f))return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return e(t,r,d).apply(this,n).pipe(c.mapOneOrManyArgs(f))};d=f}return d?function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return e(t,r).apply(this,n).pipe(u.subscribeOn(d),s.observeOn(d))}:function(){for(var e=this,o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];var c=new l.AsyncSubject,s=!0;return new a.Observable((function(a){var u=c.subscribe(a);if(s){s=!1;var l=!1,f=!1;r.apply(e,i(i([],n(o)),[function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(t){var n=e.shift();if(null!=n)return void c.error(n)}c.next(1<e.length?e:e[0]),f=!0,l&&c.complete()}])),f&&c.complete(),l=!0}return u}))}}},6367:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bindNodeCallback=void 0;var n=r(709);t.bindNodeCallback=function(e,t,r){return n.bindCallbackInternals(!0,e,t,r)}},2886:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.combineLatestInit=t.combineLatest=void 0;var n=r(6122),i=r(6597),o=r(9752),a=r(3555),u=r(1672),c=r(9239),s=r(5689),l=r(5464),f=r(5850);function d(e,t,r){return void 0===r&&(r=a.identity),function(n){p(t,(function(){for(var i=e.length,a=new Array(i),u=i,c=i,s=function(i){p(t,(function(){var s=o.from(e[i],t),f=!1;s.subscribe(l.createOperatorSubscriber(n,(function(e){a[i]=e,f||(f=!0,c--),c||n.next(r(a.slice()))}),(function(){--u||n.complete()})))}),n)},f=0;f<i;f++)s(f)}),n)}}function p(e,t,r){e?f.executeSchedule(r,e,t):t()}t.combineLatest=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=c.popScheduler(e),l=c.popResultSelector(e),f=i.argsArgArrayOrObject(e),p=f.args,h=f.keys;if(0===p.length)return o.from([],r);var v=new n.Observable(d(p,r,h?function(e){return s.createObject(h,e)}:a.identity));return l?v.pipe(u.mapOneOrManyArgs(l)):v},t.combineLatestInit=d},3251:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.concat=void 0;var n=r(6525),i=r(9239),o=r(9752);t.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.concatAll()(o.from(e,i.popScheduler(e)))}},8432:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.connectable=void 0;var n=r(5558),i=r(6122),o=r(3835),a={connector:function(){return new n.Subject},resetOnDisconnect:!0};t.connectable=function(e,t){void 0===t&&(t=a);var r=null,n=t.connector,u=t.resetOnDisconnect,c=void 0===u||u,s=n(),l=new i.Observable((function(e){return s.subscribe(e)}));return l.connect=function(){return r&&!r.closed||(r=o.defer((function(){return e})).subscribe(s),c&&r.add((function(){return s=n()}))),r},l}},3835:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defer=void 0;var n=r(6122),i=r(4751);t.defer=function(e){return new n.Observable((function(t){i.innerFrom(e()).subscribe(t)}))}},1415:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.animationFrames=void 0;var n=r(6122),i=r(947),o=r(6995);function a(e){return new n.Observable((function(t){var r=e||i.performanceTimestampProvider,n=r.now(),a=0,u=function(){t.closed||(a=o.animationFrameProvider.requestAnimationFrame((function(i){a=0;var o=r.now();t.next({timestamp:e?o:i,elapsed:o-n}),u()})))};return u(),function(){a&&o.animationFrameProvider.cancelAnimationFrame(a)}}))}t.animationFrames=function(e){return e?a(e):u};var u=a()},4025:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.empty=t.EMPTY=void 0;var n=r(6122);t.EMPTY=new n.Observable((function(e){return e.complete()})),t.empty=function(e){return e?function(e){return new n.Observable((function(t){return e.schedule((function(){return t.complete()}))}))}(e):t.EMPTY}},533:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forkJoin=void 0;var n=r(6122),i=r(6597),o=r(4751),a=r(9239),u=r(5464),c=r(1672),s=r(5689);t.forkJoin=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=a.popResultSelector(e),l=i.argsArgArrayOrObject(e),f=l.args,d=l.keys,p=new n.Observable((function(e){var t=f.length;if(t)for(var r=new Array(t),n=t,i=t,a=function(t){var a=!1;o.innerFrom(f[t]).subscribe(u.createOperatorSubscriber(e,(function(e){a||(a=!0,i--),r[t]=e}),(function(){return n--}),void 0,(function(){n&&a||(i||e.next(d?s.createObject(d,r):r),e.complete())})))},c=0;c<t;c++)a(c);else e.complete()}));return r?p.pipe(c.mapOneOrManyArgs(r)):p}},9752:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.from=void 0;var n=r(9931),i=r(4751);t.from=function(e,t){return t?n.scheduled(e,t):i.innerFrom(e)}},577:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.fromEvent=void 0;var i=r(4751),o=r(6122),a=r(439),u=r(1720),c=r(4523),s=r(1672),l=["addListener","removeListener"],f=["addEventListener","removeEventListener"],d=["on","off"];function p(e,t){return function(r){return function(n){return e[r](t,n)}}}t.fromEvent=function e(t,r,h,v){if(c.isFunction(h)&&(v=h,h=void 0),v)return e(t,r,h).pipe(s.mapOneOrManyArgs(v));var y=n(function(e){return c.isFunction(e.addEventListener)&&c.isFunction(e.removeEventListener)}(t)?f.map((function(e){return function(n){return t[e](r,n,h)}})):function(e){return c.isFunction(e.addListener)&&c.isFunction(e.removeListener)}(t)?l.map(p(t,r)):function(e){return c.isFunction(e.on)&&c.isFunction(e.off)}(t)?d.map(p(t,r)):[],2),b=y[0],m=y[1];if(!b&&u.isArrayLike(t))return a.mergeMap((function(t){return e(t,r,h)}))(i.innerFrom(t));if(!b)throw new TypeError("Invalid event target");return new o.Observable((function(e){var t=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.next(1<t.length?t:t[0])};return b(t),function(){return m(t)}}))}},888:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromEventPattern=void 0;var n=r(6122),i=r(4523),o=r(1672);t.fromEventPattern=function e(t,r,a){return a?e(t,r).pipe(o.mapOneOrManyArgs(a)):new n.Observable((function(e){var n=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.next(1===t.length?t[0]:t)},o=t(n);return i.isFunction(r)?function(){return r(n,o)}:void 0}))}},2911:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromSubscribable=void 0;var n=r(6122);t.fromSubscribable=function(e){return new n.Observable((function(t){return e.subscribe(t)}))}},9533:function(e,t,r){"use strict";var n=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.generate=void 0;var i=r(3555),o=r(6774),a=r(3835),u=r(9202);t.generate=function(e,t,r,c,s){var l,f,d,p;function h(){var e;return n(this,(function(n){switch(n.label){case 0:e=p,n.label=1;case 1:return t&&!t(e)?[3,4]:[4,d(e)];case 2:n.sent(),n.label=3;case 3:return e=r(e),[3,1];case 4:return[2]}}))}return 1===arguments.length?(p=(l=e).initialState,t=l.condition,r=l.iterate,f=l.resultSelector,d=void 0===f?i.identity:f,s=l.scheduler):(p=e,!c||o.isScheduler(c)?(d=i.identity,s=c):d=c),a.defer(s?function(){return u.scheduleIterable(h(),s)}:h)}},7991:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iif=void 0;var n=r(3835);t.iif=function(e,t,r){return n.defer((function(){return e()?t:r}))}},4751:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function u(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},o=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof a?a(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,i){(function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)})(n,i,(t=e[r](t)).done,t.value)}))}}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.fromReadableStreamLike=t.fromAsyncIterable=t.fromIterable=t.fromPromise=t.fromArrayLike=t.fromInteropObservable=t.innerFrom=void 0;var u=r(1720),c=r(8983),s=r(6122),l=r(4305),f=r(6587),d=r(6680),p=r(9923),h=r(673),v=r(4523),y=r(7405),b=r(4847);function m(e){return new s.Observable((function(t){var r=e[b.observable]();if(v.isFunction(r.subscribe))return r.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")}))}function g(e){return new s.Observable((function(t){for(var r=0;r<e.length&&!t.closed;r++)t.next(e[r]);t.complete()}))}function w(e){return new s.Observable((function(t){e.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,y.reportUnhandledError)}))}function S(e){return new s.Observable((function(t){var r,n;try{for(var i=a(e),o=i.next();!o.done;o=i.next()){var u=o.value;if(t.next(u),t.closed)return}}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}t.complete()}))}function _(e){return new s.Observable((function(t){(function(e,t){var r,a,u,c;return n(this,void 0,void 0,(function(){var n,s;return i(this,(function(i){switch(i.label){case 0:i.trys.push([0,5,6,11]),r=o(e),i.label=1;case 1:return[4,r.next()];case 2:if((a=i.sent()).done)return[3,4];if(n=a.value,t.next(n),t.closed)return[2];i.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=i.sent(),u={error:s},[3,11];case 6:return i.trys.push([6,,9,10]),a&&!a.done&&(c=r.return)?[4,c.call(r)]:[3,8];case 7:i.sent(),i.label=8;case 8:return[3,10];case 9:if(u)throw u.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function O(e){return _(h.readableStreamLikeToAsyncGenerator(e))}t.innerFrom=function(e){if(e instanceof s.Observable)return e;if(null!=e){if(l.isInteropObservable(e))return m(e);if(u.isArrayLike(e))return g(e);if(c.isPromise(e))return w(e);if(f.isAsyncIterable(e))return _(e);if(p.isIterable(e))return S(e);if(h.isReadableStreamLike(e))return O(e)}throw d.createInvalidObservableTypeError(e)},t.fromInteropObservable=m,t.fromArrayLike=g,t.fromPromise=w,t.fromIterable=S,t.fromAsyncIterable=_,t.fromReadableStreamLike=O},8160:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.interval=void 0;var n=r(8764),i=r(5635);t.interval=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=n.asyncScheduler),e<0&&(e=0),i.timer(e,e,t)}},9969:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.merge=void 0;var n=r(7610),i=r(4751),o=r(4025),a=r(9239),u=r(9752);t.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=a.popScheduler(e),c=a.popNumber(e,1/0),s=e;return s.length?1===s.length?i.innerFrom(s[0]):n.mergeAll(c)(u.from(s,r)):o.EMPTY}},1250:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.never=t.NEVER=void 0;var n=r(6122),i=r(7310);t.NEVER=new n.Observable(i.noop),t.never=function(){return t.NEVER}},2743:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.of=void 0;var n=r(9239),i=r(9752);t.of=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=n.popScheduler(e);return i.from(e,r)}},4315:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onErrorResumeNext=void 0;var n=r(6122),i=r(1115),o=r(5464),a=r(7310),u=r(4751);t.onErrorResumeNext=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=i.argsOrArgArray(e);return new n.Observable((function(e){var t=0,n=function(){if(t<r.length){var i=void 0;try{i=u.innerFrom(r[t++])}catch(e){return void n()}var c=new o.OperatorSubscriber(e,void 0,a.noop,a.noop);i.subscribe(c),c.add(n)}else e.complete()};n()}))}},4e3:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pairs=void 0;var n=r(9752);t.pairs=function(e,t){return n.from(Object.entries(e),t)}},8746:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.partition=void 0;var n=r(9823),i=r(1912),o=r(4751);t.partition=function(e,t,r){return[i.filter(t,r)(o.innerFrom(e)),i.filter(n.not(t,r))(o.innerFrom(e))]}},3903:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.raceInit=t.race=void 0;var n=r(6122),i=r(4751),o=r(1115),a=r(5464);function u(e){return function(t){for(var r=[],n=function(n){r.push(i.innerFrom(e[n]).subscribe(a.createOperatorSubscriber(t,(function(e){if(r){for(var i=0;i<r.length;i++)i!==n&&r[i].unsubscribe();r=null}t.next(e)}))))},o=0;r&&!t.closed&&o<e.length;o++)n(o)}}t.race=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===(e=o.argsOrArgArray(e)).length?i.innerFrom(e[0]):new n.Observable(u(e))},t.raceInit=u},2040:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.range=void 0;var n=r(6122),i=r(4025);t.range=function(e,t,r){if(null==t&&(t=e,e=0),t<=0)return i.EMPTY;var o=t+e;return new n.Observable(r?function(t){var n=e;return r.schedule((function(){n<o?(t.next(n++),this.schedule()):t.complete()}))}:function(t){for(var r=e;r<o&&!t.closed;)t.next(r++);t.complete()})}},2236:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throwError=void 0;var n=r(6122),i=r(4523);t.throwError=function(e,t){var r=i.isFunction(e)?e:function(){return e},o=function(e){return e.error(r())};return new n.Observable(t?function(e){return t.schedule(o,0,e)}:o)}},5635:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timer=void 0;var n=r(6122),i=r(8764),o=r(6774),a=r(1022);t.timer=function(e,t,r){void 0===e&&(e=0),void 0===r&&(r=i.async);var u=-1;return null!=t&&(o.isScheduler(t)?r=t:u=t),new n.Observable((function(t){var n=a.isValidDate(e)?+e-r.now():e;n<0&&(n=0);var i=0;return r.schedule((function(){t.closed||(t.next(i++),0<=u?this.schedule(void 0,u):t.complete())}),n)}))}},1405:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.using=void 0;var n=r(6122),i=r(4751),o=r(4025);t.using=function(e,t){return new n.Observable((function(r){var n=e(),a=t(n);return(a?i.innerFrom(a):o.EMPTY).subscribe(r),function(){n&&n.unsubscribe()}}))}},9852:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.zip=void 0;var o=r(6122),a=r(4751),u=r(1115),c=r(4025),s=r(5464),l=r(9239);t.zip=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=l.popResultSelector(e),f=u.argsOrArgArray(e);return f.length?new o.Observable((function(e){var t=f.map((function(){return[]})),o=f.map((function(){return!1}));e.add((function(){t=o=null}));for(var u=function(u){a.innerFrom(f[u]).subscribe(s.createOperatorSubscriber(e,(function(a){if(t[u].push(a),t.every((function(e){return e.length}))){var c=t.map((function(e){return e.shift()}));e.next(r?r.apply(void 0,i([],n(c))):c),t.some((function(e,t){return!e.length&&o[t]}))&&e.complete()}}),(function(){o[u]=!0,!t[u].length&&e.complete()})))},c=0;!e.closed&&c<f.length;c++)u(c);return function(){t=o=null}})):c.EMPTY}},5464:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.OperatorSubscriber=t.createOperatorSubscriber=void 0;var o=r(1873);t.createOperatorSubscriber=function(e,t,r,n,i){return new a(e,t,r,n,i)};var a=function(e){function t(t,r,n,i,o,a){var u=e.call(this,t)||this;return u.onFinalize=o,u.shouldUnsubscribe=a,u._next=r?function(e){try{r(e)}catch(e){t.error(e)}}:e.prototype._next,u._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,u._complete=n?function(){try{n()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,u}return i(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(o.Subscriber);t.OperatorSubscriber=a},6305:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.audit=void 0;var n=r(2724),i=r(4751),o=r(5464);t.audit=function(e){return n.operate((function(t,r){var n=!1,a=null,u=null,c=!1,s=function(){if(null==u||u.unsubscribe(),u=null,n){n=!1;var e=a;a=null,r.next(e)}c&&r.complete()},l=function(){u=null,c&&r.complete()};t.subscribe(o.createOperatorSubscriber(r,(function(t){n=!0,a=t,u||i.innerFrom(e(t)).subscribe(u=o.createOperatorSubscriber(r,s,l))}),(function(){c=!0,(!n||!u||u.closed)&&r.complete()})))}))}},2571:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.auditTime=void 0;var n=r(8764),i=r(6305),o=r(5635);t.auditTime=function(e,t){return void 0===t&&(t=n.asyncScheduler),i.audit((function(){return o.timer(e,t)}))}},7863:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buffer=void 0;var n=r(2724),i=r(7310),o=r(5464),a=r(4751);t.buffer=function(e){return n.operate((function(t,r){var n=[];return t.subscribe(o.createOperatorSubscriber(r,(function(e){return n.push(e)}),(function(){r.next(n),r.complete()}))),a.innerFrom(e).subscribe(o.createOperatorSubscriber(r,(function(){var e=n;n=[],r.next(e)}),i.noop)),function(){n=null}}))}},6605:function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.bufferCount=void 0;var i=r(2724),o=r(5464),a=r(3359);t.bufferCount=function(e,t){return void 0===t&&(t=null),t=null!=t?t:e,i.operate((function(r,i){var u=[],c=0;r.subscribe(o.createOperatorSubscriber(i,(function(r){var o,s,l,f,d=null;c++%t==0&&u.push([]);try{for(var p=n(u),h=p.next();!h.done;h=p.next()){(b=h.value).push(r),e<=b.length&&(d=null!=d?d:[]).push(b)}}catch(e){o={error:e}}finally{try{h&&!h.done&&(s=p.return)&&s.call(p)}finally{if(o)throw o.error}}if(d)try{for(var v=n(d),y=v.next();!y.done;y=v.next()){var b=y.value;a.arrRemove(u,b),i.next(b)}}catch(e){l={error:e}}finally{try{y&&!y.done&&(f=v.return)&&f.call(v)}finally{if(l)throw l.error}}}),(function(){var e,t;try{for(var r=n(u),o=r.next();!o.done;o=r.next()){var a=o.value;i.next(a)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}i.complete()}),void 0,(function(){u=null})))}))}},9355:function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.bufferTime=void 0;var i=r(6775),o=r(2724),a=r(5464),u=r(3359),c=r(8764),s=r(9239),l=r(5850);t.bufferTime=function(e){for(var t,r,f=[],d=1;d<arguments.length;d++)f[d-1]=arguments[d];var p=null!==(t=s.popScheduler(f))&&void 0!==t?t:c.asyncScheduler,h=null!==(r=f[0])&&void 0!==r?r:null,v=f[1]||1/0;return o.operate((function(t,r){var o=[],c=!1,s=function(e){var t=e.buffer;e.subs.unsubscribe(),u.arrRemove(o,e),r.next(t),c&&f()},f=function(){if(o){var t=new i.Subscription;r.add(t);var n={buffer:[],subs:t};o.push(n),l.executeSchedule(t,p,(function(){return s(n)}),e)}};null!==h&&h>=0?l.executeSchedule(r,p,f,h,!0):c=!0,f();var d=a.createOperatorSubscriber(r,(function(e){var t,r,i=o.slice();try{for(var a=n(i),u=a.next();!u.done;u=a.next()){var c=u.value,l=c.buffer;l.push(e),v<=l.length&&s(c)}}catch(e){t={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}}),(function(){for(;null==o?void 0:o.length;)r.next(o.shift().buffer);null==d||d.unsubscribe(),r.complete(),r.unsubscribe()}),void 0,(function(){return o=null}));t.subscribe(d)}))}},2909:function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.bufferToggle=void 0;var i=r(6775),o=r(2724),a=r(4751),u=r(5464),c=r(7310),s=r(3359);t.bufferToggle=function(e,t){return o.operate((function(r,o){var l=[];a.innerFrom(e).subscribe(u.createOperatorSubscriber(o,(function(e){var r=[];l.push(r);var n=new i.Subscription;n.add(a.innerFrom(t(e)).subscribe(u.createOperatorSubscriber(o,(function(){s.arrRemove(l,r),o.next(r),n.unsubscribe()}),c.noop)))}),c.noop)),r.subscribe(u.createOperatorSubscriber(o,(function(e){var t,r;try{for(var i=n(l),o=i.next();!o.done;o=i.next()){o.value.push(e)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}}),(function(){for(;l.length>0;)o.next(l.shift());o.complete()})))}))}},792:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bufferWhen=void 0;var n=r(2724),i=r(7310),o=r(5464),a=r(4751);t.bufferWhen=function(e){return n.operate((function(t,r){var n=null,u=null,c=function(){null==u||u.unsubscribe();var t=n;n=[],t&&r.next(t),a.innerFrom(e()).subscribe(u=o.createOperatorSubscriber(r,c,i.noop))};c(),t.subscribe(o.createOperatorSubscriber(r,(function(e){return null==n?void 0:n.push(e)}),(function(){n&&r.next(n),r.complete()}),void 0,(function(){return n=u=null})))}))}},3371:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.catchError=void 0;var n=r(4751),i=r(5464),o=r(2724);t.catchError=function e(t){return o.operate((function(r,o){var a,u=null,c=!1;u=r.subscribe(i.createOperatorSubscriber(o,void 0,void 0,(function(i){a=n.innerFrom(t(i,e(t)(r))),u?(u.unsubscribe(),u=null,a.subscribe(o)):c=!0}))),c&&(u.unsubscribe(),u=null,a.subscribe(o))}))}},9633:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.combineAll=void 0;var n=r(5706);t.combineAll=n.combineLatestAll},362:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.combineLatest=void 0;var o=r(2886),a=r(2724),u=r(1115),c=r(1672),s=r(9433),l=r(9239);t.combineLatest=function e(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var f=l.popResultSelector(t);return f?s.pipe(e.apply(void 0,i([],n(t))),c.mapOneOrManyArgs(f)):a.operate((function(e,r){o.combineLatestInit(i([e],n(u.argsOrArgArray(t))))(r)}))}},5706:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.combineLatestAll=void 0;var n=r(2886),i=r(3763);t.combineLatestAll=function(e){return i.joinAllInternals(n.combineLatest,e)}},4094:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.combineLatestWith=void 0;var o=r(362);t.combineLatestWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.combineLatest.apply(void 0,i([],n(e)))}},7321:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.concat=void 0;var o=r(2724),a=r(6525),u=r(9239),c=r(9752);t.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=u.popScheduler(e);return o.operate((function(t,o){a.concatAll()(c.from(i([t],n(e)),r)).subscribe(o)}))}},6525:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.concatAll=void 0;var n=r(7610);t.concatAll=function(){return n.mergeAll(1)}},7307:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.concatMap=void 0;var n=r(439),i=r(4523);t.concatMap=function(e,t){return i.isFunction(t)?n.mergeMap(e,t,1):n.mergeMap(e,1)}},7724:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.concatMapTo=void 0;var n=r(7307),i=r(4523);t.concatMapTo=function(e,t){return i.isFunction(t)?n.concatMap((function(){return e}),t):n.concatMap((function(){return e}))}},6142:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.concatWith=void 0;var o=r(7321);t.concatWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.concat.apply(void 0,i([],n(e)))}},7932:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.connect=void 0;var n=r(5558),i=r(4751),o=r(2724),a=r(2911),u={connector:function(){return new n.Subject}};t.connect=function(e,t){void 0===t&&(t=u);var r=t.connector;return o.operate((function(t,n){var o=r();i.innerFrom(e(a.fromSubscribable(o))).subscribe(n),n.add(t.subscribe(o))}))}},5997:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.count=void 0;var n=r(985);t.count=function(e){return n.reduce((function(t,r,n){return!e||e(r,n)?t+1:t}),0)}},6621:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=void 0;var n=r(2724),i=r(7310),o=r(5464),a=r(4751);t.debounce=function(e){return n.operate((function(t,r){var n=!1,u=null,c=null,s=function(){if(null==c||c.unsubscribe(),c=null,n){n=!1;var e=u;u=null,r.next(e)}};t.subscribe(o.createOperatorSubscriber(r,(function(t){null==c||c.unsubscribe(),n=!0,u=t,c=o.createOperatorSubscriber(r,s,i.noop),a.innerFrom(e(t)).subscribe(c)}),(function(){s(),r.complete()}),void 0,(function(){u=c=null})))}))}},8819:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debounceTime=void 0;var n=r(8764),i=r(2724),o=r(5464);t.debounceTime=function(e,t){return void 0===t&&(t=n.asyncScheduler),i.operate((function(r,n){var i=null,a=null,u=null,c=function(){if(i){i.unsubscribe(),i=null;var e=a;a=null,n.next(e)}};function s(){var r=u+e,o=t.now();if(o<r)return i=this.schedule(void 0,r-o),void n.add(i);c()}r.subscribe(o.createOperatorSubscriber(n,(function(r){a=r,u=t.now(),i||(i=t.schedule(s,e),n.add(i))}),(function(){c(),n.complete()}),void 0,(function(){a=i=null})))}))}},2652:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultIfEmpty=void 0;var n=r(2724),i=r(5464);t.defaultIfEmpty=function(e){return n.operate((function(t,r){var n=!1;t.subscribe(i.createOperatorSubscriber(r,(function(e){n=!0,r.next(e)}),(function(){n||r.next(e),r.complete()})))}))}},9225:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0;var n=r(8764),i=r(7285),o=r(5635);t.delay=function(e,t){void 0===t&&(t=n.asyncScheduler);var r=o.timer(e,t);return i.delayWhen((function(){return r}))}},7285:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delayWhen=void 0;var n=r(3251),i=r(2642),o=r(586),a=r(5691),u=r(439),c=r(4751);t.delayWhen=function e(t,r){return r?function(a){return n.concat(r.pipe(i.take(1),o.ignoreElements()),a.pipe(e(t)))}:u.mergeMap((function(e,r){return c.innerFrom(t(e,r)).pipe(i.take(1),a.mapTo(e))}))}},4862:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dematerialize=void 0;var n=r(2244),i=r(2724),o=r(5464);t.dematerialize=function(){return i.operate((function(e,t){e.subscribe(o.createOperatorSubscriber(t,(function(e){return n.observeNotification(e,t)})))}))}},6463:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.distinct=void 0;var n=r(2724),i=r(5464),o=r(7310),a=r(4751);t.distinct=function(e,t){return n.operate((function(r,n){var u=new Set;r.subscribe(i.createOperatorSubscriber(n,(function(t){var r=e?e(t):t;u.has(r)||(u.add(r),n.next(t))}))),t&&a.innerFrom(t).subscribe(i.createOperatorSubscriber(n,(function(){return u.clear()}),o.noop))}))}},8203:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.distinctUntilChanged=void 0;var n=r(3555),i=r(2724),o=r(5464);function a(e,t){return e===t}t.distinctUntilChanged=function(e,t){return void 0===t&&(t=n.identity),e=null!=e?e:a,i.operate((function(r,n){var i,a=!0;r.subscribe(o.createOperatorSubscriber(n,(function(r){var o=t(r);!a&&e(i,o)||(a=!1,i=o,n.next(r))})))}))}},4467:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.distinctUntilKeyChanged=void 0;var n=r(8203);t.distinctUntilKeyChanged=function(e,t){return n.distinctUntilChanged((function(r,n){return t?t(r[e],n[e]):r[e]===n[e]}))}},1176:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.elementAt=void 0;var n=r(1386),i=r(1912),o=r(596),a=r(2652),u=r(2642);t.elementAt=function(e,t){if(e<0)throw new n.ArgumentOutOfRangeError;var r=arguments.length>=2;return function(c){return c.pipe(i.filter((function(t,r){return r===e})),u.take(1),r?a.defaultIfEmpty(t):o.throwIfEmpty((function(){return new n.ArgumentOutOfRangeError})))}}},6754:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.endWith=void 0;var o=r(3251),a=r(2743);t.endWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return o.concat(t,a.of.apply(void 0,i([],n(e))))}}},4726:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.every=void 0;var n=r(2724),i=r(5464);t.every=function(e,t){return n.operate((function(r,n){var o=0;r.subscribe(i.createOperatorSubscriber(n,(function(i){e.call(t,i,o++,r)||(n.next(!1),n.complete())}),(function(){n.next(!0),n.complete()})))}))}},85:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exhaust=void 0;var n=r(7753);t.exhaust=n.exhaustAll},7753:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exhaustAll=void 0;var n=r(5489),i=r(3555);t.exhaustAll=function(){return n.exhaustMap(i.identity)}},5489:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exhaustMap=void 0;var n=r(3559),i=r(4751),o=r(2724),a=r(5464);t.exhaustMap=function e(t,r){return r?function(o){return o.pipe(e((function(e,o){return i.innerFrom(t(e,o)).pipe(n.map((function(t,n){return r(e,t,o,n)})))})))}:o.operate((function(e,r){var n=0,o=null,u=!1;e.subscribe(a.createOperatorSubscriber(r,(function(e){o||(o=a.createOperatorSubscriber(r,void 0,(function(){o=null,u&&r.complete()})),i.innerFrom(t(e,n++)).subscribe(o))}),(function(){u=!0,!o&&r.complete()})))}))}},3360:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.expand=void 0;var n=r(2724),i=r(9928);t.expand=function(e,t,r){return void 0===t&&(t=1/0),t=(t||0)<1?1/0:t,n.operate((function(n,o){return i.mergeInternals(n,o,e,t,void 0,!0,r)}))}},1912:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filter=void 0;var n=r(2724),i=r(5464);t.filter=function(e,t){return n.operate((function(r,n){var o=0;r.subscribe(i.createOperatorSubscriber(n,(function(r){return e.call(t,r,o++)&&n.next(r)})))}))}},8475:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.finalize=void 0;var n=r(2724);t.finalize=function(e){return n.operate((function(t,r){try{t.subscribe(r)}finally{r.add(e)}}))}},7276:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createFind=t.find=void 0;var n=r(2724),i=r(5464);function o(e,t,r){var n="index"===r;return function(r,o){var a=0;r.subscribe(i.createOperatorSubscriber(o,(function(i){var u=a++;e.call(t,i,u,r)&&(o.next(n?u:i),o.complete())}),(function(){o.next(n?-1:void 0),o.complete()})))}}t.find=function(e,t){return n.operate(o(e,t,"value"))},t.createFind=o},4459:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findIndex=void 0;var n=r(2724),i=r(7276);t.findIndex=function(e,t){return n.operate(i.createFind(e,t,"index"))}},2262:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.first=void 0;var n=r(9137),i=r(1912),o=r(2642),a=r(2652),u=r(596),c=r(3555);t.first=function(e,t){var r=arguments.length>=2;return function(s){return s.pipe(e?i.filter((function(t,r){return e(t,r,s)})):c.identity,o.take(1),r?a.defaultIfEmpty(t):u.throwIfEmpty((function(){return new n.EmptyError})))}}},3536:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flatMap=void 0;var n=r(439);t.flatMap=n.mergeMap},8741:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.groupBy=void 0;var n=r(6122),i=r(4751),o=r(5558),a=r(2724),u=r(5464);t.groupBy=function(e,t,r,c){return a.operate((function(a,s){var l;t&&"function"!=typeof t?(r=t.duration,l=t.element,c=t.connector):l=t;var f=new Map,d=function(e){f.forEach(e),e(s)},p=function(e){return d((function(t){return t.error(e)}))},h=0,v=!1,y=new u.OperatorSubscriber(s,(function(t){try{var a=e(t),d=f.get(a);if(!d){f.set(a,d=c?c():new o.Subject);var b=(g=a,w=d,(S=new n.Observable((function(e){h++;var t=w.subscribe(e);return function(){t.unsubscribe(),0==--h&&v&&y.unsubscribe()}}))).key=g,S);if(s.next(b),r){var m=u.createOperatorSubscriber(d,(function(){d.complete(),null==m||m.unsubscribe()}),void 0,void 0,(function(){return f.delete(a)}));y.add(i.innerFrom(r(b)).subscribe(m))}}d.next(l?l(t):t)}catch(e){p(e)}var g,w,S}),(function(){return d((function(e){return e.complete()}))}),p,(function(){return f.clear()}),(function(){return v=!0,0===h}));a.subscribe(y)}))}},586:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ignoreElements=void 0;var n=r(2724),i=r(5464),o=r(7310);t.ignoreElements=function(){return n.operate((function(e,t){e.subscribe(i.createOperatorSubscriber(t,o.noop))}))}},9238:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmpty=void 0;var n=r(2724),i=r(5464);t.isEmpty=function(){return n.operate((function(e,t){e.subscribe(i.createOperatorSubscriber(t,(function(){t.next(!1),t.complete()}),(function(){t.next(!0),t.complete()})))}))}},3763:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.joinAllInternals=void 0;var n=r(3555),i=r(1672),o=r(9433),a=r(439),u=r(6531);t.joinAllInternals=function(e,t){return o.pipe(u.toArray(),a.mergeMap((function(t){return e(t)})),t?i.mapOneOrManyArgs(t):n.identity)}},3782:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.last=void 0;var n=r(9137),i=r(1912),o=r(2337),a=r(596),u=r(2652),c=r(3555);t.last=function(e,t){var r=arguments.length>=2;return function(s){return s.pipe(e?i.filter((function(t,r){return e(t,r,s)})):c.identity,o.takeLast(1),r?u.defaultIfEmpty(t):a.throwIfEmpty((function(){return new n.EmptyError})))}}},3559:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.map=void 0;var n=r(2724),i=r(5464);t.map=function(e,t){return n.operate((function(r,n){var o=0;r.subscribe(i.createOperatorSubscriber(n,(function(r){n.next(e.call(t,r,o++))})))}))}},5691:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapTo=void 0;var n=r(3559);t.mapTo=function(e){return n.map((function(){return e}))}},5540:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.materialize=void 0;var n=r(2244),i=r(2724),o=r(5464);t.materialize=function(){return i.operate((function(e,t){e.subscribe(o.createOperatorSubscriber(t,(function(e){t.next(n.Notification.createNext(e))}),(function(){t.next(n.Notification.createComplete()),t.complete()}),(function(e){t.next(n.Notification.createError(e)),t.complete()})))}))}},9556:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.max=void 0;var n=r(985),i=r(4523);t.max=function(e){return n.reduce(i.isFunction(e)?function(t,r){return e(t,r)>0?t:r}:function(e,t){return e>t?e:t})}},5986:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.merge=void 0;var o=r(2724),a=r(1115),u=r(7610),c=r(9239),s=r(9752);t.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=c.popScheduler(e),l=c.popNumber(e,1/0);return e=a.argsOrArgArray(e),o.operate((function(t,o){u.mergeAll(l)(s.from(i([t],n(e)),r)).subscribe(o)}))}},7610:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeAll=void 0;var n=r(439),i=r(3555);t.mergeAll=function(e){return void 0===e&&(e=1/0),n.mergeMap(i.identity,e)}},9928:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeInternals=void 0;var n=r(4751),i=r(5850),o=r(5464);t.mergeInternals=function(e,t,r,a,u,c,s,l){var f=[],d=0,p=0,h=!1,v=function(){!h||f.length||d||t.complete()},y=function(e){return d<a?b(e):f.push(e)},b=function(e){c&&t.next(e),d++;var l=!1;n.innerFrom(r(e,p++)).subscribe(o.createOperatorSubscriber(t,(function(e){null==u||u(e),c?y(e):t.next(e)}),(function(){l=!0}),void 0,(function(){if(l)try{d--;for(var e=function(){var e=f.shift();s?i.executeSchedule(t,s,(function(){return b(e)})):b(e)};f.length&&d<a;)e();v()}catch(e){t.error(e)}})))};return e.subscribe(o.createOperatorSubscriber(t,y,(function(){h=!0,v()}))),function(){null==l||l()}}},439:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeMap=void 0;var n=r(3559),i=r(4751),o=r(2724),a=r(9928),u=r(4523);t.mergeMap=function e(t,r,c){return void 0===c&&(c=1/0),u.isFunction(r)?e((function(e,o){return n.map((function(t,n){return r(e,t,o,n)}))(i.innerFrom(t(e,o)))}),c):("number"==typeof r&&(c=r),o.operate((function(e,r){return a.mergeInternals(e,r,t,c)})))}},8614:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeMapTo=void 0;var n=r(439),i=r(4523);t.mergeMapTo=function(e,t,r){return void 0===r&&(r=1/0),i.isFunction(t)?n.mergeMap((function(){return e}),t,r):("number"==typeof t&&(r=t),n.mergeMap((function(){return e}),r))}},5974:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeScan=void 0;var n=r(2724),i=r(9928);t.mergeScan=function(e,t,r){return void 0===r&&(r=1/0),n.operate((function(n,o){var a=t;return i.mergeInternals(n,o,(function(t,r){return e(a,t,r)}),r,(function(e){a=e}),!1,void 0,(function(){return a=null}))}))}},1535:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.mergeWith=void 0;var o=r(5986);t.mergeWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.merge.apply(void 0,i([],n(e)))}},4603:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.min=void 0;var n=r(985),i=r(4523);t.min=function(e){return n.reduce(i.isFunction(e)?function(t,r){return e(t,r)<0?t:r}:function(e,t){return e<t?e:t})}},1662:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multicast=void 0;var n=r(1479),i=r(4523),o=r(7932);t.multicast=function(e,t){var r=i.isFunction(e)?e:function(){return e};return i.isFunction(t)?o.connect(t,{connector:r}):function(e){return new n.ConnectableObservable(e,r)}}},2027:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observeOn=void 0;var n=r(5850),i=r(2724),o=r(5464);t.observeOn=function(e,t){return void 0===t&&(t=0),i.operate((function(r,i){r.subscribe(o.createOperatorSubscriber(i,(function(r){return n.executeSchedule(i,e,(function(){return i.next(r)}),t)}),(function(){return n.executeSchedule(i,e,(function(){return i.complete()}),t)}),(function(r){return n.executeSchedule(i,e,(function(){return i.error(r)}),t)})))}))}},8042:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.onErrorResumeNext=t.onErrorResumeNextWith=void 0;var o=r(1115),a=r(4315);function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=o.argsOrArgArray(e);return function(e){return a.onErrorResumeNext.apply(void 0,i([e],n(r)))}}t.onErrorResumeNextWith=u,t.onErrorResumeNext=u},5551:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pairwise=void 0;var n=r(2724),i=r(5464);t.pairwise=function(){return n.operate((function(e,t){var r,n=!1;e.subscribe(i.createOperatorSubscriber(t,(function(e){var i=r;r=e,n&&t.next([i,e]),n=!0})))}))}},8580:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluck=void 0;var n=r(3559);t.pluck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.length;if(0===r)throw new Error("list of properties cannot be empty.");return n.map((function(t){for(var n=t,i=0;i<r;i++){var o=null==n?void 0:n[e[i]];if(void 0===o)return;n=o}return n}))}},3278:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.publish=void 0;var n=r(5558),i=r(1662),o=r(7932);t.publish=function(e){return e?function(t){return o.connect(e)(t)}:function(e){return i.multicast(new n.Subject)(e)}}},374:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.publishBehavior=void 0;var n=r(9949),i=r(1479);t.publishBehavior=function(e){return function(t){var r=new n.BehaviorSubject(e);return new i.ConnectableObservable(t,(function(){return r}))}}},9686:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.publishLast=void 0;var n=r(4199),i=r(1479);t.publishLast=function(){return function(e){var t=new n.AsyncSubject;return new i.ConnectableObservable(e,(function(){return t}))}}},9659:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.publishReplay=void 0;var n=r(378),i=r(1662),o=r(4523);t.publishReplay=function(e,t,r,a){r&&!o.isFunction(r)&&(a=r);var u=o.isFunction(r)?r:void 0;return function(r){return i.multicast(new n.ReplaySubject(e,t,a),u)(r)}}},4223:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.raceWith=void 0;var o=r(3903),a=r(2724),u=r(3555);t.raceWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length?a.operate((function(t,r){o.raceInit(i([t],n(e)))(r)})):u.identity}},985:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reduce=void 0;var n=r(2921),i=r(2724);t.reduce=function(e,t){return i.operate(n.scanInternals(e,t,arguments.length>=2,!1,!0))}},4256:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refCount=void 0;var n=r(2724),i=r(5464);t.refCount=function(){return n.operate((function(e,t){var r=null;e._refCount++;var n=i.createOperatorSubscriber(t,void 0,void 0,void 0,(function(){if(!e||e._refCount<=0||0<--e._refCount)r=null;else{var n=e._connection,i=r;r=null,!n||i&&n!==i||n.unsubscribe(),t.unsubscribe()}}));e.subscribe(n),n.closed||(r=e.connect())}))}},2717:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.repeat=void 0;var n=r(4025),i=r(2724),o=r(5464),a=r(4751),u=r(5635);t.repeat=function(e){var t,r,c=1/0;return null!=e&&("object"==typeof e?(t=e.count,c=void 0===t?1/0:t,r=e.delay):c=e),c<=0?function(){return n.EMPTY}:i.operate((function(e,t){var n,i=0,s=function(){if(null==n||n.unsubscribe(),n=null,null!=r){var e="number"==typeof r?u.timer(r):a.innerFrom(r(i)),c=o.createOperatorSubscriber(t,(function(){c.unsubscribe(),l()}));e.subscribe(c)}else l()},l=function(){var r=!1;n=e.subscribe(o.createOperatorSubscriber(t,void 0,(function(){++i<c?n?s():r=!0:t.complete()}))),r&&s()};l()}))}},6182:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.repeatWhen=void 0;var n=r(4751),i=r(5558),o=r(2724),a=r(5464);t.repeatWhen=function(e){return o.operate((function(t,r){var o,u,c=!1,s=!1,l=!1,f=function(){return l&&s&&(r.complete(),!0)},d=function(){l=!1,o=t.subscribe(a.createOperatorSubscriber(r,void 0,(function(){l=!0,!f()&&(u||(u=new i.Subject,n.innerFrom(e(u)).subscribe(a.createOperatorSubscriber(r,(function(){o?d():c=!0}),(function(){s=!0,f()})))),u).next()}))),c&&(o.unsubscribe(),o=null,c=!1,d())};d()}))}},1823:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.retry=void 0;var n=r(2724),i=r(5464),o=r(3555),a=r(5635),u=r(4751);t.retry=function(e){var t;void 0===e&&(e=1/0);var r=(t=e&&"object"==typeof e?e:{count:e}).count,c=void 0===r?1/0:r,s=t.delay,l=t.resetOnSuccess,f=void 0!==l&&l;return c<=0?o.identity:n.operate((function(e,t){var r,n=0,o=function(){var l=!1;r=e.subscribe(i.createOperatorSubscriber(t,(function(e){f&&(n=0),t.next(e)}),void 0,(function(e){if(n++<c){var f=function(){r?(r.unsubscribe(),r=null,o()):l=!0};if(null!=s){var d="number"==typeof s?a.timer(s):u.innerFrom(s(e,n)),p=i.createOperatorSubscriber(t,(function(){p.unsubscribe(),f()}),(function(){t.complete()}));d.subscribe(p)}else f()}else t.error(e)}))),l&&(r.unsubscribe(),r=null,o())};o()}))}},1026:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.retryWhen=void 0;var n=r(4751),i=r(5558),o=r(2724),a=r(5464);t.retryWhen=function(e){return o.operate((function(t,r){var o,u,c=!1,s=function(){o=t.subscribe(a.createOperatorSubscriber(r,void 0,void 0,(function(t){u||(u=new i.Subject,n.innerFrom(e(u)).subscribe(a.createOperatorSubscriber(r,(function(){return o?s():c=!0})))),u&&u.next(t)}))),c&&(o.unsubscribe(),o=null,c=!1,s())};s()}))}},741:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sample=void 0;var n=r(4751),i=r(2724),o=r(7310),a=r(5464);t.sample=function(e){return i.operate((function(t,r){var i=!1,u=null;t.subscribe(a.createOperatorSubscriber(r,(function(e){i=!0,u=e}))),n.innerFrom(e).subscribe(a.createOperatorSubscriber(r,(function(){if(i){i=!1;var e=u;u=null,r.next(e)}}),o.noop))}))}},844:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sampleTime=void 0;var n=r(8764),i=r(741),o=r(8160);t.sampleTime=function(e,t){return void 0===t&&(t=n.asyncScheduler),i.sample(o.interval(e,t))}},4125:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scan=void 0;var n=r(2724),i=r(2921);t.scan=function(e,t){return n.operate(i.scanInternals(e,t,arguments.length>=2,!0))}},2921:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scanInternals=void 0;var n=r(5464);t.scanInternals=function(e,t,r,i,o){return function(a,u){var c=r,s=t,l=0;a.subscribe(n.createOperatorSubscriber(u,(function(t){var r=l++;s=c?e(s,t,r):(c=!0,t),i&&u.next(s)}),o&&function(){c&&u.next(s),u.complete()}))}}},5963:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sequenceEqual=void 0;var n=r(2724),i=r(5464),o=r(4751);t.sequenceEqual=function(e,t){return void 0===t&&(t=function(e,t){return e===t}),n.operate((function(r,n){var a={buffer:[],complete:!1},u={buffer:[],complete:!1},c=function(e){n.next(e),n.complete()},s=function(e,r){var o=i.createOperatorSubscriber(n,(function(n){var i=r.buffer,o=r.complete;0===i.length?o?c(!1):e.buffer.push(n):!t(n,i.shift())&&c(!1)}),(function(){e.complete=!0;var t=r.complete,n=r.buffer;t&&c(0===n.length),null==o||o.unsubscribe()}));return o};r.subscribe(s(a,u)),o.innerFrom(e).subscribe(s(u,a))}))}},5542:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.share=void 0;var o=r(4751),a=r(5558),u=r(1873),c=r(2724);function s(e,t){for(var r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];if(!0!==t){if(!1!==t){var c=new u.SafeSubscriber({next:function(){c.unsubscribe(),e()}});return o.innerFrom(t.apply(void 0,i([],n(r)))).subscribe(c)}}else e()}t.share=function(e){void 0===e&&(e={});var t=e.connector,r=void 0===t?function(){return new a.Subject}:t,n=e.resetOnError,i=void 0===n||n,l=e.resetOnComplete,f=void 0===l||l,d=e.resetOnRefCountZero,p=void 0===d||d;return function(e){var t,n,a,l=0,d=!1,h=!1,v=function(){null==n||n.unsubscribe(),n=void 0},y=function(){v(),t=a=void 0,d=h=!1},b=function(){var e=t;y(),null==e||e.unsubscribe()};return c.operate((function(e,c){l++,h||d||v();var m=a=null!=a?a:r();c.add((function(){0!==--l||h||d||(n=s(b,p))})),m.subscribe(c),!t&&l>0&&(t=new u.SafeSubscriber({next:function(e){return m.next(e)},error:function(e){h=!0,v(),n=s(y,i,e),m.error(e)},complete:function(){d=!0,v(),n=s(y,f),m.complete()}}),o.innerFrom(e).subscribe(t))}))(e)}}},8061:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shareReplay=void 0;var n=r(378),i=r(5542);t.shareReplay=function(e,t,r){var o,a,u,c,s=!1;return e&&"object"==typeof e?(o=e.bufferSize,c=void 0===o?1/0:o,a=e.windowTime,t=void 0===a?1/0:a,s=void 0!==(u=e.refCount)&&u,r=e.scheduler):c=null!=e?e:1/0,i.share({connector:function(){return new n.ReplaySubject(c,t,r)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}},7613:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.single=void 0;var n=r(9137),i=r(3848),o=r(4890),a=r(2724),u=r(5464);t.single=function(e){return a.operate((function(t,r){var a,c=!1,s=!1,l=0;t.subscribe(u.createOperatorSubscriber(r,(function(n){s=!0,e&&!e(n,l++,t)||(c&&r.error(new i.SequenceError("Too many matching values")),c=!0,a=n)}),(function(){c?(r.next(a),r.complete()):r.error(s?new o.NotFoundError("No matching values"):new n.EmptyError)})))}))}},1789:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.skip=void 0;var n=r(1912);t.skip=function(e){return n.filter((function(t,r){return e<=r}))}},9796:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.skipLast=void 0;var n=r(3555),i=r(2724),o=r(5464);t.skipLast=function(e){return e<=0?n.identity:i.operate((function(t,r){var n=new Array(e),i=0;return t.subscribe(o.createOperatorSubscriber(r,(function(t){var o=i++;if(o<e)n[o]=t;else{var a=o%e,u=n[a];n[a]=t,r.next(u)}}))),function(){n=null}}))}},16:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.skipUntil=void 0;var n=r(2724),i=r(5464),o=r(4751),a=r(7310);t.skipUntil=function(e){return n.operate((function(t,r){var n=!1,u=i.createOperatorSubscriber(r,(function(){null==u||u.unsubscribe(),n=!0}),a.noop);o.innerFrom(e).subscribe(u),t.subscribe(i.createOperatorSubscriber(r,(function(e){return n&&r.next(e)})))}))}},614:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.skipWhile=void 0;var n=r(2724),i=r(5464);t.skipWhile=function(e){return n.operate((function(t,r){var n=!1,o=0;t.subscribe(i.createOperatorSubscriber(r,(function(t){return(n||(n=!e(t,o++)))&&r.next(t)})))}))}},846:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.startWith=void 0;var n=r(3251),i=r(9239),o=r(2724);t.startWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=i.popScheduler(e);return o.operate((function(t,i){(r?n.concat(e,t,r):n.concat(e,t)).subscribe(i)}))}},3344:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeOn=void 0;var n=r(2724);t.subscribeOn=function(e,t){return void 0===t&&(t=0),n.operate((function(r,n){n.add(e.schedule((function(){return r.subscribe(n)}),t))}))}},7286:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.switchAll=void 0;var n=r(7184),i=r(3555);t.switchAll=function(){return n.switchMap(i.identity)}},7184:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.switchMap=void 0;var n=r(4751),i=r(2724),o=r(5464);t.switchMap=function(e,t){return i.operate((function(r,i){var a=null,u=0,c=!1,s=function(){return c&&!a&&i.complete()};r.subscribe(o.createOperatorSubscriber(i,(function(r){null==a||a.unsubscribe();var c=0,l=u++;n.innerFrom(e(r,l)).subscribe(a=o.createOperatorSubscriber(i,(function(e){return i.next(t?t(r,e,l,c++):e)}),(function(){a=null,s()})))}),(function(){c=!0,s()})))}))}},3198:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.switchMapTo=void 0;var n=r(7184),i=r(4523);t.switchMapTo=function(e,t){return i.isFunction(t)?n.switchMap((function(){return e}),t):n.switchMap((function(){return e}))}},7485:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.switchScan=void 0;var n=r(7184),i=r(2724);t.switchScan=function(e,t){return i.operate((function(r,i){var o=t;return n.switchMap((function(t,r){return e(o,t,r)}),(function(e,t){return o=t,t}))(r).subscribe(i),function(){o=null}}))}},2642:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.take=void 0;var n=r(4025),i=r(2724),o=r(5464);t.take=function(e){return e<=0?function(){return n.EMPTY}:i.operate((function(t,r){var n=0;t.subscribe(o.createOperatorSubscriber(r,(function(t){++n<=e&&(r.next(t),e<=n&&r.complete())})))}))}},2337:function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.takeLast=void 0;var i=r(4025),o=r(2724),a=r(5464);t.takeLast=function(e){return e<=0?function(){return i.EMPTY}:o.operate((function(t,r){var i=[];t.subscribe(a.createOperatorSubscriber(r,(function(t){i.push(t),e<i.length&&i.shift()}),(function(){var e,t;try{for(var o=n(i),a=o.next();!a.done;a=o.next()){var u=a.value;r.next(u)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}r.complete()}),void 0,(function(){i=null})))}))}},2247:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.takeUntil=void 0;var n=r(2724),i=r(5464),o=r(4751),a=r(7310);t.takeUntil=function(e){return n.operate((function(t,r){o.innerFrom(e).subscribe(i.createOperatorSubscriber(r,(function(){return r.complete()}),a.noop)),!r.closed&&t.subscribe(r)}))}},1339:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.takeWhile=void 0;var n=r(2724),i=r(5464);t.takeWhile=function(e,t){return void 0===t&&(t=!1),n.operate((function(r,n){var o=0;r.subscribe(i.createOperatorSubscriber(n,(function(r){var i=e(r,o++);(i||t)&&n.next(r),!i&&n.complete()})))}))}},1119:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tap=void 0;var n=r(4523),i=r(2724),o=r(5464),a=r(3555);t.tap=function(e,t,r){var u=n.isFunction(e)||t||r?{next:e,error:t,complete:r}:e;return u?i.operate((function(e,t){var r;null===(r=u.subscribe)||void 0===r||r.call(u);var n=!0;e.subscribe(o.createOperatorSubscriber(t,(function(e){var r;null===(r=u.next)||void 0===r||r.call(u,e),t.next(e)}),(function(){var e;n=!1,null===(e=u.complete)||void 0===e||e.call(u),t.complete()}),(function(e){var r;n=!1,null===(r=u.error)||void 0===r||r.call(u,e),t.error(e)}),(function(){var e,t;n&&(null===(e=u.unsubscribe)||void 0===e||e.call(u)),null===(t=u.finalize)||void 0===t||t.call(u)})))})):a.identity}},5652:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throttle=void 0;var n=r(2724),i=r(5464),o=r(4751);t.throttle=function(e,t){return n.operate((function(r,n){var a=null!=t?t:{},u=a.leading,c=void 0===u||u,s=a.trailing,l=void 0!==s&&s,f=!1,d=null,p=null,h=!1,v=function(){null==p||p.unsubscribe(),p=null,l&&(m(),h&&n.complete())},y=function(){p=null,h&&n.complete()},b=function(t){return p=o.innerFrom(e(t)).subscribe(i.createOperatorSubscriber(n,v,y))},m=function(){if(f){f=!1;var e=d;d=null,n.next(e),!h&&b(e)}};r.subscribe(i.createOperatorSubscriber(n,(function(e){f=!0,d=e,(!p||p.closed)&&(c?m():b(e))}),(function(){h=!0,(!(l&&f&&p)||p.closed)&&n.complete()})))}))}},5355:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throttleTime=void 0;var n=r(8764),i=r(5652),o=r(5635);t.throttleTime=function(e,t,r){void 0===t&&(t=n.asyncScheduler);var a=o.timer(e,t);return i.throttle((function(){return a}),r)}},596:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throwIfEmpty=void 0;var n=r(9137),i=r(2724),o=r(5464);function a(){return new n.EmptyError}t.throwIfEmpty=function(e){return void 0===e&&(e=a),i.operate((function(t,r){var n=!1;t.subscribe(o.createOperatorSubscriber(r,(function(e){n=!0,r.next(e)}),(function(){return n?r.complete():r.error(e())})))}))}},671:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimeInterval=t.timeInterval=void 0;var n=r(8764),i=r(2724),o=r(5464);t.timeInterval=function(e){return void 0===e&&(e=n.asyncScheduler),i.operate((function(t,r){var n=e.now();t.subscribe(o.createOperatorSubscriber(r,(function(t){var i=e.now(),o=i-n;n=i,r.next(new a(t,o))})))}))};var a=function(e,t){this.value=e,this.interval=t};t.TimeInterval=a},1763:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timeout=t.TimeoutError=void 0;var n=r(8764),i=r(1022),o=r(2724),a=r(4751),u=r(1145),c=r(5464),s=r(5850);function l(e){throw new t.TimeoutError(e)}t.TimeoutError=u.createErrorClass((function(e){return function(t){void 0===t&&(t=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}})),t.timeout=function(e,t){var r=i.isValidDate(e)?{first:e}:"number"==typeof e?{each:e}:e,u=r.first,f=r.each,d=r.with,p=void 0===d?l:d,h=r.scheduler,v=void 0===h?null!=t?t:n.asyncScheduler:h,y=r.meta,b=void 0===y?null:y;if(null==u&&null==f)throw new TypeError("No timeout provided.");return o.operate((function(e,t){var r,n,i=null,o=0,l=function(e){n=s.executeSchedule(t,v,(function(){try{r.unsubscribe(),a.innerFrom(p({meta:b,lastValue:i,seen:o})).subscribe(t)}catch(e){t.error(e)}}),e)};r=e.subscribe(c.createOperatorSubscriber(t,(function(e){null==n||n.unsubscribe(),o++,t.next(i=e),f>0&&l(f)}),void 0,void 0,(function(){(null==n?void 0:n.closed)||null==n||n.unsubscribe(),i=null}))),!o&&l(null!=u?"number"==typeof u?u:+u-v.now():f)}))}},1467:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timeoutWith=void 0;var n=r(8764),i=r(1022),o=r(1763);t.timeoutWith=function(e,t,r){var a,u,c;if(r=null!=r?r:n.async,i.isValidDate(e)?a=e:"number"==typeof e&&(u=e),!t)throw new TypeError("No observable provided to switch to");if(c=function(){return t},null==a&&null==u)throw new TypeError("No timeout provided.");return o.timeout({first:a,each:u,scheduler:r,with:c})}},2574:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timestamp=void 0;var n=r(5138),i=r(3559);t.timestamp=function(e){return void 0===e&&(e=n.dateTimestampProvider),i.map((function(t){return{value:t,timestamp:e.now()}}))}},6531:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toArray=void 0;var n=r(985),i=r(2724),o=function(e,t){return e.push(t),e};t.toArray=function(){return i.operate((function(e,t){n.reduce(o,[])(e).subscribe(t)}))}},2949:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.window=void 0;var n=r(5558),i=r(2724),o=r(5464),a=r(7310),u=r(4751);t.window=function(e){return i.operate((function(t,r){var i=new n.Subject;r.next(i.asObservable());var c=function(e){i.error(e),r.error(e)};return t.subscribe(o.createOperatorSubscriber(r,(function(e){return null==i?void 0:i.next(e)}),(function(){i.complete(),r.complete()}),c)),u.innerFrom(e).subscribe(o.createOperatorSubscriber(r,(function(){i.complete(),r.next(i=new n.Subject)}),a.noop,c)),function(){null==i||i.unsubscribe(),i=null}}))}},4809:function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.windowCount=void 0;var i=r(5558),o=r(2724),a=r(5464);t.windowCount=function(e,t){void 0===t&&(t=0);var r=t>0?t:e;return o.operate((function(t,o){var u=[new i.Subject],c=0;o.next(u[0].asObservable()),t.subscribe(a.createOperatorSubscriber(o,(function(t){var a,s;try{for(var l=n(u),f=l.next();!f.done;f=l.next()){f.value.next(t)}}catch(e){a={error:e}}finally{try{f&&!f.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}var d=c-e+1;if(d>=0&&d%r==0&&u.shift().complete(),++c%r==0){var p=new i.Subject;u.push(p),o.next(p.asObservable())}}),(function(){for(;u.length>0;)u.shift().complete();o.complete()}),(function(e){for(;u.length>0;)u.shift().error(e);o.error(e)}),(function(){null,u=null})))}))}},3195:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.windowTime=void 0;var n=r(5558),i=r(8764),o=r(6775),a=r(2724),u=r(5464),c=r(3359),s=r(9239),l=r(5850);t.windowTime=function(e){for(var t,r,f=[],d=1;d<arguments.length;d++)f[d-1]=arguments[d];var p=null!==(t=s.popScheduler(f))&&void 0!==t?t:i.asyncScheduler,h=null!==(r=f[0])&&void 0!==r?r:null,v=f[1]||1/0;return a.operate((function(t,r){var i=[],a=!1,s=function(e){var t=e.window,r=e.subs;t.complete(),r.unsubscribe(),c.arrRemove(i,e),a&&f()},f=function(){if(i){var t=new o.Subscription;r.add(t);var a=new n.Subject,u={window:a,subs:t,seen:0};i.push(u),r.next(a.asObservable()),l.executeSchedule(t,p,(function(){return s(u)}),e)}};null!==h&&h>=0?l.executeSchedule(r,p,f,h,!0):a=!0,f();var d=function(e){return i.slice().forEach(e)},y=function(e){d((function(t){var r=t.window;return e(r)})),e(r),r.unsubscribe()};return t.subscribe(u.createOperatorSubscriber(r,(function(e){d((function(t){t.window.next(e),v<=++t.seen&&s(t)}))}),(function(){return y((function(e){return e.complete()}))}),(function(e){return y((function(t){return t.error(e)}))}))),function(){i=null}}))}},9934:function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.windowToggle=void 0;var i=r(5558),o=r(6775),a=r(2724),u=r(4751),c=r(5464),s=r(7310),l=r(3359);t.windowToggle=function(e,t){return a.operate((function(r,a){var f=[],d=function(e){for(;0<f.length;)f.shift().error(e);a.error(e)};u.innerFrom(e).subscribe(c.createOperatorSubscriber(a,(function(e){var r=new i.Subject;f.push(r);var n,p=new o.Subscription;try{n=u.innerFrom(t(e))}catch(e){return void d(e)}a.next(r.asObservable()),p.add(n.subscribe(c.createOperatorSubscriber(a,(function(){l.arrRemove(f,r),r.complete(),p.unsubscribe()}),s.noop,d)))}),s.noop)),r.subscribe(c.createOperatorSubscriber(a,(function(e){var t,r,i=f.slice();try{for(var o=n(i),a=o.next();!a.done;a=o.next()){a.value.next(e)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}}),(function(){for(;0<f.length;)f.shift().complete();a.complete()}),d,(function(){for(;0<f.length;)f.shift().unsubscribe()})))}))}},2962:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.windowWhen=void 0;var n=r(5558),i=r(2724),o=r(5464),a=r(4751);t.windowWhen=function(e){return i.operate((function(t,r){var i,u,c=function(e){i.error(e),r.error(e)},s=function(){var t;null==u||u.unsubscribe(),null==i||i.complete(),i=new n.Subject,r.next(i.asObservable());try{t=a.innerFrom(e())}catch(e){return void c(e)}t.subscribe(u=o.createOperatorSubscriber(r,s,s,c))};s(),t.subscribe(o.createOperatorSubscriber(r,(function(e){return i.next(e)}),(function(){i.complete(),r.complete()}),c,(function(){null==u||u.unsubscribe(),i=null})))}))}},2567:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.withLatestFrom=void 0;var o=r(2724),a=r(5464),u=r(4751),c=r(3555),s=r(7310),l=r(9239);t.withLatestFrom=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=l.popResultSelector(e);return o.operate((function(t,o){for(var l=e.length,f=new Array(l),d=e.map((function(){return!1})),p=!1,h=function(t){u.innerFrom(e[t]).subscribe(a.createOperatorSubscriber(o,(function(e){f[t]=e,p||d[t]||(d[t]=!0,(p=d.every(c.identity))&&(d=null))}),s.noop))},v=0;v<l;v++)h(v);t.subscribe(a.createOperatorSubscriber(o,(function(e){if(p){var t=i([e],n(f));o.next(r?r.apply(void 0,i([],n(t))):t)}})))}))}},5305:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.zip=void 0;var o=r(9852),a=r(2724);t.zip=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.operate((function(t,r){o.zip.apply(void 0,i([t],n(e))).subscribe(r)}))}},4387:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.zipAll=void 0;var n=r(9852),i=r(3763);t.zipAll=function(e){return i.joinAllInternals(n.zip,e)}},8738:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.zipWith=void 0;var o=r(5305);t.zipWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.zip.apply(void 0,i([],n(e)))}},5534:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scheduleArray=void 0;var n=r(6122);t.scheduleArray=function(e,t){return new n.Observable((function(r){var n=0;return t.schedule((function(){n===e.length?r.complete():(r.next(e[n++]),r.closed||this.schedule())}))}))}},2310:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scheduleAsyncIterable=void 0;var n=r(6122),i=r(5850);t.scheduleAsyncIterable=function(e,t){if(!e)throw new Error("Iterable cannot be null");return new n.Observable((function(r){i.executeSchedule(r,t,(function(){var n=e[Symbol.asyncIterator]();i.executeSchedule(r,t,(function(){n.next().then((function(e){e.done?r.complete():r.next(e.value)}))}),0,!0)}))}))}},9202:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scheduleIterable=void 0;var n=r(6122),i=r(6615),o=r(4523),a=r(5850);t.scheduleIterable=function(e,t){return new n.Observable((function(r){var n;return a.executeSchedule(r,t,(function(){n=e[i.iterator](),a.executeSchedule(r,t,(function(){var e,t,i;try{t=(e=n.next()).value,i=e.done}catch(e){return void r.error(e)}i?r.complete():r.next(t)}),0,!0)})),function(){return o.isFunction(null==n?void 0:n.return)&&n.return()}}))}},1101:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scheduleObservable=void 0;var n=r(4751),i=r(2027),o=r(3344);t.scheduleObservable=function(e,t){return n.innerFrom(e).pipe(o.subscribeOn(t),i.observeOn(t))}},2439:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.schedulePromise=void 0;var n=r(4751),i=r(2027),o=r(3344);t.schedulePromise=function(e,t){return n.innerFrom(e).pipe(o.subscribeOn(t),i.observeOn(t))}},8740:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scheduleReadableStreamLike=void 0;var n=r(2310),i=r(673);t.scheduleReadableStreamLike=function(e,t){return n.scheduleAsyncIterable(i.readableStreamLikeToAsyncGenerator(e),t)}},9931:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scheduled=void 0;var n=r(1101),i=r(2439),o=r(5534),a=r(9202),u=r(2310),c=r(4305),s=r(8983),l=r(1720),f=r(9923),d=r(6587),p=r(6680),h=r(673),v=r(8740);t.scheduled=function(e,t){if(null!=e){if(c.isInteropObservable(e))return n.scheduleObservable(e,t);if(l.isArrayLike(e))return o.scheduleArray(e,t);if(s.isPromise(e))return i.schedulePromise(e,t);if(d.isAsyncIterable(e))return u.scheduleAsyncIterable(e,t);if(f.isIterable(e))return a.scheduleIterable(e,t);if(h.isReadableStreamLike(e))return v.scheduleReadableStreamLike(e,t)}throw p.createInvalidObservableTypeError(e)}},3090:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.Action=void 0;var o=function(e){function t(t,r){return e.call(this)||this}return i(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(r(6775).Subscription);t.Action=o},95:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationFrameAction=void 0;var o=r(6385),a=r(6995),u=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n}return i(t,e),t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0?e.prototype.requestAsyncId.call(this,t,r,n):(t.actions.push(this),t._scheduled||(t._scheduled=a.animationFrameProvider.requestAnimationFrame((function(){return t.flush(void 0)}))))},t.prototype.recycleAsyncId=function(t,r,n){var i;if(void 0===n&&(n=0),null!=n?n>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,r,n);var o=t.actions;null!=r&&(null===(i=o[o.length-1])||void 0===i?void 0:i.id)!==r&&(a.animationFrameProvider.cancelAnimationFrame(r),t._scheduled=void 0)},t}(o.AsyncAction);t.AnimationFrameAction=u},2633:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationFrameScheduler=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.flush=function(e){this._active=!0;var t=this._scheduled;this._scheduled=void 0;var r,n=this.actions;e=e||n.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=n[0])&&e.id===t&&n.shift());if(this._active=!1,r){for(;(e=n[0])&&e.id===t&&n.shift();)e.unsubscribe();throw r}},t}(r(3509).AsyncScheduler);t.AnimationFrameScheduler=o},2880:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.AsapAction=void 0;var o=r(6385),a=r(3047),u=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n}return i(t,e),t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0?e.prototype.requestAsyncId.call(this,t,r,n):(t.actions.push(this),t._scheduled||(t._scheduled=a.immediateProvider.setImmediate(t.flush.bind(t,void 0))))},t.prototype.recycleAsyncId=function(t,r,n){var i;if(void 0===n&&(n=0),null!=n?n>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,r,n);var o=t.actions;null!=r&&(null===(i=o[o.length-1])||void 0===i?void 0:i.id)!==r&&(a.immediateProvider.clearImmediate(r),t._scheduled===r&&(t._scheduled=void 0))},t}(o.AsyncAction);t.AsapAction=u},1287:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.AsapScheduler=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.flush=function(e){this._active=!0;var t=this._scheduled;this._scheduled=void 0;var r,n=this.actions;e=e||n.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=n[0])&&e.id===t&&n.shift());if(this._active=!1,r){for(;(e=n[0])&&e.id===t&&n.shift();)e.unsubscribe();throw r}},t}(r(3509).AsyncScheduler);t.AsapScheduler=o},6385:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncAction=void 0;var o=r(3090),a=r(346),u=r(3359),c=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n.pending=!1,n}return i(t,e),t.prototype.schedule=function(e,t){var r;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(i,this.id,t),this},t.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),a.intervalProvider.setInterval(e.flush.bind(e,this),r)},t.prototype.recycleAsyncId=function(e,t,r){if(void 0===r&&(r=0),null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&a.intervalProvider.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var r,n=!1;try{this.work(e)}catch(e){n=!0,r=e||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,r=this.scheduler,n=r.actions;this.work=this.state=this.scheduler=null,this.pending=!1,u.arrRemove(n,this),null!=t&&(this.id=this.recycleAsyncId(r,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(o.Action);t.AsyncAction=c},3509:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncScheduler=void 0;var o=r(3597),a=function(e){function t(t,r){void 0===r&&(r=o.Scheduler.now);var n=e.call(this,t,r)||this;return n.actions=[],n._active=!1,n}return i(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}},t}(o.Scheduler);t.AsyncScheduler=a},3262:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.QueueAction=void 0;var o=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n}return i(t,e),t.prototype.schedule=function(t,r){return void 0===r&&(r=0),r>0?e.prototype.schedule.call(this,t,r):(this.delay=r,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,r){return r>0||this.closed?e.prototype.execute.call(this,t,r):this._execute(t,r)},t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!=n&&n>0||null==n&&this.delay>0?e.prototype.requestAsyncId.call(this,t,r,n):(t.flush(this),0)},t}(r(6385).AsyncAction);t.QueueAction=o},6056:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.QueueScheduler=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(r(3509).AsyncScheduler);t.QueueScheduler=o},9880:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.VirtualAction=t.VirtualTimeScheduler=void 0;var o=r(6385),a=r(6775),u=function(e){function t(t,r){void 0===t&&(t=c),void 0===r&&(r=1/0);var n=e.call(this,t,(function(){return n.frame}))||this;return n.maxFrames=r,n.frame=0,n.index=-1,n}return i(t,e),t.prototype.flush=function(){for(var e,t,r=this.actions,n=this.maxFrames;(t=r[0])&&t.delay<=n&&(r.shift(),this.frame=t.delay,!(e=t.execute(t.state,t.delay))););if(e){for(;t=r.shift();)t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(r(3509).AsyncScheduler);t.VirtualTimeScheduler=u;var c=function(e){function t(t,r,n){void 0===n&&(n=t.index+=1);var i=e.call(this,t,r)||this;return i.scheduler=t,i.work=r,i.index=n,i.active=!0,i.index=t.index=n,i}return i(t,e),t.prototype.schedule=function(r,n){if(void 0===n&&(n=0),Number.isFinite(n)){if(!this.id)return e.prototype.schedule.call(this,r,n);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(r,n)}return a.Subscription.EMPTY},t.prototype.requestAsyncId=function(e,r,n){void 0===n&&(n=0),this.delay=e.frame+n;var i=e.actions;return i.push(this),i.sort(t.sortActions),1},t.prototype.recycleAsyncId=function(e,t,r){void 0===r&&(r=0)},t.prototype._execute=function(t,r){if(!0===this.active)return e.prototype._execute.call(this,t,r)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(o.AsyncAction);t.VirtualAction=c},7261:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.animationFrame=t.animationFrameScheduler=void 0;var n=r(95),i=r(2633);t.animationFrameScheduler=new i.AnimationFrameScheduler(n.AnimationFrameAction),t.animationFrame=t.animationFrameScheduler},6995:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.animationFrameProvider=void 0;var o=r(6775);t.animationFrameProvider={schedule:function(e){var r=requestAnimationFrame,n=cancelAnimationFrame,i=t.animationFrameProvider.delegate;i&&(r=i.requestAnimationFrame,n=i.cancelAnimationFrame);var a=r((function(t){n=void 0,e(t)}));return new o.Subscription((function(){return null==n?void 0:n(a)}))},requestAnimationFrame:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=t.animationFrameProvider.delegate;return((null==o?void 0:o.requestAnimationFrame)||requestAnimationFrame).apply(void 0,i([],n(e)))},cancelAnimationFrame:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=t.animationFrameProvider.delegate;return((null==o?void 0:o.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,i([],n(e)))},delegate:void 0}},2760:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asap=t.asapScheduler=void 0;var n=r(2880),i=r(1287);t.asapScheduler=new i.AsapScheduler(n.AsapAction),t.asap=t.asapScheduler},8764:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.async=t.asyncScheduler=void 0;var n=r(6385),i=r(3509);t.asyncScheduler=new i.AsyncScheduler(n.AsyncAction),t.async=t.asyncScheduler},5138:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dateTimestampProvider=void 0,t.dateTimestampProvider={now:function(){return(t.dateTimestampProvider.delegate||Date).now()},delegate:void 0}},3047:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.immediateProvider=void 0;var o=r(7563),a=o.Immediate.setImmediate,u=o.Immediate.clearImmediate;t.immediateProvider={setImmediate:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=t.immediateProvider.delegate;return((null==o?void 0:o.setImmediate)||a).apply(void 0,i([],n(e)))},clearImmediate:function(e){var r=t.immediateProvider.delegate;return((null==r?void 0:r.clearImmediate)||u)(e)},delegate:void 0}},346:function(e,t){"use strict";var r=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},n=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.intervalProvider=void 0,t.intervalProvider={setInterval:function(e,i){for(var o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];var u=t.intervalProvider.delegate;return(null==u?void 0:u.setInterval)?u.setInterval.apply(u,n([e,i],r(o))):setInterval.apply(void 0,n([e,i],r(o)))},clearInterval:function(e){var r=t.intervalProvider.delegate;return((null==r?void 0:r.clearInterval)||clearInterval)(e)},delegate:void 0}},947:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.performanceTimestampProvider=void 0,t.performanceTimestampProvider={now:function(){return(t.performanceTimestampProvider.delegate||performance).now()},delegate:void 0}},1582:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.queue=t.queueScheduler=void 0;var n=r(3262),i=r(6056);t.queueScheduler=new i.QueueScheduler(n.QueueAction),t.queue=t.queueScheduler},3645:function(e,t){"use strict";var r=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},n=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.timeoutProvider=void 0,t.timeoutProvider={setTimeout:function(e,i){for(var o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];var u=t.timeoutProvider.delegate;return(null==u?void 0:u.setTimeout)?u.setTimeout.apply(u,n([e,i],r(o))):setTimeout.apply(void 0,n([e,i],r(o)))},clearTimeout:function(e){var r=t.timeoutProvider.delegate;return((null==r?void 0:r.clearTimeout)||clearTimeout)(e)},delegate:void 0}},6615:(e,t)=>{"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}Object.defineProperty(t,"__esModule",{value:!0}),t.iterator=t.getSymbolIterator=void 0,t.getSymbolIterator=r,t.iterator=r()},4847:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observable=void 0,t.observable="function"==typeof Symbol&&Symbol.observable||"@@observable"},8669:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1386:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ArgumentOutOfRangeError=void 0;var n=r(1145);t.ArgumentOutOfRangeError=n.createErrorClass((function(e){return function(){e(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}}))},9137:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyError=void 0;var n=r(1145);t.EmptyError=n.createErrorClass((function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}}))},7563:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TestTools=t.Immediate=void 0;var r,n=1,i={};function o(e){return e in i&&(delete i[e],!0)}t.Immediate={setImmediate:function(e){var t=n++;return i[t]=!0,r||(r=Promise.resolve()),r.then((function(){return o(t)&&e()})),t},clearImmediate:function(e){o(e)}},t.TestTools={pending:function(){return Object.keys(i).length}}},4890:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotFoundError=void 0;var n=r(1145);t.NotFoundError=n.createErrorClass((function(e){return function(t){e(this),this.name="NotFoundError",this.message=t}}))},3339:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectUnsubscribedError=void 0;var n=r(1145);t.ObjectUnsubscribedError=n.createErrorClass((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}))},3848:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SequenceError=void 0;var n=r(1145);t.SequenceError=n.createErrorClass((function(e){return function(t){e(this),this.name="SequenceError",this.message=t}}))},4376:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnsubscriptionError=void 0;var n=r(1145);t.UnsubscriptionError=n.createErrorClass((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}))},9239:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.popNumber=t.popScheduler=t.popResultSelector=void 0;var n=r(4523),i=r(6774);function o(e){return e[e.length-1]}t.popResultSelector=function(e){return n.isFunction(o(e))?e.pop():void 0},t.popScheduler=function(e){return i.isScheduler(o(e))?e.pop():void 0},t.popNumber=function(e,t){return"number"==typeof o(e)?e.pop():t}},6597:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.argsArgArrayOrObject=void 0;var r=Array.isArray,n=Object.getPrototypeOf,i=Object.prototype,o=Object.keys;t.argsArgArrayOrObject=function(e){if(1===e.length){var t=e[0];if(r(t))return{args:t,keys:null};if((u=t)&&"object"==typeof u&&n(u)===i){var a=o(t);return{args:a.map((function(e){return t[e]})),keys:a}}}var u;return{args:e,keys:null}}},1115:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.argsOrArgArray=void 0;var r=Array.isArray;t.argsOrArgArray=function(e){return 1===e.length&&r(e[0])?e[0]:e}},3359:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrRemove=void 0,t.arrRemove=function(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}},1145:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createErrorClass=void 0,t.createErrorClass=function(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}},5689:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createObject=void 0,t.createObject=function(e,t){return e.reduce((function(e,r,n){return e[r]=t[n],e}),{})}},89:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.captureError=t.errorContext=void 0;var n=r(4560),i=null;t.errorContext=function(e){if(n.config.useDeprecatedSynchronousErrorHandling){var t=!i;if(t&&(i={errorThrown:!1,error:null}),e(),t){var r=i,o=r.errorThrown,a=r.error;if(i=null,o)throw a}}else e()},t.captureError=function(e){n.config.useDeprecatedSynchronousErrorHandling&&i&&(i.errorThrown=!0,i.error=e)}},5850:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.executeSchedule=void 0,t.executeSchedule=function(e,t,r,n,i){void 0===n&&(n=0),void 0===i&&(i=!1);var o=t.schedule((function(){r(),i?e.add(this.schedule(null,n)):this.unsubscribe()}),n);if(e.add(o),!i)return o}},3555:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.identity=void 0,t.identity=function(e){return e}},1720:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isArrayLike=void 0,t.isArrayLike=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e}},6587:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAsyncIterable=void 0;var n=r(4523);t.isAsyncIterable=function(e){return Symbol.asyncIterator&&n.isFunction(null==e?void 0:e[Symbol.asyncIterator])}},1022:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isValidDate=void 0,t.isValidDate=function(e){return e instanceof Date&&!isNaN(e)}},4523:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFunction=void 0,t.isFunction=function(e){return"function"==typeof e}},4305:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isInteropObservable=void 0;var n=r(4847),i=r(4523);t.isInteropObservable=function(e){return i.isFunction(e[n.observable])}},9923:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isIterable=void 0;var n=r(6615),i=r(4523);t.isIterable=function(e){return i.isFunction(null==e?void 0:e[n.iterator])}},5708:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isObservable=void 0;var n=r(6122),i=r(4523);t.isObservable=function(e){return!!e&&(e instanceof n.Observable||i.isFunction(e.lift)&&i.isFunction(e.subscribe))}},8983:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPromise=void 0;var n=r(4523);t.isPromise=function(e){return n.isFunction(null==e?void 0:e.then)}},673:function(e,t,r){"use strict";var n=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},i=this&&this.__await||function(e){return this instanceof i?(this.v=e,this):new i(e)},o=this&&this.__asyncGenerator||function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),a=[];return n={},u("next"),u("throw"),u("return"),n[Symbol.asyncIterator]=function(){return this},n;function u(e){o[e]&&(n[e]=function(t){return new Promise((function(r,n){a.push([e,t,r,n])>1||c(e,t)}))})}function c(e,t){try{(r=o[e](t)).value instanceof i?Promise.resolve(r.value.v).then(s,l):f(a[0][2],r)}catch(e){f(a[0][3],e)}var r}function s(e){c("next",e)}function l(e){c("throw",e)}function f(e,t){e(t),a.shift(),a.length&&c(a[0][0],a[0][1])}};Object.defineProperty(t,"__esModule",{value:!0}),t.isReadableStreamLike=t.readableStreamLikeToAsyncGenerator=void 0;var a=r(4523);t.readableStreamLikeToAsyncGenerator=function(e){return o(this,arguments,(function(){var t,r,o;return n(this,(function(n){switch(n.label){case 0:t=e.getReader(),n.label=1;case 1:n.trys.push([1,,9,10]),n.label=2;case 2:return[4,i(t.read())];case 3:return r=n.sent(),o=r.value,r.done?[4,i(void 0)]:[3,5];case 4:return[2,n.sent()];case 5:return[4,i(o)];case 6:return[4,n.sent()];case 7:return n.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))},t.isReadableStreamLike=function(e){return a.isFunction(null==e?void 0:e.getReader)}},6774:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isScheduler=void 0;var n=r(4523);t.isScheduler=function(e){return e&&n.isFunction(e.schedule)}},2724:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.operate=t.hasLift=void 0;var n=r(4523);function i(e){return n.isFunction(null==e?void 0:e.lift)}t.hasLift=i,t.operate=function(e){return function(t){if(i(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}},1672:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.mapOneOrManyArgs=void 0;var o=r(3559),a=Array.isArray;t.mapOneOrManyArgs=function(e){return o.map((function(t){return function(e,t){return a(t)?e.apply(void 0,i([],n(t))):e(t)}(e,t)}))}},7310:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.noop=void 0,t.noop=function(){}},9823:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.not=void 0,t.not=function(e,t){return function(r,n){return!e.call(t,r,n)}}},9433:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pipeFromArray=t.pipe=void 0;var n=r(3555);function i(e){return 0===e.length?n.identity:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}t.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i(e)},t.pipeFromArray=i},7405:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reportUnhandledError=void 0;var n=r(4560),i=r(3645);t.reportUnhandledError=function(e){i.timeoutProvider.setTimeout((function(){var t=n.config.onUnhandledError;if(!t)throw e;t(e)}))}},6680:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createInvalidObservableTypeError=void 0,t.createInvalidObservableTypeError=function(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}},602:e=>{"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const r=e.indexOf(t);return-1===r?[e]:[e.slice(0,r),e.slice(r+t.length)]}},1737:(e,t)=>{!function(){var e={6063:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function u(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}c((n=n.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(c){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=c(r(9616)),l=c(r(5707)),f=o(r(4349)),d=c(r(3654)),p=r(9047),h=c(r(1423)),v=r(5755),y=r(3126),b=r(8265),m=function(){function e(){this.clientMap=new Map,this.workerMap=new Map}return e.prototype.init=function(e){var t=this;if(this.options=e,e.printValueChange&&(0,f.setPrintValueChange)(e.printValueChange),e.printWrite&&(0,f.setPrintWrite)(e.printWrite),e.logger&&(0,f.setLogger)(e.logger),(0,p.setBluetooth)(e.bluetooth),(0,y.initOnBluetoothAdapterStateChange)(),(0,b.initOnBLEConnectionStateChange)(),(0,b.initOnBLECharacteristicValueChange)(),s.default[e.platform]){var r=s.default[e.platform],n=r.Adapter,i=r.Client;return this.adapter=new n,this.adapter.addStateChangeListener((function(e){return e.available||(t.clientMap.clear(),t.workerMap.clear()),!1})),this.newClient=function(e){return new i(e)},!1!==e.openBLEAdapter?this.adapter.available?Promise.resolve(l.default.success()):this.adapter.openBLEAdapter():Promise.resolve(l.default.success())}f.default.error("not support platform: ",s.default.wx,e.platform)},e.prototype.connectDevice=function(e,t){var r=this;void 0===t&&(t=1e4);var n=this.options.discoverDelay,i=function(i){return i.connect(t).then((function(t){return i.discoverServices(void 0===n?300:n).catch((function(t){return i.discoverServices(1e3).catch((function(t){return r.disconnectDevice(e),Promise.reject(t)}))}))}))};if(this.clientMap.has(e)){var o=this.clientMap.get(e);return o&&!o.connected?i(o):Promise.resolve(l.default.success())}var a=this.newClient(e);return this.clientMap.set(e,a),null==a||a.addConnectionChangeListener((function(e){return!e.connected&&(setTimeout((function(){var t=r.workerMap.get(e.deviceId);t&&(t.recycle(),r.workerMap.delete(e.deviceId)),a.recycle(),r.clientMap.delete(e.deviceId)}),0),!0)})),i(a)},e.prototype.disconnectDevice=function(e){var t=this.clientMap.get(e);this.clientMap.delete(e);var r=this.workerMap.get(e);if(null==r||r.recycle(),this.workerMap.delete(e),t)return t.disconnect()},e.prototype.bindDevice=function(e,t){var r=this.clientMap.get(e);if(!r)return Promise.reject(l.default.fail("no client for:"+e));if(!r.connected)return Promise.reject(l.default.fail("client disconnect for:"+e));f.default.debug("scanResult",t.scanResult),t.scanResult&&(0,p.getBluetooth)().setStorage({key:t.scanResult.mac,data:e});var n=h.default.getProtocolByServices(r.services);if(!n)return f.default.error("not suport services",r.services),Promise.reject(l.default.fail("no support protocol:"+e));f.default.debug("current bind UUID",n.uuid);var i=new d.default(r,n.bind,n.uuid);return this.workerMap.set(e,i),i.process(t)},e.prototype.startDataSync=function(e,t){var r=this.clientMap.get(e);if(!r)return Promise.reject(l.default.fail("no client for:"+e));if(!r.connected)return Promise.reject(l.default.fail("client disconnect for:"+e));var n=h.default.getProtocolByServices(r.services);if(!n)return f.default.error("not suport services",r.services),Promise.reject(l.default.fail("no support protocol:"+e));f.default.debug("current sync UUID",n.uuid);var i=this.workerMap.get(e);i&&(i.recycle(),this.workerMap.delete(e));var o=new d.default(r,n.sync,n.uuid);return this.workerMap.set(e,o),o.process(t)},e.prototype.readDeviceInfo=function(e,t){return a(this,void 0,void 0,(function(){var r;return u(this,(function(n){return(r=this.clientMap.get(e))?r.connected?[2,h.default.getProtocolByServices(r.services).readDeviceInfo.readDeviceInfo(r,t)]:[2,Promise.reject(l.default.fail("client disconnect for:"+e))]:[2,Promise.reject(l.default.fail("no client for:"+e))]}))}))},e.prototype.startDeviceUpgrade=function(e,t){var r=this.clientMap.get(e);if(!r)return Promise.reject(l.default.fail("no client for:"+e));if(!r.connected)return Promise.reject(l.default.fail("client disconnect for:"+e));var n=h.default.getProtocolByServices(r.services);if(!n)return f.default.error("device upgrade not suport services",r.services),Promise.reject(l.default.fail("no support protocol:"+e));f.default.debug("current ota UUID",n.uuid);var i=this.workerMap.get(e);i&&(i.recycle(),this.workerMap.delete(e));var o=new d.default(r,n.ota,n.uuid);this.workerMap.set(e,o);var a={upgradeInfo:t};return o.process(a)},e.prototype.send=function(e,t){return a(this,void 0,void 0,(function(){var r,n,i,o,a=this;return u(this,(function(u){return r=this.clientMap.get(e),n=this.workerMap.get(e),r?r.connected?(t.setEncoder&&t.setEncoder(n.encoder),null,i=t.await?new Promise((function(r,n){var i=!1,o=setTimeout((function(){i=!0,n(l.default.fail("request timeout: ",t))}),t.await.timeout||1e4);a.workerMap.get(e).decoder.addDataChangeListener(t.await.eventName,(function(e,a){if(i)return!0;clearTimeout(o);var u=t.await.onDataChange(e,a);return!!u.isConsumer&&(setTimeout((function(){u.isSucceed?r(l.default.success(t)):(f.default.error("send fail",t.getCmd(),(0,v.ab2hex)(e)),n(l.default.fail("error response: ",(0,v.ab2hex)(e))))}),0),!0)}))})):Promise.resolve(l.default.success()),o=t.getBytes(),r.writeList(t.serviceId,t.characteristicId,o),[2,i]):[2,Promise.reject(l.default.fail("client disconnect for:"+e))]:[2,Promise.reject(l.default.fail("no client for:"+e))]}))}))},e}();t.default=new m},9433:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GpsManager=t.GpsStatus=void 0;var i,o=n(r(3701)),a=n(r(6538)),u=r(8192),c=n(r(1795)),s=n(r(4349)),l=n(r(5883)),f=n(r(6063)),d=1e6,p=s.default;!function(e){e[e.Enabled=1]="Enabled",e[e.NoPermission=2]="NoPermission",e[e.Close=3]="Close"}(i=t.GpsStatus||(t.GpsStatus={}));var h=function(){function e(e){this.deviceGpsMap=new Map,this.options=e}return Object.defineProperty(e.prototype,"deviceIds",{get:function(){return Array.from(this.deviceGpsMap.keys())},enumerable:!1,configurable:!0}),e.prototype.receiveDeviceGpsSwitch=function(e){var t=this,r=e.deviceId,n=e.categoryId,i=e.commandId,o=e.seq,a=e.gpsSwitch,c=e.gpsStatus;p.info("收到gpsSwitch",a);var s=a.GpsEnable;if(1===s||4===s)return this._sendGpsSwitchRsp({deviceId:r,errorCode:this._getRspCode(c),categoryId:n,commandId:i,seq:o}),(f=this.deviceGpsMap.get(r))||(f=new v({deviceId:r,timeout:a.Timeout,interval:a.Interval,getGpsInfo:function(){return t.options.getGpsInfo({deviceId:r})}}),this.deviceGpsMap.set(r,f)),void this.options.onStartRequest({deviceId:r,gpsSwitch:a,deviceIds:this.deviceIds});if(2===s||3===s){if(this._sendGpsSwitchRsp({deviceId:r,errorCode:u.AliceErrorCode.RET_GE_SUCCESS,categoryId:n,commandId:i,seq:o}),2===s);else{var l=a.trackID;p.debug("trackID:",l)}var f;return(f=this.deviceGpsMap.get(r))&&(f.stop(),this.deviceGpsMap.delete(r)),p.info("收到设备结束:",s),void this.options.onStopRequest({deviceId:r,gpsSwitch:a,deviceIds:this.deviceIds})}},e.prototype._sendGpsSwitchRsp=function(e){var t=e.deviceId,r=e.errorCode,n=e.categoryId,i=e.commandId,o=e.seq,u={ErrorCode:r},s=c.default.encodePb(a.default,"ErrorCode_t",u),d=new l.default(n,i+128,s,o);return f.default.send(t,d)},e.prototype._getRspCode=function(e){return e===i.Enabled?u.AliceErrorCode.RET_GE_SUCCESS:e===i.NoPermission?1003002:1003001},e}();t.GpsManager=h;var v=function(){function e(e){this.deviceId=e.deviceId,this.interval=1e3*Math.max(e.interval||1,1),this.timeout=(new Date).getTime()+1e3*e.timeout*60,this.getGpsInfo=e.getGpsInfo,this.gpsInfoList=[],this.lastLocationInfo=null,this.currentDistance=0,this.start()}return e.prototype.start=function(){var e=this;this.intervalId=setInterval((function(){if(e.timeout>(new Date).getTime())e.stop();else{var t=e.getGpsInfo();e.didRecievedLocationInfo(t)}}),this.interval)},e.prototype.stop=function(){clearInterval(this.intervalId)},e.prototype.didRecievedLocationInfo=function(e){var t=e.locationInfo,r=e.gpsStatus;p.debug("didRecievedLocationInfo:",t,r);var n={StateCode:0};return r!==i.Enabled?(n.StateCode=0,void this.send(n)):this.checkLocationInfo(t)?(n.TimesTamp=Math.round(t.time/1e3),t.speed>.1?(n.Speed=t.speed,n.InvertSpeed=1e3/t.speed):n.Speed=0,t.accuracy>30?n.StateCode=2:n.StateCode=3,this.lastLocationInfo&&this.gpsInfoList.length>0?t.distance=function(e,t,r,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),void 0===n&&(n=0);var i=t*Math.PI/180,o=n*Math.PI/180,a=i-o,u=e*Math.PI/180-r*Math.PI/180;return parseInt((12756274*Math.asin(Math.sqrt(Math.pow(Math.sin(a/2),2)+Math.cos(i)*Math.cos(o)*Math.pow(Math.sin(u/2),2)))).toFixed(2),10)}(t.longitude,t.latitude,this.lastLocationInfo.longitude,this.lastLocationInfo.latitude):(p.info("第一个轨迹点:",t),t.distance=0),this.getIsUpdate(t)&&this.gpsInfoList.push(t),this.lastLocationInfo=t,n.Distance=t.distance,n.Longitude=t.longitude*d,n.Latitude=t.latitude*d,n.Altitude=t.altitude,n.Precision=100*t.accuracy,this.currentDistance=parseFloat(n.Distance)+this.currentDistance,void this.send(n)):(n.StateCode=1,void this.send(n))},e.prototype.checkLocationInfo=function(e){return!!e&&(p.debug("gsp经纬度为0"),0!==(e.latitude||0))},e.prototype.getIsUpdate=function(e){return this.lastLocationInfo&&this.lastLocationInfo.time===e.time?(p.debug("gps时间和上一笔相同"),!1):!this.lastLocationInfo||this.lastLocationInfo.latitude!==e.latitude||this.lastLocationInfo.longitude!==e.longitude||(p.debug("gsp经纬度和上一笔相同"),!1)},e.prototype.send=function(e){p.info("下发Gsp:","累记距离:",this.currentDistance,e);var t=c.default.encodePb(o.default,"GpsLocationRsp_t",e),r=new l.default(u.AliceCategory.SportType.cmd,u.AliceCategory.SportType.sendGpsSwitchRsp,t);f.default.send(this.deviceId,r).then((function(e){p.info("send gps data response",e)})).catch((function(e){p.error("send gps data error",e)}))},e}()},6779:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Platform=void 0,function(e){e[e.unknown=0]="unknown",e[e.android=1]="android",e[e.ios=2]="ios"}(t.Platform||(t.Platform={}))},398:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionType=void 0,function(e){e[e.None=0]="None",e[e.Read=1]="Read",e[e.Write=2]="Write",e[e.Enable=3]="Enable",e[e.Indicate=4]="Indicate",e[e.Disable=5]="Disable",e[e.DataSync=6]="DataSync",e[e.SetMtu=7]="SetMtu",e[e.SendFile=8]="SendFile"}(t.ActionType||(t.ActionType={}))},9799:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t=e.uuid,r=e.isPrimary;this.uuid=t.toUpperCase(),this.isPrimary=r,this.characteristics=[]}},5707:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,r,n){this.success=e,this.msg=t,this.value=n,this.originResponse=r,this.data=r}return e.success=function(t,r){return void 0===t&&(t=null),void 0===r&&(r=null),new e(!0,"success",t,r)},e.fail=function(t,r,n){return void 0===t&&(t=""),void 0===r&&(r=null),void 0===n&&(n=null),new e(!1,t,r,n)},e.failCode=function(t,r,n,i){void 0===t&&(t=-1),void 0===r&&(r=""),void 0===n&&(n=null),void 0===i&&(i=null);var o=new e(!1,r,n,i);return o.code=t,o},e}();t.default=r},8848:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScanMode=void 0,function(e){e[e.ALL=0]="ALL",e[e.Normal=1]="Normal"}(t.ScanMode||(t.ScanMode={}))},3654:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function u(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(c){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=r(398),c=a(r(5707)),s=a(r(4349)),l=function(){function e(e,t,r){var n=this;this.currentStep=0,this.mtu=23,this.client=e,this.isRecycle=!1,this.protocol=t,this.uuid=r,t.uuid=r,this.protocolName=r+"_"+t.protocolType,this.actions=t.actions,this.encoder=t.encoder,this.decoder=t.decoder,this.dataBuilder=t.dataBuilder,this.dataBuilder&&(this.dataBuilder.client=e,this.dataBuilder.deviceId=e.deviceId),this.client.addDataChangeListener(this.protocolName,(function(e){return!!n.isRecycle||(n.client.connected?(n.decoder.decode(e),!1):(setTimeout((function(){n.recycle()}),0),!0))}))}return e.prototype.recycle=function(){this.isRecycle=!0,this.client.removeDataChangeListener(this.protocolName)},e.prototype.process=function(e){return n(this,void 0,void 0,(function(){var t,r,n;return i(this,(function(i){switch(i.label){case 0:return this.isRecycle?(s.default.error("已经recycle"),[2,Promise.reject(c.default.fail("当前worker已回收"))]):(this.dataBuilder&&(this.dataBuilder.onDataReport=e.listeners.onDataReport,this.dataBuilder.context=e),this.currentAction=this.actions[this.currentStep],this.currentAction?this.currentAction.when&&!this.currentAction.when(e)?[3,6]:(s.default.debug("*********".concat(this.currentAction.name,"**********")),this.currentAction.await?(t=this.waitCondition(e),s.default.debug("Step",this.currentStep,"await 执行动作",this.currentAction.name),[4,this.doAction(this.currentAction,e)]):[3,3]):(s.default.debug("协议执行完毕"),[2,Promise.resolve(c.default.success())]));case 1:return i.sent(),s.default.debug("Step",this.currentStep,this.currentAction.name,"等待条件"),[4,t];case 2:return i.sent(),s.default.debug("Step",this.currentStep,this.currentAction.name,"条件通过"),[3,5];case 3:return s.default.debug("Step",this.currentStep,this.currentAction.name,"执行动作"),[4,this.doAction(this.currentAction,e)];case 4:i.sent(),i.label=5;case 5:return[3,7];case 6:s.default.debug("跳过动作 skip action: ",this.currentAction.name),i.label=7;case 7:return this.currentAction.next?(r=this.currentAction.next(e),(n=this.actions.findIndex((function(e){return e.name===r})))>=0?this.currentStep=n:(s.default.error("nextActionName is error",r,this.currentStep),this.currentStep++)):this.currentStep++,[4,this.process(e)];case 8:return[2,i.sent()]}}))}))},e.prototype.doAction=function(e,t){return n(this,void 0,void 0,(function(){var r,n,a,c,l,f,d,p,h,v,y,b,m,g,w,S=this;return i(this,(function(i){switch(i.label){case 0:switch(r=e.serviceId,n=e.characteristicId,a=e.mtu,e.actionType){case u.ActionType.None:return[3,1];case u.ActionType.DataSync:return[3,2];case u.ActionType.Enable:return[3,3];case u.ActionType.Indicate:return[3,5];case u.ActionType.Disable:return[3,7];case u.ActionType.Read:return[3,8];case u.ActionType.SetMtu:return[3,9];case u.ActionType.Write:return[3,11]}return[3,22];case 1:return[2];case 2:return this.decoder.addDataChangeListener("data",(function(e,t){return!!S.isRecycle||(setTimeout((function(){if(S.dataBuilder){var r=S.dataBuilder.receiveData(e,t);r&&S.dataBuilder.onDataReport(r)}}),0),!1)})),[2];case 3:return[4,this.client.enable(r,n)];case 4:return[2,i.sent()];case 5:return[4,this.client.enable(r,n,!0)];case 6:return[2,i.sent()];case 7:return[2,this.client.disable(r,n)];case 8:return[2,this.client.read(r,n)];case 9:return s.default.log("SetMtu:"+a),[4,this.client.setMtu(a,t.platform)];case 10:return(c=i.sent()).originResponse&&(this.mtu=c.originResponse.mtu),s.default.log("SetMtu done:"+this.mtu,t.platform),t.mtu=this.mtu,[2];case 11:return l=e.value(t),f=[],l instanceof ArrayBuffer?(f=this.encoder.encode(l,e.writeTag),[3,15]):[3,12];case 12:return l instanceof Array?(f=l,[3,15]):[3,13];case 13:return p=(d=this.encoder).encode,[4,l];case 14:f=p.apply(d,[i.sent(),e.writeTag]),i.label=15;case 15:i.trys.push([15,20,21,22]),h=o(f),v=h.next(),i.label=16;case 16:return v.done?[3,19]:(y=v.value,[4,this.client.write(r,n,y)]);case 17:if(!(b=i.sent()).success)return[2,Promise.reject(b)];i.label=18;case 18:return v=h.next(),[3,16];case 19:return[3,22];case 20:return m=i.sent(),g={error:m},[3,22];case 21:try{v&&!v.done&&(w=h.return)&&w.call(h)}finally{if(g)throw g.error}return[7];case 22:return[2]}}))}))},e.prototype.waitCondition=function(e){var t=this,r=this.currentAction.await,n=r.timeout,i=r.onDataChange,o=r.eventName,a=r.onTimeout,u=this.encoder;return new Promise((function(r,l){var f=setTimeout((function(){s.default.error("动作await超时:"+t.currentAction.name+" time:"+n),(null==a?void 0:a(e))?r(c.default.success("await超时，执行超时回调，当前动作：",t.currentAction.name)):l(c.default.fail("await超时，当前动作: ",t.currentAction.name))}),n||1e4);t.decoder.addDataChangeListener(o,(function(t,n){clearTimeout(f);var o=i(t,e,u,n);return!0===o?setTimeout((function(){r(c.default.success())}),0):!1===o?setTimeout((function(){l(c.default.fail("await条件失败，value: ",t))}),0):o.success?setTimeout((function(){r(o)}),0):setTimeout((function(){l(o)}),0),!0}))}))},e}();t.default=l},9616:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(3126)),o=n(r(8265));t.default={wx:{Adapter:i.default,Client:o.default}}},3126:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.initOnBluetoothAdapterStateChange=void 0;var i=n(r(4349)),o=n(r(5707)),a=r(9047),u=[];t.initOnBluetoothAdapterStateChange=function(){(0,a.getBluetooth)().onBluetoothAdapterStateChange((function(e){var t=[];i.default.debug("onBluetoothAdapterStateChange:",e),u.forEach((function(r){var n=r.cb;n&&(n(e)||t.push({cb:n}))})),u=t}))};var c=function(){function e(){var e=this;this.available=!1,this.addStateChangeListener((function(t){return e.updateAvailable(t.available,(new Date).getTime()),!1})),this.getBLEAdapterState()}return e.prototype.addStateChangeListener=function(e){u.push({cb:e})},e.prototype.openBLEAdapter=function(){var e=this;return new Promise((function(t,r){var n=function(e,n){e?t(o.default.success()):r(o.default.fail("打开适配器失败",n))};(0,a.getBluetooth)().openBluetoothAdapter({success:function(){i.default.debug("开启蓝牙适配器"),e.getBLEAdapterState(n)},fail:function(r){i.default.error("开启蓝牙适配器失败",r.errCode,r.errMsg),e.getBLEAdapterState((function(r){r?t(o.default.success()):e.reopenBLEAdapter(n)}))}})}))},e.prototype.reopenBLEAdapter=function(e){var t=this;i.default.debug("重启蓝牙适配器"),(0,a.getBluetooth)().closeBluetoothAdapter({success:function(){},complete:function(){(0,a.getBluetooth)().openBluetoothAdapter({success:function(){},complete:function(){t.getBLEAdapterState(e)}})}})},e.prototype.getBLEAdapterState=function(e){var t=this,r=(new Date).getTime();(0,a.getBluetooth)().getBluetoothAdapterState({success:function(n){t.updateAvailable(n.available,r),null==e||e(t.available,n)},fail:function(n){t.updateAvailable(!1,r),i.default.error("getBluetoothAdapterState失败"),null==e||e(!1,n)}})},e.prototype.updateAvailable=function(e,t){this.updateAvailableTs&&this.updateAvailableTs>t||(this.available=e,this.updateAvailableTs=t)},e}();t.default=c},8265:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function u(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}c((n=n.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(c){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.initOnBLECharacteristicValueChange=t.initOnBLEConnectionStateChange=void 0;var s=c(r(9799)),l=o(r(4349)),f=c(r(5707)),d=r(6779),p=r(5755),h=r(9047),v=new Map;t.initOnBLEConnectionStateChange=function(){(0,h.getBluetooth)().onBLEConnectionStateChange((function(e){if(v.has(e.deviceId)){var t=v.get(e.deviceId);l.default.info("connection state change:",e,t.length);var r=[];t.forEach((function(t){var n=t.cb;n&&(n({connected:e.connected,deviceId:e.deviceId})||r.push({cb:n}))})),v.set(e.deviceId,r)}}))};var y=new Map;t.initOnBLECharacteristicValueChange=function(){(0,h.getBluetooth)().onBLECharacteristicValueChange((function(e){var t=y.get(e.deviceId);t&&((0,l.isPrintValueChange)()&&l.default.debug("Frame Data","["+(0,p.subUUID)(e.characteristicId)+"]",(0,p.ab2hex)(e.value)),t(e))}))};var b=function(){function e(e){var t=this;this.writBufferQueue=[],this.deviceId=e,this.performance={},this.mClientDataChangeListener=[],this.isRecycle=!1,this.addConnectionChangeListener((function(e){return t.connected=e.connected,!e.connected&&(setTimeout((function(){t.recycle()}),0),!0)})),this.setDefaultDataChange(),l.default.log("new WXClient deviceId:"+this.deviceId)}return e.prototype.recycle=function(){this.isRecycle=!0,this.mClientDataChangeListener=[]},e.prototype.setDefaultDataChange=function(){var e=this;y.set(this.deviceId,(function(t){var r=[];e.mClientDataChangeListener.forEach((function(e){e.callback(t)||r.push(e)})),e.mClientDataChangeListener=r}))},e.prototype.addConnectionChangeListener=function(e){v.has(this.deviceId)?v.get(this.deviceId).push({cb:e}):v.set(this.deviceId,[{cb:e}])},e.prototype.addDataChangeListener=function(e,t){this.mClientDataChangeListener.push({callbackId:e,callback:t})},e.prototype.removeDataChangeListener=function(e){for(var t=[],r=0;r<this.mClientDataChangeListener.length;r++)this.mClientDataChangeListener[r].callbackId!==e&&t.push(this.mClientDataChangeListener[r]);this.mClientDataChangeListener=t,l.default.debug("removeDataChangeListener>>",e,this.mClientDataChangeListener)},e.prototype.connect=function(e){var t=this;return void 0===e&&(e=1e4),this.services=[],this.writing=!1,this.serviceMap=new Map,new Promise((function(r,n){t.performance.connectStart=new Date,(0,h.getBluetooth)().createBLEConnection({deviceId:t.deviceId,timeout:e,success:function(e){return l.default.info("connect success: ",t.deviceId),r(f.default.success(e))},fail:function(e){-1===e.errCode||-1===e.code?(l.default.warn("重复连接: ",t.deviceId,e),t.connected=!0,r(f.default.success(e))):(l.default.error("蓝牙连接失败: ",t.deviceId,e),n(f.default.fail("connect fail",e)),t.connected=!1,t.recycle())},complete:function(e){var r=new Date;t.performance.connectEnd=r,t.performance.connectTime=r.getTime()-t.performance.connectStart.getTime()}})}))},e.prototype.disconnect=function(){var e=this,t=this.deviceId;return new Promise((function(r,n){(0,h.getBluetooth)().closeBLEConnection({deviceId:t,success:function(e){l.default.info("disconnect: ",t),r(f.default.success(e))},fail:function(e){10006===e.errCode||10006===e.code?r(f.default.success(e)):(l.default.error("断开蓝牙连接失败: ",t,e),n(f.default.fail("disconnect fail",e)))},complete:function(t){e.recycle()}})}))},e.prototype.discoverServices=function(e){var t=this;return this.performance.getServicesStart=new Date,new Promise((function(r,n){setTimeout((function(){(0,h.getBluetooth)().getBLEDeviceServices({deviceId:t.deviceId,success:function(e){return a(t,void 0,void 0,(function(){var t,i;return u(this,(function(o){switch(o.label){case 0:if(l.default.debug("获取到服务",e),!(null==e?void 0:e.services)||0===e.services.length)return l.default.error("获取服务为空"),n(f.default.fail("获取服务为空",e)),[2];t=0,o.label=1;case 1:return t<e.services.length?-1!==e.services[t].uuid.indexOf("1801")?[3,5]:(i=new s.default(e.services[t]),this.services.push(i),this.serviceMap.set(e.services[t].uuid,i),"0000180A-0000-1000-8000-00805F9B34FB"!==(a=e.services[t].uuid)&&"0000FCC0-0000-1000-8000-00805F9B34FB"!==a?[3,3]:[4,this.discoverCharacteristic(e.services[t].uuid)]):[3,6];case 2:return o.sent(),[3,5];case 3:return[4,this.discoverCharacteristic(e.services[t].uuid).then((function(e){})).catch((function(e){}))];case 4:o.sent(),o.label=5;case 5:return t++,[3,1];case 6:return r(f.default.success(e)),[2]}var a}))}))},fail:function(e){l.default.error("获取服务失败: ",t.deviceId,e),n(f.default.fail("获取服务失败",e)),10006===(e.errCode||e.code)&&(t.connected=!1)},complete:function(e){try{var r=new Date;t.performance.getServicesEnd=r,t.performance.getCharacteristicsStart=r,t.performance.getServiceTime=r.getTime()-t.performance.getServicesStart.getTime()}catch(e){}}})}),e)}))},e.prototype.discoverCharacteristic=function(e){var t=this,r=this.deviceId;return new Promise((function(n,i){(0,h.getBluetooth)().getBLEDeviceCharacteristics({deviceId:r,serviceId:e,success:function(r){t.serviceMap.get(e).characteristics=r.characteristics,n(f.default.success())},fail:function(n){l.default.error("discover fail: ",r,e,n),i(f.default.fail("获取特征值失败",n)),10006===(n.errCode||n.code)&&(t.connected=!1)},complete:function(e){}})}))},e.prototype.enable=function(e,t){var r=this;return l.default.debug("打开通道:",t),new Promise((function(n,i){(0,h.getBluetooth)().notifyBLECharacteristicValueChange({state:!0,deviceId:r.deviceId,serviceId:e,characteristicId:t,success:function(e){n(f.default.success(e))},fail:function(t){l.default.error("打开通道失败:",e,r.deviceId,t),i(f.default.fail("enable fail",t))}})}))},e.prototype.disable=function(e,t){var r=this;return l.default.info("close characteristic: ",t),new Promise((function(n,i){(0,h.getBluetooth)().notifyBLECharacteristicValueChange({state:!1,deviceId:r.deviceId,serviceId:e,characteristicId:t,success:function(e){n(f.default.success(e))},fail:function(e){l.default.error("disable fail: ",r.deviceId,e),i(f.default.fail("disable fail",e))}})}))},e.prototype.read=function(e,t){var r=this;return l.default.info("read characteristic: ",this.deviceId,t),new Promise((function(n,i){var o=setTimeout((function(){r.removeDataChangeListener(t),i(f.default.fail("read fail timeout",null))}),3e3);r.addDataChangeListener(t,(function(e){return e.characteristicId.toUpperCase().indexOf(t)>-1&&(clearTimeout(o),n(f.default.success(null,e.value)),!0)})),(0,h.getBluetooth)().readBLECharacteristicValue({deviceId:r.deviceId,serviceId:e,characteristicId:t,success:function(e){},fail:function(e){r.removeDataChangeListener(t),l.default.error("read fail: ",r.deviceId,e),i(f.default.fail("read fail",e))}})}))},e.prototype.writeList=function(e,t,r){for(var n=0;n<r.length;n++){var i={};i.byte=r[n],i.characteristicId=t,i.serviceId=e,this.writBufferQueue.push(i)}this.writing||this.handWriteQueue()},e.prototype.write=function(e,t,r){var n=this;return this.writing?Promise.reject(f.default.fail("client is writing:"+(0,p.ab2hex)(r))):((0,l.isPrintWrite)()&&l.default.info("write: characteristicId=".concat((0,p.subUUID)(t),", hex=").concat((0,p.ab2hex)(r))),new Promise((function(i){n.writing=!0,n.doWxWrite(e,t,r,i,0)})).then((function(e){return n.writing=!1,e})))},e.prototype.doWxWrite=function(e,t,r,n,i){var o=this;(0,h.getBluetooth)().writeBLECharacteristicValue({deviceId:this.deviceId,serviceId:e,characteristicId:t,value:r,success:function(e){n(f.default.success(e))},fail:function(a){10008===(a.errCode||a.code)&&i<3?(i>1&&l.default.error("write: retryCount: ",i,o.deviceId,t,a),setTimeout((function(){o.doWxWrite(e,t,r,n,i+1)}),100)):(l.default.error("write: ",o.deviceId,t,a),n(f.default.fail("write fail",a)))},complete:function(){}})},e.prototype.setMtu=function(e,t){var r=this;return new Promise((function(n){if((0,h.getBluetooth)().setBLEMTU)if(t===d.Platform.ios)n(f.default.success({mtu:158}));else{var i=setTimeout((function(){l.default.error("setBLEMTU timeout"),n(f.default.success({mtu:23}))}),1500);l.default.log("setBLEMTU ",e),(0,h.getBluetooth)().setBLEMTU({deviceId:r.deviceId,mtu:e,success:function(t){i&&clearTimeout(i);var r=t.mtu;r||(r=e),l.default.log("setBLEMTU success",t,r),n(f.default.success({mtu:r}))},fail:function(e){i&&clearTimeout(i),l.default.error("setMtu fail: ",r.deviceId,e),n(f.default.success({mtu:23}))}})}else l.default.error("setMtu fail: setBLEMTU 未实现 "),n(f.default.success({mtu:23}))}))},e.prototype.handWriteQueue=function(){var e=this;if(this.writBufferQueue.length>0){var t=this.writBufferQueue.shift();this.write(t.serviceId,t.characteristicId,t.byte).then((function(){e.handWriteQueue()})).catch((function(t){l.default.error("WriteQueue error",t),e.handWriteQueue()}))}},e}();t.default=b},1790:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setStorage=t.setBLEMTU=t.readBLECharacteristicValue=t.notifyBLECharacteristicValueChange=t.getBLEDeviceCharacteristics=t.getBLEDeviceServices=t.writeBLECharacteristicValue=t.closeBLEConnection=t.createBLEConnection=t.onBLECharacteristicValueChange=t.onBLEConnectionStateChange=t.onBluetoothDeviceFound=t.onBluetoothAdapterStateChange=t.stopBluetoothDevicesDiscovery=t.startBluetoothDevicesDiscovery=t.getBluetoothAdapterState=t.closeBluetoothAdapter=t.openBluetoothAdapter=void 0;var n=r(6493);t.openBluetoothAdapter=(0,n.getMethod)((function(){return wx}),"openBluetoothAdapter"),t.closeBluetoothAdapter=(0,n.getMethod)((function(){return wx}),"closeBluetoothAdapter"),t.getBluetoothAdapterState=(0,n.getMethod)((function(){return wx}),"getBluetoothAdapterState"),t.startBluetoothDevicesDiscovery=(0,n.getMethod)((function(){return wx}),"startBluetoothDevicesDiscovery"),t.stopBluetoothDevicesDiscovery=(0,n.getMethod)((function(){return wx}),"stopBluetoothDevicesDiscovery"),t.onBluetoothAdapterStateChange=(0,n.getMethod)((function(){return wx}),"onBluetoothAdapterStateChange"),t.onBluetoothDeviceFound=(0,n.getMethod)((function(){return wx}),"onBluetoothDeviceFound"),t.onBLEConnectionStateChange=(0,n.getMethod)((function(){return wx}),"onBLEConnectionStateChange"),t.onBLECharacteristicValueChange=(0,n.getMethod)((function(){return wx}),"onBLECharacteristicValueChange"),t.createBLEConnection=(0,n.getMethod)((function(){return wx}),"createBLEConnection"),t.closeBLEConnection=(0,n.getMethod)((function(){return wx}),"closeBLEConnection"),t.writeBLECharacteristicValue=(0,n.getMethod)((function(){return wx}),"writeBLECharacteristicValue"),t.getBLEDeviceServices=(0,n.getMethod)((function(){return wx}),"getBLEDeviceServices"),t.getBLEDeviceCharacteristics=(0,n.getMethod)((function(){return wx}),"getBLEDeviceCharacteristics"),t.notifyBLECharacteristicValueChange=(0,n.getMethod)((function(){return wx}),"notifyBLECharacteristicValueChange"),t.readBLECharacteristicValue=(0,n.getMethod)((function(){return wx}),"readBLECharacteristicValue"),t.setBLEMTU=(0,n.getMethod)((function(){return wx}),"setBLEMTU"),t.setStorage=(0,n.getMethod)((function(){return wx}),"setStorage")},9047:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getBluetooth=t.setBluetooth=void 0;var a=o(r(1790));t.setBluetooth=function(e){e&&(a=e)},t.getBluetooth=function(){return a}},4240:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.parseAdvertisData=t.DeviceInfoUUIDS=t.BatteryState=t.AliceRequest=t.AliceUtils=t.pdfile=t.PbHandler=t.GpsStatus=t.GpsManager=t.BLEManager=void 0;var c=u(r(6063)),s=r(6063);Object.defineProperty(t,"BLEManager",{enumerable:!0,get:function(){return u(s).default}});var l=r(9433);Object.defineProperty(t,"GpsManager",{enumerable:!0,get:function(){return l.GpsManager}}),Object.defineProperty(t,"GpsStatus",{enumerable:!0,get:function(){return l.GpsStatus}});var f=r(1795);Object.defineProperty(t,"PbHandler",{enumerable:!0,get:function(){return u(f).default}}),t.pdfile=o(r(7250)),t.AliceUtils=o(r(2252));var d=r(5883);Object.defineProperty(t,"AliceRequest",{enumerable:!0,get:function(){return u(d).default}});var p=r(5901);Object.defineProperty(t,"BatteryState",{enumerable:!0,get:function(){return p.BatteryState}}),Object.defineProperty(t,"DeviceInfoUUIDS",{enumerable:!0,get:function(){return p.DeviceInfoUUIDS}});var h=r(3737);Object.defineProperty(t,"parseAdvertisData",{enumerable:!0,get:function(){return h.parseAdvertisData}}),a(r(8192),t),a(r(7807),t),t.default=c.default},9638:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function u(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(c){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ListenerUUID=void 0;var a=r(398),u=o(r(5707)),c=r(5755),s=o(r(4349)),l=o(r(1795)),f=o(r(8093)),d=o(r(2587)),p=o(r(608)),h=r(2252),v=r(8192),y="AC00",b="AC31";t.ListenerUUID="AC21";var m,g,w=function(e,r){return{serviceId:(0,c.fill)(y),characteristicId:(0,c.fill)(t.ListenerUUID),eventName:"rsp",timeout:3e3,onDataChange:function(t){return new f.default(t).isMatch(e,r),!0}}};t.default=[{name:"EnableCharacteristic",serviceId:(0,c.fill)(y),characteristicId:(0,c.fill)(t.ListenerUUID),actionType:a.ActionType.Enable},{name:"SendDeviceTime",serviceId:(0,c.fill)(y),characteristicId:(0,c.fill)(b),actionType:a.ActionType.Write,value:function(e){var t=(new Date).getTimezoneOffset(),r={timezone:t=t>0?-t:Math.abs(t),timestamp:parseInt(String((new Date).getTime()/1e3),10),timezoneCity:e.timezoneCity||"",timeFormat:e.timeFormat||0,dateFormat:e.dateFormat||0},n=l.default.encodePb(d.default,"time_t",r);return(0,h.formatApplicationPacket)(v.AliceCategory.DeviceInfoType.cmd,v.AliceCategory.DeviceInfoType.setTime,n)},await:w(v.AliceCategory.DeviceInfoType.cmd,v.AliceCategory.DeviceInfoType.setTime)},{name:"SetLanguage",serviceId:(0,c.fill)(y),characteristicId:(0,c.fill)(b),actionType:a.ActionType.Write,value:function(e){var t=e.languageConfig;t||(t={language:"zh",local:"CN"});var r={language:t.language,local:t.local},n=l.default.encodePb(d.default,"DeviceLanguageSet_t",r);return(0,h.formatApplicationPacket)(v.AliceCategory.DeviceInfoType.cmd,v.AliceCategory.DeviceInfoType.setLanguage,n)},await:w(v.AliceCategory.DeviceInfoType.cmd,v.AliceCategory.DeviceInfoType.setLanguage)},{name:"SendBind",serviceId:(0,c.fill)(y),characteristicId:(0,c.fill)(b),actionType:a.ActionType.Write,value:function(e){var t,r={account:null!==(t=e.userId)&&void 0!==t?t:"000000",masterMac:new Uint8Array(6)},n=l.default.encodePb(p.default,"bindReq_t",r);return(0,h.formatApplicationPacket)(v.AliceCategory.BasicType.cmd,v.AliceCategory.BasicType.bindReq,n)},await:{serviceId:(0,c.fill)(y),characteristicId:(0,c.fill)(t.ListenerUUID),eventName:"rsp",timeout:3e3,onDataChange:function(e){var t=new f.default(e);if(t.isMatch(v.AliceCategory.BasicType.cmd,v.AliceCategory.BasicType.bindReq)){if(t.hasProtoBuff()){var r=t.parsePb(p.default,"bindReqAck_t");return s.default.log("bindAck:",r.pbInfo),r.pbInfo&&0!==r.pbInfo.BindReqAck&&s.default.debug("发送绑定请求设备报错:"+r.pbInfo.BindReqAck),!(!r.pbInfo||0!==r.pbInfo.BindReqAck)||u.default.failCode(2,"设备拒绝绑定请求",r.pbInfo)}return!0}return!1}}},{name:"WaitingBindReply",serviceId:(0,c.fill)(y),characteristicId:(0,c.fill)(t.ListenerUUID),actionType:a.ActionType.None,await:{timeout:3e4,eventName:"data",onDataChange:function(e,t){var r=new f.default(e),n=r.getData();try{if(t.lastSeq=n.seq,n.commandId===v.AliceCategory.BasicType.bindConfirm&&n.categoryId===v.AliceCategory.BasicType.cmd)return n=r.parsePb(p.default,"bindConfirm_t"),s.default.log("bindConfirm:",n.pbInfo),1===n.pbInfo.bindConfirm||u.default.failCode(1,"设备不允许绑定",n.pbInfo)}catch(e){s.default.warn("bindConfirm报错:"+e,e)}return!1}}},("BindConfirm",m=v.AliceCategory.BasicType.cmd,g=v.AliceCategory.BasicType.bindConfirm,{name:"BindConfirm",serviceId:(0,c.fill)(y),characteristicId:(0,c.fill)(b),actionType:a.ActionType.Write,value:function(e){var t=(0,h.formatApplicationPacket)(m,g+128,undefined),r=(0,h.formatPayload)(t,!1,!0,!1,e.lastSeq);return s.default.log("App回复categoryId:".concat(m," commandId:").concat(g," seq:").concat(e.lastSeq)),r.buffer}}),{name:"SendResult",serviceId:(0,c.fill)(y),characteristicId:(0,c.fill)(b),actionType:a.ActionType.Write,value:function(e){var t,r,o;return n(this,void 0,void 0,(function(){var n,a,u,c,f;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,null===(t=e.listeners)||void 0===t?void 0:t.onConfirmBind()];case 1:return n=i.sent(),s.default.info("SDK 收到 onConfirmBind",n),[3,3];case 2:return a=i.sent(),s.default.error("SDK onConfirmBind 发生异常",a),n={error:a},[3,3];case 3:return"error"in n?(c=n.error,u={response:{bindResult:!1,errorMsg:null!==(r=null==c?void 0:c.errorMsg)&&void 0!==r?r:(null==c?void 0:c.message)||"绑定失败"},error:c}):u={confirmResult:n,response:{bindResult:null!==(o=null==n?void 0:n.success)&&void 0!==o&&o,errorMsg:(null==n?void 0:n.errorMsg)||"绑定失败"}},e.bindResult=u,f=l.default.encodePb(p.default,"bindResult_t",u.response),[2,(0,h.formatApplicationPacket)(v.AliceCategory.BasicType.cmd,v.AliceCategory.BasicType.bindResult,f)]}}))}))},await:{serviceId:(0,c.fill)(y),characteristicId:(0,c.fill)(t.ListenerUUID),eventName:"rsp",timeout:1e4,onDataChange:function(e,t){return t.bindResult.error?u.default.failCode(3,"确认绑定发生异常",null,{error:t.bindResult.error}):t.bindResult.response.bindResult?(new f.default(e).isMatch(v.AliceCategory.BasicType.cmd,v.AliceCategory.BasicType.bindResult),!0):u.default.failCode(4,"确认绑定返回绑定结果为失败",null,{confirmResult:t.bindResult.confirmResult})}}}]},9222:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AliceDataBuilder=void 0;var a=r(5901),u=o(r(8093)),c=o(r(1023)),s=o(r(4349)),l=o(r(5883)),f=o(r(6063)),d=r(8192),p=o(r(5719)),h=o(r(2587)),v=o(r(2339)),y=o(r(389)),b=o(r(3701)),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.receiveData=function(e){var t,r,n,i=new u.default(e),o=i.getData(),a=null;o.categoryId===d.AliceCategory.FileType.cmd&&(a=this.handlerFile(i)),function(e,t){var r=S.find((function(e){return e.categoryId===t.categoryId&&e.commandId===t.commandId}));r&&e.parsePb(r.pbfile,r.lookup)}(i,o);var c={isSendResp:w(o)};if((c=null!==(n=null===(r=null===(t=this.context.listeners)||void 0===t?void 0:t.onReceivePb)||void 0===r?void 0:r.call(t,i,c))&&void 0!==n?n:c).isSendResp){var p=new l.default(o.categoryId,o.commandId+128,a,o.seq);p.await=null,s.default.log("send 默认回复:"+o.categoryId+"/"+o.commandId),f.default.send(this.deviceId,p).catch((function(){}))}return i},t.prototype.handlerFile=function(e){var t=this,r=e.getData();if(r.commandId===d.AliceCategory.FileType.file_send_notify)return c.default.receiveFileSendNotify(e);if(r.commandId===d.AliceCategory.FileType.file_send_block)return c.default.receiveFileSendBlock(e);if(r.commandId===d.AliceCategory.FileType.file_send_finish)try{return c.default.receiveFileSendFinish(e,(function(e){var r=new d.AliceFileData(e.fileInfo);t.dataReport(r)}))}catch(e){return void s.default.error("file_send_finish error: ".concat(e),e)}if(r.commandId===d.AliceCategory.FileType.file_send_cancel)return c.default.receiveFileSendCancel(e);s.default.error("handlerFile error, 无效命令",r)},t}(a.DataBuilder);t.AliceDataBuilder=m;var g=[{categoryId:d.AliceCategory.SportType.cmd,commandId:d.AliceCategory.SportType.getGpsSwitch},{categoryId:11,commandId:1},{categoryId:11,commandId:3},{categoryId:6,commandId:1}];function w(e){var t=e.categoryId,r=e.commandId;return!g.some((function(e){return e.categoryId===t&&e.commandId===r}))}var S=[{categoryId:1,commandId:11,pbfile:h.default,lookup:"findPhone_t"},{categoryId:1,commandId:16,pbfile:h.default,lookup:"EventDisc_t"},{categoryId:2,commandId:13,pbfile:p.default,lookup:"SleepReport_t"},{categoryId:3,commandId:12,pbfile:b.default,lookup:"GpsSwitch_t"},{categoryId:4,commandId:7,pbfile:y.default,lookup:"PhoneCallChange_t"},{categoryId:5,commandId:6,pbfile:v.default,lookup:"pushStatus_t"},{categoryId:5,commandId:8,pbfile:v.default,lookup:"syncChoosedWatchface_t"}]},4564:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(5901),u=r(5755),c=o(r(4349)),s=r(9638),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.payloadBuffList=[],t._frameSeq=0,t._highLen=0,t.received=0,t}return i(t,e),t.prototype.decode=function(e){var t=e.value;if(e.characteristicId.indexOf(s.ListenerUUID)<=-1)c.default.debug("其他特征值",e.characteristicId);else if(t){var r=new DataView(t),n=0,i=r.getUint8(n);n++;var o=(0,u.getBitValue)(i,0),a=(0,u.getBitValue)(i,1),l=(0,u.getBitValue)(i,2),f=r.getUint8(n);n++;var d=r.getUint16(n,!0);n+=2;var p=0;l&&(p=r.getUint16(n,!0),n+=2);var h=t.slice(n,n+d);o&&a?this.parseTransportBuff(h.byteLength,h):o?(this._frameSeq=f,this._highLen=p,this.payloadBuffList=[],this.payloadBuffList.push(h)):a?(this.payloadBuffList.push(h),this.mergePayloadBuffList()):this._frameSeq+1===f?(this._frameSeq=f,this.payloadBuffList.push(h)):(this._frameSeq=f,this.payloadBuffList.push(h),c.default.error("帧数不匹配",f,this._frameSeq+1))}},t.prototype.reset=function(){this._frameSeq=0,this._highLen=0,this.payloadBuffList=[]},t.prototype.mergePayloadBuffList=function(){for(var e=0,t=0;t<this.payloadBuffList.length;t++)e+=this.payloadBuffList[t].byteLength;var r=new Uint8Array(e),n=0;for(t=0;t<this.payloadBuffList.length;t++){var i=this.payloadBuffList[t];r.set(new Uint8Array(i),n),n+=i.byteLength}var o=r.buffer;this.parseTransportBuff(o.byteLength,o)},t.prototype.parseTransportBuff=function(e,t){this.reset();var r=new DataView(t),n=r.getUint8(0),i=(0,u.getBitValue)(n,0),o=(0,u.getBitValue)(n,2),a={isReq:i,seq:r.getUint16(2,!0),isEncrypt:o};c.default.debug("triggerListener 数据:"+JSON.stringify(a)),i?this.triggerListener("data",t,a):this.triggerListener("rsp",t,a)},t}(a.Decoder);t.default=l},8784:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(2252),o=n(r(4349)),a=function(){function e(){this.mtu=23}return e.prototype.crc=function(e){return null},e.prototype.encode=function(e,t){var r,n;t?(r=t.isReq,n=t.seq?t.seq:(0,i.getAutoIncrementSeq)()):(r=!0,n=(0,i.getAutoIncrementSeq)());var o=(0,i.formatPayload)(e,r,!r,!1,n);return(0,i.formatTransportBuff)(this.mtu,o.buffer)},e.prototype.setMtu=function(e){this.mtu=e,o.default.log("AliceEncoder mtu",e)},e}();t.default=a},2409:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(398),o=r(5755),a=n(r(1795)),u=n(r(2587)),c=n(r(3986)),s=r(2252),l=n(r(8093)),f=n(r(4349)),d=r(8192),p="AC00",h="AC31",v="AC21";function y(e,t){return{serviceId:(0,o.fill)(p),characteristicId:(0,o.fill)(v),eventName:"rsp",timeout:3e3,onDataChange:function(r){var n=new l.default(r).getData();return n.categoryId===e&&t===n.commandId}}}t.default=[{name:"setMtu",mtu:244,actionType:i.ActionType.SetMtu},{name:"EnableCharacteristic",serviceId:(0,o.fill)(p),characteristicId:(0,o.fill)(v),actionType:i.ActionType.Enable},{name:"SendMtu",serviceId:(0,o.fill)(p),characteristicId:(0,o.fill)(h),actionType:i.ActionType.Write,when:function(e){return e.mtu>23},await:{serviceId:(0,o.fill)(p),characteristicId:(0,o.fill)(v),eventName:"rsp",timeout:3e3,onDataChange:function(e,t,r){var n,i=new l.default(e);return i.parsePb(u.default,"connectNegotiationParm_t"),(null===(n=i.getData().pbInfo)||void 0===n?void 0:n.maxTransimissionUnit)?r.setMtu(i.getData().pbInfo.maxTransimissionUnit):r.setMtu(t.mtu),!0}},value:function(e){var t={maxTransimissionUnit:e.mtu};f.default.log("sendMtu",t);var r=a.default.encodePb(u.default,"connectNegotiationParm_t",t);return(0,s.formatApplicationPacket)(d.AliceCategory.BasicType.cmd,d.AliceCategory.BasicType.ConnectParm,r)}},{name:"SendDeviceTime",serviceId:(0,o.fill)(p),characteristicId:(0,o.fill)(h),actionType:i.ActionType.Write,await:y(d.AliceCategory.DeviceInfoType.cmd,d.AliceCategory.DeviceInfoType.setTime),value:function(e){var t=(new Date).getTimezoneOffset(),r={timezone:t=t>0?-t:Math.abs(t),timestamp:parseInt(String((new Date).getTime()/1e3),10),timezoneCity:e.timezoneCity||"",timeFormat:e.timeFormat||0,dateFormat:e.dateFormat||0};f.default.log("sendTimeInfo",r);var n=a.default.encodePb(u.default,"time_t",r);return(0,s.formatApplicationPacket)(d.AliceCategory.DeviceInfoType.cmd,d.AliceCategory.DeviceInfoType.setTime,n)}},{name:"SendUserInfo",serviceId:(0,o.fill)(p),characteristicId:(0,o.fill)(h),actionType:i.ActionType.Write,value:function(e){var t=new ArrayBuffer(4),r=new DataView(t),n=new Date(e.userInfo.birthday);r.setUint16(0,n.getFullYear(),!1),r.setUint8(2,n.getMonth()+1),r.setUint8(3,n.getDate());var i=r.getInt32(0,!1),o={Weight:e.userInfo.weight,Height:e.userInfo.height,Birthday:i,Age:e.userInfo.age,Gender:1===e.userInfo.gender?1:0,NickName:e.userInfo.nickName};f.default.log("SendUserInfo",o);var u=a.default.encodePb(c.default,"UserInfo_t",o);return(0,s.formatApplicationPacket)(d.AliceCategory.HealthType.cmd,d.AliceCategory.HealthType.set_userInfo,u)},await:y(d.AliceCategory.HealthType.cmd,d.AliceCategory.HealthType.set_userInfo)},{name:"DataSync",serviceId:(0,o.fill)(p),characteristicId:(0,o.fill)(v),actionType:i.ActionType.DataSync}]},2252:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.format=t.parseFileData=t.parseFileInfo=t.formatTransportBuff=t.formatPayload=t.getFrameCtrl=t.getAutoIncrementSeq=t.formatApplicationPacket=t.getCtrl=void 0;var a=o(r(4349)),u=r(5755),c=o(r(1675)),s=o(r(1795)),l=r(9232);function f(e,t,r){var n=0;return e&&(n|=1),t&&(n|=2),r&&(n|=4),n}function d(e,t,r,n){var i=0;return e&&(i|=1),t&&(i|=2),r&&(i|=4),n&&(i|=8),i}t.getFrameCtrl=f,t.getCtrl=d;var p=0;function h(e){var t=e.fileBuffer,r=t.slice(0,32),n={},i=new DataView(r);n.fileType=(0,u.toUtf8String)(r.slice(0,8)),n.version=i.getUint16(11,!0);for(var o=t.slice(32,t.byteLength),s=0,l=[],f=!1;s<o.byteLength;){var d=new c.default(o,s);d.getUint16("header",!0).getUint32("startTime",!0).getUint32("endTime",!0).getUint8("type").getUint8("r").getUint16("check").getUint16("pbLength",!0);var p=d.build();42405===p.header?(s=d.getByteOffset())+p.pbLength>o.byteLength?(a.default.error("长度大于包总数",s+p.pbLength,o.byteLength),f=!0):(p.pbBuffer=o.slice(s,s+p.pbLength),s+=p.pbLength,l.push(p)):(a.default.error("parseFileInfo pb解析失败"),f=!0,s+=1)}return f&&a.default.error("文件解析失败过"),{fileHeader:n,pbPacketList:l}}t.getAutoIncrementSeq=function(){return++p>65535&&(p=0),p},t.formatPayload=function(e,t,r,n,i){if(t!==r){var o=d(t,r,n,true),c=e.byteLength,s=6,l=new ArrayBuffer(s+=2),f=new DataView(l);f.setUint8(0,o),f.setUint8(1,1),f.setUint16(2,i,!0),f.setUint16(4,c,!0),f.setUint16(6,43690,!0);var p=(0,u.appendBuffer)(l,e),h=(0,u.getCRC32ForAlice)(p).toString(16);h=(0,u.formatWithZero)(h,8);var v=(0,u.hex2ArrayBuffer)(h);return v=(0,u.hex2ArrayBuffer)((0,u.ab2hex)(v,!0)),{ctrl:o,seq:i,length:c,isEncrypt:n,crc32:h,buffer:(0,u.appendBuffer)(p,v)}}a.default.error("formatPayload 非法参数")},t.formatTransportBuff=function(e,t){e||(e=23);var r=e-3;r-=4;var n=t.byteLength+2,i=Math.floor(n/r);n%r!=0&&i++;for(var o=0,a=new Array(i),c=0;c<i;c++){var s=f(0===c,c===i-1,0===c),l=c,d=0;if(0===c){var p=t.slice(0,r-2);d=p.byteLength,o+=r-2;var h=new ArrayBuffer(6);(v=new DataView(h)).setUint8(0,s),v.setUint8(1,l),v.setUint16(2,d,!0),v.setUint16(4,t.byteLength,!0),a[c]=(0,u.appendBuffer)(h,p)}else{var v,y=t.slice(o,Math.min(t.byteLength,o+r));d=y.byteLength,o+=r,h=new ArrayBuffer(4),(v=new DataView(h)).setUint8(0,s),v.setUint8(1,l),v.setUint16(2,d,!0),a[c]=(0,u.appendBuffer)(h,y)}}return a},t.formatApplicationPacket=function(e,t,r){var n=new ArrayBuffer(2),i=new DataView(n);return i.setUint8(0,e),i.setUint8(1,t),r?(0,u.appendBuffer)(n,r):n},t.parseFileInfo=h,t.parseFileData=function(e){var t;try{var r=(t=h(e)).fileHeader.fileType,o=t.pbPacketList.map((function(e){var t=(0,l.findFileMeta)({fileType:r,pbPacket:e});if(t)try{return{data:s.default.decodePb(t.pdfile,t.lookup,e.pbBuffer),originData:e}}catch(r){throw r.decodePbError={fileMeta:t,pbPacket:e},r}else a.default.error("无效数据 fileType=".concat(r),e)}));return{fileHeader:t.fileHeader,fileList:o}}catch(r){var c=r;c.aliceFileInfo=t;var f=["解析文件失败 ".concat(c),c,e,t];throw c.decodePbError&&(f.push(c.decodePbError),f.push((0,u.ab2hex)(c.decodePbError.pbPacket.pbBuffer))),a.default.error.apply(a.default,i([],n(f),!1)),c}},t.format=function(e,t,r){void 0===r&&(r=1);var n=1===r?t:t+6e4*(new Date).getTimezoneOffset()+288e5,i=new Date(n),o={"M+":i.getMonth()+1,"d+":i.getDate(),"h+":i.getHours(),"m+":i.getMinutes(),"s+":i.getSeconds(),"q+":Math.floor((i.getMonth()+3)/3),S:i.getMilliseconds()};for(var a in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,String(i.getFullYear()).substr(4-RegExp.$1.length))),o)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?o[a]:("00"+o[a]).substr(String(o[a]).length)));return e}},8093:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(1795)),o=r(5755),a=n(r(4349)),u=r(8192),c=function(){function e(e){if(this.dataType=u.DataType_Alice,e){var t=new DataView(e);this.packet={};var r=t.getUint8(0),n=0;n++,n++,this.packet.seq=t.getUint16(n,!0),n+=2;var i=t.getUint16(n,!0);n+=2;var c=(0,o.getBitValue)(r,1);this.packet.isRsp=c,(0,o.getBitValue)(r,3)&&(n+=2);var s=e.slice(0,n+i),l=e.slice(n,n+i),f=e.slice(e.byteLength-4,e.byteLength),d=(0,o.getCRC32ForAlice)(s).toString(16);d=(0,o.formatWithZero)(d,8);var p=(0,o.ab2hex)(f,!0);d!==p&&a.default.error("crc fail",p,"本地计算:",d);var h=new DataView(l);this.packet.categoryId=h.getUint8(0),this.packet.commandId=h.getUint8(1),this.packet.commandId>=128||c?(this.packet.isReq=!1,this.packet.commandId=this.packet.commandId-128):this.packet.isReq=!0,a.default.log("收到数据:".concat(this.packet.categoryId,"/").concat(this.packet.commandId," seq:").concat(this.packet.seq," ").concat(this.packet.isReq," ").concat((0,o.ab2hexLimit)(e,20))),h.byteLength>2&&(this.packet.pbArrayBuffer=l.slice(2,l.byteLength))}}return e.prototype.getData=function(){return this.packet},e.prototype.isMatch=function(e,t){t>128&&(t-=128);var r=this.packet.categoryId===e&&this.packet.commandId===t;return r||a.default.error("isMatch fail 解包:".concat(this.packet.categoryId,"/").concat(this.packet.commandId," 不匹配:").concat(e,"/").concat(t)),r},e.prototype.hasProtoBuff=function(){return this.packet.pbArrayBuffer&&this.packet.pbArrayBuffer.byteLength>0},e.prototype.parsePb=function(e,t,r){if(a.default.log("parsePb",e,this.packet),e&&t||a.default.error("parsePb error: pbRoot, lookup empty:",e,t),this.packet.pbArrayBuffer)try{var n=new Uint8Array(this.packet.pbArrayBuffer);this.packet.pbInfo=i.default.decodePb(e,t,n),r?a.default.debug("pbInfo",this.packet.pbInfo):a.default.log("pbInfo",this.packet.pbInfo)}catch(e){a.default.error("pb解析失败:"+e,t,(0,o.ab2hex)(this.packet.pbArrayBuffer))}return this.packet},e}();t.default=c},1023:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(r(7107)),a=i(r(1795)),u=i(r(4349)),c=r(8192),s=function(){function e(){this.fileMap=new Map,this.fileMap=new Map}return e.prototype.receiveFileSendNotify=function(e){var t=e.parsePb(o.default,"FileSendRequest_t"),r=t.pbInfo.taskId,i=n(n({},t.pbInfo),{blockList:[]});this.fileMap.set(r,i),u.default.info("receive file notify:",this.fileMap);var s={taskId:r,errorCode:c.AliceErrorCode.RET_GE_SUCCESS,recievedSize:0};return a.default.encodePb(o.default,"FileSendResponse",s)},e.prototype.receiveFileSendBlock=function(e){try{var t=e.parsePb(o.default,"fileChunkSendRequest",!0).pbInfo,r=t.index,n=t.taskId;u.default.debug("receive file block：index"+r);var i=this.fileMap.get(n);return i?(r>0&&i.blockList.length!==r&&u.default.error("文件块编号不对, taskId:"+n,i.blockList.length),i.blockList.push(t.content),u.default.debug("file.blockList:"+i.blockList.length),a.default.encodePb(o.default,"fileChunkSendResponse ",{taskId:n,errorCode:c.AliceErrorCode.RET_GE_SUCCESS})):(u.default.error("block 未接收到文件通知",this.fileMap,n),a.default.encodePb(o.default,"fileChunkSendResponse ",{taskId:n,errorCode:c.AliceErrorCode.RET_GE_UNKNOW}))}catch(e){u.default.debug(" receiveFileSendBlock err"+e)}},e.prototype.receiveFileSendFinish=function(e,t){var r=e.parsePb(o.default,"fileSendComplete_t"),n=r.pbInfo.taskId,i=c.AliceErrorCode.RET_GE_SUCCESS,s=this.fileMap.get(n);if(u.default.info("receive file finish",r.pbInfo),s){for(var l=s.blockList,f=s.fileSize||0,d=0,p=0;p<l.length;p++)d+=l[p].byteLength;if(1!==s.fileType&&d===f||1===s.fileType&&d>=f){var h=new Uint8Array(d),v=0;for(p=0;p<l.length;p++)h.set(new Uint8Array(l[p]),v),v+=l[p].byteLength;s.fileBuffer=h.buffer,s.blockList=[],u.default.info("receive file finish: fileName=".concat(s.fileName,", byteSize=").concat(d,", fileType=").concat(s.fileType)),null==t||t({fileInfo:s})}else u.default.error("finish 文件校验失败 size不一致 bytSize/fileSize",d,f),u.default.error("block list",l.length,"file",s.fileName),i=c.AliceErrorCode.RET_GE_NO_MEM;this.fileMap.delete(n)}else u.default.error("finish 未接收到文件通知",this.fileMap,n),i=c.AliceErrorCode.RET_GE_UNKNOW;return a.default.encodePb(o.default,"fileSendComplete_t ",{taskId:n,errorCode:i})},e.prototype.receiveFileSendCancel=function(e){var t=e.parsePb(o.default,"fileSendCancel_t");u.default.log("fileCancel",t.pbInfo);var r=t.pbInfo.taskId;try{this.fileMap.delete(r)}catch(e){u.default.error(e)}return a.default.encodePb(o.default,"fileSendComplete_t ",{taskId:r,errorCode:c.AliceErrorCode.RET_GE_SUCCESS})},e}();t.default=new s},9232:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.findFileMeta=void 0;var u=o(r(7250)),c=[{fileType:["HR"],pd:[{pdfile:u.filerecard,lookup:"HrDataPacket_t"}]},{fileType:["SPO2-S","SPO2-P"],pd:[{pdfile:u.filerecard,lookup:"Spo2DataPacket_t"}]},{fileType:["SLEP"],pd:[{pbPacketType:0,pdfile:u.filerecard,lookup:"SleepDataPacket_t"},{pbPacketType:1,pdfile:u.filerecard,lookup:"SleepReport_t"}]},{fileType:["ACTIS"],pd:[{pdfile:u.filerecard,lookup:"ActiveDataPacket_t"}]},{fileType:["ACTI-2"],pd:[{pdfile:u.filerecard,lookup:"History7DayData_t"}]},{fileType:["ACTI"],pd:[{pdfile:u.filerecard,lookup:"DayActiveData_t"}]},{fileType:["R_HR"],pd:[{pdfile:u.filerecard,lookup:"RESTING_HR_DATA_t"}]},{fileType:["SPOR"],pd:[{pdfile:u.sport,lookup:"SportDetailPacket_t"}]},{fileType:["GPSD"],pd:[{pdfile:u.sport,lookup:"GpsDetailPacket_t"}]}];t.findFileMeta=function(e){var t,r,n=e.fileType,i=e.pbPacket;try{for(var o=a(c),u=o.next();!u.done;u=o.next()){var s=u.value;if(s.fileType.some((function(e){return n.startsWith(e)}))){var l=s.pd.find((function(e){return!("pbPacketType"in e)||e.pbPacketType===i.type}));if(l)return l}}}catch(e){t={error:e}}finally{try{u&&!u.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}}},5883:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(5755),o=r(2252),a=n(r(8093)),u=n(r(4349)),c=function(){function e(e,t,r,n){var c=this;this.serviceId=(0,i.fill)("AC00"),this.characteristicId=(0,i.fill)("AC31"),this.await={eventName:"rsp",timeout:3e3,onDataChange:function(e,t){var r={};if(t.seq===c.aliceEncodeTag.seq){r.isConsumer=!0;var n=new a.default(e);n.isMatch(c.categoryId,c.commandId)?(c.responseData=n,r.isSucceed=!0):r.isSucceed=!1}else r.isConsumer=!1,(new Date).getTime()-c.requestTime>15e3&&(r.isConsumer=!0),r.isConsumer=!1;return r}},this.categoryId=e,this.commandId=t,this.appBuff=(0,o.formatApplicationPacket)(e,t,r),this.isReq=this.commandId<=128,this.aliceEncodeTag={},this.aliceEncodeTag.isReq=this.isReq,this.aliceEncodeTag.seq=n||(0,o.getAutoIncrementSeq)(),u.default.info("request: categoryId=".concat(this.categoryId,", commandId=").concat(this.commandId," seq=").concat(this.aliceEncodeTag.seq," pbBuff:").concat((0,i.ab2hexLimit)(r,20))),this.requestTime=(new Date).getTime(),this.isReq||(this.await=null)}return e.prototype.setTimeout=function(e){this.await&&(this.await.timeout=Math.max(3e3,e))},e.prototype.getCmd=function(){return this.categoryId+"/"+this.commandId},e.prototype.getBytes=function(){return this.encoder.encode(this.appBuff,this.aliceEncodeTag)},e.prototype.setEncoder=function(e){this.encoder=e},e}();t.default=c},8192:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AliceCategory=t.AliceErrorCode=t.AliceFileData=t.AliceSettingType=t.DataType_AliceFile=t.DataType_Alice=void 0,t.DataType_Alice="aliceData",t.DataType_AliceFile="aliceFile",t.AliceSettingType={};var r=function(){function e(e){this.fileInfo=e,this.dataType=t.DataType_AliceFile}return e.prototype.getData=function(){return this.fileInfo},e}();t.AliceFileData=r,t.AliceErrorCode={RET_GE_SUCCESS:1e6,RET_GE_UNKNOW:1000001,RET_GE_NO_MEM:1000002,RET_GE_INVALID_PARAM:1000003},t.AliceCategory={BasicType:{cmd:0,ConnectParm:1,queryBindState:3,bindReq:4,bindConfirm:5,bindResult:6,unbindReq:7},DeviceInfoType:{cmd:1,readTime:1,setTime:2,getVersion:3,getBattery:4,setLanguage:13},HealthType:{cmd:2,getHeartConfig:1,setHeartConfig:2,getSpo2Config:3,setSpo2Config:4,getSleepConfig:5,setSleepConfig:6,getUserInfo:7,set_userInfo:8,setSedentaryReminder:10,getSedentaryReminder:9,getRecordData:11,getSleepRecord:12},SportType:{cmd:3,getActiveGoal:1,setActiveGoal:2,getSportDetection:3,setSportDetection:4,getSportAutoPauseStop:5,setSportAutoPauseSto:6,getTodayActiveTotal:7,getSportDescription:8,getSportDetail:9,getGpsSwitch:12,sendGpsSwitchRsp:13,getActivityStrength:14},NotificationType:{cmd:4,getNotificationSwitch:1,setNotificationSwitch:2,sendTextNotification:3,sendPic:4,NotificationReply:5,NotificationRemoved:6,sendPhoneCallChange:7},WatchFaceType:{cmd:5},WeatherType:{cmd:6},AlarmType:{cmd:7,getAlarm:1,setAlarm:2,alarmUpdate:3},FileType:{cmd:8,getFileList:1,getFileByName:2,file_send_notify:3,file_send_block:4,file_send_finish:5,file_send_cancel:6},AuthenticationType:{cmd:9},DataCollectType:{cmd:10}}},1423:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function u(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}c((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(c){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},u=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ProtocolType=t.NoneReadDeviceInfo=t.NoneEncoder=t.NoneDecoder=void 0;var s=c(r(9638)),l=c(r(2409)),f=c(r(4564)),d=c(r(8784)),p=r(5901),h=c(r(4349)),v=r(9222),y=r(5755),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.decode=function(e){this.triggerListener("data",e.value)},t}(p.Decoder);t.NoneDecoder=b;var m=function(){function e(){}return e.prototype.crc=function(e){},e.prototype.encode=function(e,t){return[e]},e.prototype.setMtu=function(){},e}();t.NoneEncoder=m;var g,w=function(){function e(){}return e.prototype.readDeviceInfo=function(e,t){return o(this,void 0,void 0,(function(){var r,n,i,o,u,c,s;return a(this,(function(a){switch(a.label){case 0:if(r=null,e.services.forEach((function(e){e.uuid===p.DeviceInfoUUIDS.DeviceInfo&&(r=e)})),(n={}).deviceId=e.deviceId,!r)return[3,9];if(!(null==t?void 0:t.length))return[3,5];u=0,a.label=1;case 1:return u<t.length?"firmwareVersion"!==(s=t[u])?[3,3]:[4,e.read(r.uuid,p.DeviceInfoUUIDS.CharacteristicFirmware)]:[3,4];case 2:i=a.sent().value,n.firmwareVersion=(0,y.toUtf8String)(i),a.label=3;case 3:return u++,[3,1];case 4:return[3,9];case 5:o=r.characteristics,u=0,a.label=6;case 6:return u<o.length?(c=o[u],[4,e.read(r.uuid,c.uuid)]):[3,9];case 7:s=a.sent().value,c.uuid===p.DeviceInfoUUIDS.CharacteristicManufacture&&(n.manufacture=(0,y.toUtf8String)(s)),c.uuid===p.DeviceInfoUUIDS.CharacteristicModel&&(n.model=(0,y.toUtf8String)(s)),c.uuid===p.DeviceInfoUUIDS.CharacteristicSoftware&&(n.softwareVersion=(0,y.toUtf8String)(s)),c.uuid===p.DeviceInfoUUIDS.CharacteristicHardware&&(n.hardwareVersion=(0,y.toUtf8String)(s)),c.uuid===p.DeviceInfoUUIDS.CharacteristicFirmware&&(n.firmwareVersion=(0,y.toUtf8String)(s)),c.uuid===p.DeviceInfoUUIDS.CharacteristicSerialNumber&&(n.sn=(0,y.toUtf8String)(s)),a.label=8;case 8:return u++,[3,6];case 9:return[2,Promise.resolve(n)]}}))}))},e}();t.NoneReadDeviceInfo=w,function(e){e[e.Bind=0]="Bind",e[e.Sync=1]="Sync",e[e.Ota=2]="Ota"}(g=t.ProtocolType||(t.ProtocolType={}));var S=[],_=new function(e,t,r,n,i){this.uuid="AC00".toUpperCase().trim(),this.bind=t,this.sync=r,this.ota=null,this.readDeviceInfo=i}("AC00",{protocolType:g.Bind,actions:s.default,encoder:new d.default,get decoder(){return new f.default}},{protocolType:g.Sync,actions:l.default,get encoder(){return new d.default},get decoder(){return new f.default},get dataBuilder(){return new v.AliceDataBuilder}},null,new w);S.push(_),t.default={getProtocolByServices:function(e){var t,r;h.default.debug("registerProtocolList",S);try{for(var n=u(e),i=n.next();!i.done;i=n.next())for(var o=i.value.uuid.toUpperCase(),a=0;a<S.length;a++)if(o.indexOf(S[a].uuid)>-1)return S[a]}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}h.default.error("不支持的设备")}}},3737:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseAdvertisData=void 0;var n=r(5755);t.parseAdvertisData=function(e){if(e&&!(e.byteLength<6)){var t,r,i=e.byteLength;if(6===i)t="normal",r=e;else if(8===i)t="normal",r=e.slice(2);else if(12===i)t="PEclass",r=e.slice(0,6);else{if(14!==i)return;t="PEclass",r=e.slice(2,8)}return{mac:(0,n.ab2hex)(r).toUpperCase(),mode:t}}}},5901:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.AncsService=t.DeviceInfoUUIDS=t.BatteryState=t.Decoder=t.DataBuilder=void 0;var a=o(r(4349)),u=r(5755),c=function(){function e(){}return e.prototype.dataReport=function(e){e.deviceId=this.deviceId,this.onDataReport(e)},e}();t.DataBuilder=c;var s=function(){function e(){this.listenerMap=new Map}return e.prototype.addDataChangeListener=function(e,t){this.listenerMap.has(e)?this.listenerMap.get(e).push({callback:t}):this.listenerMap.set(e,[{callback:t}])},e.prototype.triggerListener=function(e,t,r){if(this.listenerMap.has(e)){var n=[],i=this.listenerMap.get(e)||[];0===i.length?a.default.error("数据未监听",e,(0,u.ab2hex)(t),r):"rsp"===e&&(0,a.isPrintValueChange)()&&a.default.info("receive: eventName=".concat(e,", tag=").concat(JSON.stringify(r),", hex=").concat((0,u.ab2hex)(t)));for(var o=0;o<i.length;o++){var c=i[o],s=c.callback;s&&(s(t,r)||n.push(c))}n.length&&i.length===n.length&&"data"!==e&&a.default.log("no listener remove  for event:",e,n.length,(0,u.ab2hexLimit)(t,20)),this.listenerMap.set(e,n)}else a.default.warn("no listener for event:",e,t)},e}();t.Decoder=s,function(e){e[e.None=0]="None",e[e.Charging=1]="Charging"}(t.BatteryState||(t.BatteryState={})),t.DeviceInfoUUIDS={DeviceInfo:"0000180A-0000-1000-8000-00805F9B34FB",CharacteristicManufacture:"00002A29-0000-1000-8000-00805F9B34FB",CharacteristicModel:"00002A24-0000-1000-8000-00805F9B34FB",CharacteristicSerialNumber:"00002A25-0000-1000-8000-00805F9B34FB",CharacteristicHardware:"00002A27-0000-1000-8000-00805F9B34FB",CharacteristicFirmware:"00002A26-0000-1000-8000-00805F9B34FB",CharacteristicSoftware:"00002A28-0000-1000-8000-00805F9B34FB",CharacteristicSystemId:"00002A23-0000-1000-8000-00805F9B34FB"},t.AncsService={UUID:"0000FCC0-0000-1000-8000-00805F9B34FB",CharacteriticMac:"0000FCC8-0000-1000-8000-00805F9B34FB"}},7807:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.SettingResponse=t.BatteryState=t.DeviceInfoUUIDS=void 0,i(r(6779),t),i(r(8848),t);var o=r(5901);Object.defineProperty(t,"DeviceInfoUUIDS",{enumerable:!0,get:function(){return o.DeviceInfoUUIDS}}),Object.defineProperty(t,"BatteryState",{enumerable:!0,get:function(){return o.BatteryState}}),t.SettingResponse={no_sync:{code:-1,msg:"请完成连接后再进行设置"},invalid_parameter:{code:-2,msg:"参数有误"},no_unrealized:{code:-3,msg:"暂未实现该功能"},no_support:{code:-4,msg:"不支持的设置项"}}},1675:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(4349)),o=r(5755);function a(e,t,r){return e?(t.getUint8(r+2)<<16)+(t.getUint8(r+1)<<8)+t.getUint8(r):(t.getUint8(r)<<16)+(t.getUint8(r+1)<<8)+t.getUint8(r+2)}var u=function(){function e(e,t){void 0===t&&(t=0),this.size=0,this.values=[],this.originalBuffer=e,this.size=t}return e.prototype.build=function(e){var t=this;if(!this.originalBuffer||this.originalBuffer.byteLength<=0)return i.default.error("originalBuffer is null",this.originalBuffer),null;e||(e={});var r=new DataView(this.originalBuffer);return this.values.forEach((function(n){var u=n.byteOffset,c=n.method,s=n.key,l=n.size,f=n.littleEndian;try{if("getString"===c)e[s]=(0,o.toUtf8String)(t.originalBuffer.slice(u,u+l));else if("getBuffer"===c)e[s]=t.originalBuffer.slice(u,u+l);else if("getUint8"===c)e[s]=r.getUint8(u);else if("Uint24"===c)e[s]=a(f,r,u);else if("Uint8Array"===c)e[s]=[].slice.call(new Uint8Array(t.originalBuffer.slice(u,u+l)));else if("Uint16Array"===c)e[s]=[].slice.call(new Uint16Array(t.originalBuffer.slice(u,u+l)));else if("SFloat"===c){var d=((15&(h=r.getUint8(u)))<<8)+r.getUint8(u+1),p=Math.pow(10,((240&h)>>4)-16);e[s]=d*p}else if("Float"===c){var h=r.getUint8(u);d=a(f,r,u+1),p=Math.pow(10,(15&h)-16),e[s]=d*p}else e[s]=r[c](u,f)}catch(e){i.default.error("reader err:"+e),i.default.error(u,c,s,l,f)}})),e},e.prototype.getUint24=function(e,t){return void 0===t&&(t=!1),this.values.push({byteOffset:this.size,method:"Uint24",key:e,littleEndian:t}),this.size+=3,this},e.prototype.getSFloat=function(e){return this.values.push({byteOffset:this.size,method:"SFloat",key:e}),this.size+=2,this},e.prototype.getFloat=function(e,t){return void 0===t&&(t=!1),this.values.push({byteOffset:this.size,method:"Float",key:e,littleEndian:t}),this.size+=4,this},e.prototype.getUint8Array=function(e,t){return this.values.push({byteOffset:this.size,size:t,method:"Uint8Array",key:e}),this.size+=t,this},e.prototype.getUint16Array=function(e,t){return this.values.push({byteOffset:this.size,size:t,method:"Uint16Array",key:e}),this.size+=t,this},e.prototype.getUint8=function(e){return this.values.push({byteOffset:this.size,method:"getUint8",key:e}),this.size++,this},e.prototype.getUint16=function(e,t){return void 0===t&&(t=!1),this.values.push({byteOffset:this.size,method:"getUint16",key:e,littleEndian:t}),this.size+=2,this},e.prototype.getUint32=function(e,t){return void 0===t&&(t=!1),this.values.push({byteOffset:this.size,method:"getUint32",key:e,littleEndian:t}),this.size+=4,this},e.prototype.getBuffer=function(e,t){this.values.push({byteOffset:this.size,size:t,method:"getBuffer",key:e}),this.size+=t},e.prototype.getByteOffset=function(){return this.size},e.prototype.getString=function(e,t){this.values.push({byteOffset:this.size,size:t,method:"getString",key:e}),this.size+=t},e}();t.default=u},5755:function(e,t){"use strict";function r(e){var t=0,r=e.length;if(r%2!=0)return null;r/=2;for(var n=[],i=0;i<r;i++){var o=e.substr(t,2),a=parseInt(o,16);n.push(a),t+=2}return n}function n(e,t){if(!e)return"";for(var r="",n=0;n<t-e.length;n++)r+="0";return r+e}Object.defineProperty(t,"__esModule",{value:!0}),t.getCRC32=t.toArrayWithSize=t.toUtf8String=t.subUUID=t.getBitValue=t.getCRCResult=t.getCRC32ForAlice=t.fill=t.mergeBuffer=t.appendBuffer=t.formatWithZero=t.str2Bytes=t.hex2ArrayBuffer=t.ab2hex=t.ab2hexLimit=void 0,t.ab2hexLimit=function(e,t){return e?"string"==typeof e?e:Array.prototype.map.call(new Uint8Array(e.slice(0,t)),(function(e){return("00"+e.toString(16)).slice(-2)})).join(""):""},t.ab2hex=function(e,t){if(!e)return"";if("string"==typeof e)return e;var r=Array.prototype.map.call(new Uint8Array(e),(function(e){return("00"+e.toString(16)).slice(-2)}));if(t){for(var n=[],i=0;i<r.length;i++)n.push(r[r.length-1-i]);return n.join("")}return r.join("")},t.hex2ArrayBuffer=function(e){var t=r(e);if(!t)throw new Error("hex2ArrayBuffer error");for(var n=new ArrayBuffer(t.length),i=new DataView(n),o=0;o<t.length;o++)i.setUint8(o,t[o]);return n},t.str2Bytes=r,t.formatWithZero=n,t.appendBuffer=function(e,t){var r=new Uint8Array(e.byteLength+t.byteLength);return r.set(new Uint8Array(e),0),r.set(new Uint8Array(t),e.byteLength),r.buffer},t.mergeBuffer=function(e,t){var r=new ArrayBuffer(t),n=new DataView(r),i=0;return e.forEach((function(e){for(var r=new DataView(e),o=0;o<e.byteLength&&i<t;o++)n.setUint8(i,r.getUint8(o)),i++})),r},t.fill=function(e){return"0000".concat(e,"-0000-1000-8000-00805F9B34FB")},t.getCRC32ForAlice=function(e){var t=4294967295;0===i.length&&o();for(var r=e.byteLength,n=new DataView(e),a=0;a<r;a++){var u=Math.floor((t^n.getUint8(a))>>>0&255),c=t>>>8;t=(i[u]^c)>>>0}return~t>>>0},t.getCRCResult=function(e){var t=r(e.replace(/ /g,""));if(!t)throw new Error("getCRCResult error");var i=u(t).toString(16);return n(i,8)};var i=[];function o(){var e,t,r;for(t=0;t<256;t++){for(e=t,r=0;r<8;r++)1==(1&e)?e=3988292384^e>>>1:e>>>=1;i.push(e>>>0)}}function a(e,t){if(!e)return null;var r=[],n=e.byteLength;if(n>t){for(var i=0;i<n-t;){var o=e.slice(i,i+t);r.push(o),i+=t}var a=e.slice(i,i+t);r.push(a)}else r.push(e);return r}function u(e){var t=0;0===i.length&&o();for(var r=e.length,n=0;n<r;n++){var a=parseInt((t^e[n])>>>0&255,10),u=t>>>8;t=(i[a]^u)>>>0}return t}t.getBitValue=function(e,t){return 1==(1&e>>t)},t.subUUID=function(e){return e&&e.length>8?e.toString().substring(4,8):e},t.toUtf8String=function e(t){try{if(t.byteLength>4096){var r=a(t,4096);if(!r)throw new Error("toUtf8String error");for(var n=[],i=0;i<r.length;i++)n.push(e(r[i]));return n.join("")}return String.fromCharCode.apply(null,Array.from(new Uint8Array(t)))}catch(e){return console.error("字符串转换失败"+e,e),""}},t.toArrayWithSize=a,t.getCRC32=u},4349:function(e,t){"use strict";var r=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},n=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.setLogger=t.setPrintWrite=t.isPrintWrite=t.setPrintValueChange=t.isPrintValueChange=t.Logger=void 0;var i=function(){function e(){}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.unshift(c()),console.debug.apply(console,n([],r(e),!1))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.unshift(c()),console.info.apply(console,n([],r(e),!1))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.unshift(c()),console.warn.apply(console,n([],r(e),!1))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.unshift(c()),console.error.apply(console,n([],r(e),!1))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.unshift(c()),console.info.apply(console,n([],r(e),!1))},e}();t.Logger=i;var o={printValueChange:!0,printWrite:!0},a=new i;function u(e){var t=e.toString();return t[1]?t:"0"+t}function c(){var e=new Date;return"["+[e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()].map(u).join(":")+"]"}t.isPrintValueChange=function(){return o.printValueChange},t.setPrintValueChange=function(e){o.printValueChange=e},t.isPrintWrite=function(){return o.printWrite},t.setPrintWrite=function(e){o.printWrite=e},t.setLogger=function(e){a=e},t.default=new Proxy({},{get:function(e,t){return a[t]}})},6493:function(e,t){"use strict";var r=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},n=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.getMethod=void 0,t.getMethod=function(e,t){return function(){for(var i,o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return(i=e())[t].apply(i,n([],r(o),!1))}}},1297:function(e){e.exports={nested:{AlarmMessage_t:{fields:{AlarmEnable:{type:"uint32",id:1},AlarmId:{type:"uint32",id:2},AlarmState:{type:"uint32",id:3},AlarmName:{type:"string",id:4},AlarmTime:{type:"uint32",id:5},AlarmLaterEnable:{type:"uint32",id:6},AlarmLaterTime:{type:"uint32",id:7},AlarmCycleMaskFlag:{type:"uint32",id:8},AlarmShakeDuration:{type:"uint32",id:9},AlarmSmartWakeup:{type:"uint32",id:10}}},AlarmMessageCacheData_t:{fields:{Data:{rule:"repeated",type:"AlarmMessage_t",id:1}}}}}},608:function(e){e.exports={nested:{bindInfo_t:{fields:{isBond:{type:"bool",id:1},timestamp:{type:"uint32",id:2},account:{type:"string",id:3},mac:{type:"bytes",id:4},masterMac:{type:"bytes",id:5}}},bindReq_t:{fields:{account:{type:"string",id:1},masterMac:{type:"bytes",id:2}}},bindReqAck_t:{fields:{BindReqAck:{type:"uint32",id:1}}},bindConfirm_t:{fields:{bindConfirm:{type:"uint32",id:1}}},bindResult_t:{fields:{bindResult:{type:"bool",id:1},errorMsg:{type:"string",id:2}}},unbindReq_t:{fields:{account:{type:"string",id:1}}}}}},2587:function(e){e.exports={nested:{connectNegotiationParm_t:{fields:{maxTransimissionUnit:{type:"uint32",id:1}}},time_t:{fields:{timestamp:{type:"uint32",id:1},timezone:{type:"int32",id:2},timezoneCity:{type:"string",id:3},timeFormat:{type:"uint32",id:4},dateFormat:{type:"uint32",id:5}}},DeviceLanguageSet_t:{fields:{local:{type:"string",id:1},language:{type:"string",id:2}}},device_info_t:{fields:{deviceType:{type:"uint32",id:1},deviceHardVersion:{type:"string",id:2},deviceSoftVersion:{type:"string",id:3},deviceSn:{type:"string",id:4},deviceModel:{type:"string",id:5},deviceName:{type:"string",id:6},sku:{type:"string",id:7}}},battery_info_t:{fields:{batteryPercent:{type:"uint32",id:1}}},AutoLightScreenAndHandGet_t:{fields:{HandSet:{type:"uint32",id:1},AutoLightScreenSw:{type:"uint32",id:2},AutoLightScreenTime:{rule:"repeated",type:"TimeRange_t",id:3}}},TimeRange_t:{fields:{StartTime:{type:"uint32",id:1},EndTime:{type:"uint32",id:2}}},NightModeGet_t:{fields:{NightModeSw:{type:"uint32",id:1},TimeSets:{rule:"repeated",type:"TimeRange_t",id:2}}},NightModeSet_t:{fields:{NightModeSw:{type:"uint32",id:1},TimeSets:{rule:"repeated",type:"TimeRange_t",id:2}}},UeStateRequireSet_t:{fields:{UeState:{type:"uint32",id:1}}},MenuShow_t:{fields:{AllMenuList:{type:"bytes",id:1},ShowMenuList:{type:"bytes",id:2}}},EventDisc_t:{fields:{EventID:{type:"uint32",id:1},EventTime:{type:"uint32",id:2},EventParaStr:{rule:"optional",type:"string",id:3},EventParaUint:{rule:"optional",type:"uint32",id:4}}},findPhone_t:{fields:{status:{type:"uint32",id:1}}}}}},6538:function(e){e.exports={nested:{ErrorCode_t:{fields:{ErrorCode:{type:"uint32",id:1}}}}}},7107:function(e){e.exports={nested:{FileSendRequest_t:{fields:{taskId:{type:"uint32",id:1},fileType:{type:"uint32",id:2},fileName:{type:"string",id:3},fileSize:{type:"uint32",id:6},md5:{type:"bytes",id:7}}},FileSendResponse:{fields:{taskId:{type:"uint32",id:1},errorCode:{type:"uint32",id:2},recievedSize:{type:"uint32",id:3}}},fileChunkSendRequest:{fields:{taskId:{type:"uint32",id:1},index:{type:"uint32",id:2},content:{type:"bytes",id:3}}},fileChunkSendResponse:{fields:{taskId:{type:"uint32",id:1},errorCode:{type:"uint32",id:2}}},fileSendComplete_t:{fields:{taskId:{type:"uint32",id:1},errorCode:{type:"uint32",id:2}}},fileSendCancel_t:{fields:{taskId:{type:"uint32",id:1},errorCode:{type:"uint32",id:2}}},getFlieRequest_t:{fields:{filename:{type:"string",id:1},fileType:{type:"uint32",id:2}}},getFlieListReqRsp_t:{fields:{fileType:{type:"uint32",id:1},fileList:{rule:"repeated",type:"string",id:2},errorCode:{type:"uint32",id:3}}}}}},5719:function(e){e.exports={nested:{HrData_t:{options:{"(nanopb_msgopt).max_size":60},fields:{HrValue:{type:"bytes",id:1},Reliability:{type:"bytes",id:2},Type:{type:"bytes",id:3}}},HrDataPacket_t:{fields:{StartTime:{type:"uint32",id:1},TimeInterval:{type:"uint32",id:2},HrData:{type:"HrData_t",id:3}}},Spo2Data_t:{options:{"(nanopb_msgopt).max_size":60},fields:{Spo2Value1:{type:"bytes",id:1},Reliability1:{type:"bytes",id:2},Spo2Value2:{type:"bytes",id:3},Reliability2:{type:"bytes",id:4}}},Spo2DataPacket_t:{fields:{StartTime:{type:"uint32",id:1},TimeInterval:{type:"uint32",id:2},Spo2Data:{type:"Spo2Data_t",id:3}}},SleepData_t:{options:{"(nanopb_msgopt).max_size":60},fields:{SleepStatus:{type:"bytes",id:1}}},SleepDataPacket_t:{fields:{StartTime:{type:"uint32",id:1},TimeInterval:{type:"uint32",id:2},SleepData:{type:"SleepData_t",id:3}}},SleepReport_t:{options:{"(nanopb_msgopt).max_size":1470},fields:{valid:{type:"bool",id:1},fallSleep:{type:"uint32",id:2},sleepOut:{type:"uint32",id:3},REM:{type:"uint32",id:4},lightSleep:{type:"uint32",id:5},deepSleep:{type:"uint32",id:6},sleepScore:{type:"int32",id:7},sleepGrade:{type:"uint32",id:8},fallSleepSpend:{type:"uint32",id:9},exceptionHrs:{rule:"repeated",type:"exceptionHr_t",id:10,options:{"(nanopb).max_count":10}},hourApneas:{rule:"repeated",type:"apnea_t",id:11,options:{"(nanopb).max_count":24}},sleepDetail:{type:"bytes",id:12}}},apnea_t:{fields:{hour:{type:"uint32",id:1},times:{type:"uint32",id:2}}},exceptionHr_t:{fields:{timestamp:{type:"uint32",id:1},duration:{type:"uint32",id:2}}},DayActiveData_t:{fields:{DayUtc:{type:"uint32",id:1},DayCalorie:{type:"uint32",id:2},DayStep:{type:"uint32",id:3},DayDistance:{type:"uint32",id:4}}},ActiveData_t:{fields:{Utc:{type:"uint32",id:1},Calorie:{type:"uint32",id:2},Step:{type:"uint32",id:3},Distance:{type:"uint32",id:4},ExerciseTime:{type:"uint32",id:5},HighStrengthDuration:{type:"uint32",id:6},MiddleStrengthDuration:{type:"uint32",id:7},StandState:{type:"bool",id:8},WearState:{type:"bool",id:9},EffectiveActivityTime:{type:"uint32",id:10}}},ActiveDataPacket_t:{fields:{Interval:{type:"uint32",id:1},ActiveData:{rule:"repeated",type:"ActiveData_t",id:2,options:{"(nanopb).max_count":60}}}},History7DayData_t:{fields:{DayUtc:{type:"uint32",id:1},DayCalorie:{type:"uint32",id:2},DayStep:{type:"uint32",id:3},DayDistance:{type:"uint32",id:4},DayStandDetail:{type:"uint32",id:5},DayWakeupHr:{type:"uint32",id:6},DayExerciseTime:{type:"uint32",id:7}}},RESTING_HR_DATA_t:{fields:{RestingUtc:{type:"uint32",id:1},RestingSpo2:{type:"uint32",id:2},RestingHr:{type:"uint32",id:3}}}}}},4288:function(e){e.exports={nested:{HrSwitch_t:{fields:{HrSwitch:{type:"uint32",id:1},HrInterval:{type:"uint32",id:2},HrDailyWarnEn:{type:"uint32",id:3},HrDailyWarnVal:{type:"uint32",id:4},HrSportWarnEn:{type:"uint32",id:5},HrSportWarnVal:{type:"uint32",id:6}}},Spo2Switch_t:{fields:{Spo2Type:{type:"uint32",id:1},Spo2Switch:{type:"uint32",id:2},Spo2Interval:{type:"uint32",id:3}}},FallAsleepRemindSet_t:{fields:{RemindSwitch:{type:"uint32",id:1},RemindTime:{type:"uint32",id:2},RemindCycleMaskFlag:{type:"uint32",id:3}}},SleepSchedule_t:{fields:{SleepDuration:{type:"uint32",id:1},SleepStartTime:{type:"uint32",id:2},SleepEndTime:{type:"uint32",id:3},FallAsleepRemindSet:{type:"FallAsleepRemindSet_t",id:4},SleepReportSwitch:{type:"uint32",id:5}}},SleepSwitch_t:{fields:{SleepSwitch:{type:"uint32",id:1},SleepScheduleEn:{type:"bool",id:2},SleepSchedule:{type:"SleepSchedule_t",id:3}}},SedentaryReminder_t:{fields:{Enable:{type:"uint32",id:1},ThresholdValue:{type:"ThresholdValue_t",id:2},TimeSets:{rule:"repeated",type:"TimeRange_t",id:3}}},ThresholdValue_t:{fields:{Duration:{type:"uint32",id:1},Step:{type:"uint32",id:2}}},TimeRange_t:{fields:{StartTime:{type:"uint32",id:1},EndTime:{type:"uint32",id:2}}},RecordData_t:{fields:{DataType:{type:"uint32",id:1},RecordType:{type:"uint32",id:2}}},sleepReport_t:{options:{"(nanopb_msgopt).max_size":1470},fields:{valid:{type:"bool",id:1},fallSleep:{type:"uint32",id:2},sleepOut:{type:"uint32",id:3},REM:{type:"uint32",id:4},lightSleep:{type:"uint32",id:5},deepSleep:{type:"uint32",id:6},sleepScore:{type:"int32",id:7},sleepGrade:{type:"uint32",id:8},fallSleepSpend:{type:"uint32",id:9},exceptionHrs:{rule:"repeated",type:"exceptionHr_t",id:10,options:{"(nanopb).max_count":10}},hourApneas:{rule:"repeated",type:"apnea_t",id:11,options:{"(nanopb).max_count":24}},sleepDetail:{type:"bytes",id:12}}},apnea_t:{fields:{hour:{type:"uint32",id:1},times:{type:"uint32",id:2}}},exceptionHr_t:{fields:{timestamp:{type:"uint32",id:1},duration:{type:"uint32",id:2}}},SleepModeConfig_t:{fields:{isSet:{type:"bool",id:1},autoEnable:{type:"bool",id:2}}},WomenHealthConf_t:{fields:{mIsSet:{type:"bool",id:1},startTime:{type:"uint32",id:2},period:{type:"uint32",id:3},cycle:{type:"uint32",id:4}}},WomenHealthNotifySw_t:{fields:{isSet:{type:"bool",id:1},mensRemind:{type:"bool",id:2},ovulationRemind:{type:"bool",id:3}}},sportHrSectionCfg_t:{fields:{isSet:{type:"bool",id:1},hrSections:{rule:"repeated",type:"hrSection_t",id:2}}},hrSection_t:{fields:{min:{type:"uint32",id:1},max:{type:"uint32",id:2}}},pressureStatusReport_t:{fields:{status:{type:"uint32",id:1},pressureList:{rule:"repeated",type:"pressureStatus_t",id:2}}},pressureStatus_t:{fields:{timestamp:{type:"uint32",id:1},pressure:{type:"uint32",id:2}}},pressureStatusReq_t:{fields:{status:{type:"uint32",id:1}}}}}},7250:function(e,t,r){"use strict";r.r(t),r.d(t,{alarm:function(){return n},bind:function(){return i},deviceinfo:function(){return o},error:function(){return a},file:function(){return u},filerecard:function(){return c},health:function(){return s},music:function(){return l},notification:function(){return f},setting:function(){return d},sport:function(){return p},userinfo:function(){return h},watchface:function(){return v},weather:function(){return y}});var n=r(1297),i=r(608),o=r(2587),a=r(6538),u=r(7107),c=r(5719),s=r(4288),l=r(2406),f=r(389),d=r(8087),p=r(3701),h=r(3986),v=r(2339),y=r(7149)},2406:function(e){e.exports={nested:{MusicControlAction:{fields:{musicControlActionType:{type:"int32",id:1}}},TotalInfo:{fields:{playInfo:{type:"PlayInfo",id:1},playState:{type:"PlayState",id:2},volumeInfo:{type:"VolumeInfo",id:3},timeInfo:{type:"TimeInfo",id:4}}},PlayInfo:{fields:{musicTitle:{type:"string",id:1},musicArtist:{type:"string",id:2},musicAlbum:{type:"string",id:3},musicPackageName:{type:"string",id:4},musicAppName:{type:"string",id:5}}},PlayState:{fields:{playStateType:{type:"int32",id:1}}},VolumeInfo:{fields:{currentVolume:{type:"int32",id:1},maxVolume:{type:"int32",id:2}}},TimeInfo:{fields:{currentTime:{type:"uint32",id:1},totleTime:{type:"uint32",id:2}}},ControlSwitchInfo:{fields:{controlSwitch:{type:"uint32",id:1}}}}}},389:function(e){e.exports={nested:{NotificationSwitch_t:{fields:{MsgTotalSwitch:{type:"uint32",id:1},MsgSubSwitch:{rule:"repeated",type:"NotificationSubSwitch_t",id:2}}},NotificationSubSwitch_t:{fields:{MsgType:{type:"uint32",id:1},MsgSwitch:{type:"uint32",id:2}}},NotificationPostedText_t:{fields:{MsgId:{type:"uint32",id:1},MsgType:{type:"uint32",id:2},MsgPkgName:{type:"string",id:3},MsgUserDefined:{type:"string",id:4},MsgTitle:{type:"string",id:5},MsgContent:{type:"string",id:6},PostTime:{type:"uint32",id:7},MsgAppName:{type:"string",id:8},PhoneState:{type:"uint32",id:9},HasRemoteInput:{type:"bool",id:10}}},NotificationPostedPic_t:{fields:{CmdId:{type:"uint32",id:1},MsgId:{type:"uint32",id:2},MsgtType:{type:"uint32",id:3},MsgPkgName:{type:"string",id:4},MsgTag:{type:"string",id:5},CompressType:{type:"uint32",id:6},PicPixelH:{type:"uint32",id:7},PicPixelV:{type:"uint32",id:8},PicSize:{type:"uint32",id:9},PicType:{type:"uint32",id:10},PostTime:{type:"uint32",id:11},MsgAppName:{type:"string",id:12},PhoneState:{type:"uint32",id:13},HasRemoteInput:{type:"bool",id:14}}},NotificationReply_t:{fields:{MsgId:{type:"uint32",id:1},MsgType:{type:"uint32",id:2},MsgPkgName:{type:"string",id:3},MsgTag:{type:"string",id:4},ReplyText:{type:"string",id:5}}},NotificationRemoved_t:{fields:{MsgId:{type:"uint32",id:1},MsgType:{type:"uint32",id:2},MsgPkgName:{type:"string",id:3},MsgTag:{type:"string",id:4},RemoveAll:{type:"uint32",id:5}}},PhoneCallChange_t:{fields:{ChangeStatus:{type:"int32",id:1},CallRemoteNumber:{type:"string",id:2},DisconnectCause:{type:"int32",id:3},IsContactCall:{type:"bool",id:4},DisplayName:{type:"string",id:5}}}}}},8087:function(e){e.exports={nested:{AutoLightScreenAndHandGet_t:{fields:{HandSet:{type:"uint32",id:0},AutoLightScreenSw:{type:"uint32",id:1},AutoLightScreenTime:{rule:"repeated",type:"TimeRange_t",id:2}}},TimeRange_t:{fields:{StartTime:{type:"uint32",id:1},EndTime:{type:"uint32",id:2}}},NightModeGet_t:{fields:{NightModeSw:{type:"uint32",id:1},TimeSets:{rule:"repeated",type:"TimeRange_t",id:2}}},UeStateRequireGet_t:{fields:{UeState:{type:"uint32",id:1}}},MenuShow_t:{fields:{AllMenuList:{type:"bytes",id:1},ShowMenuList:{type:"bytes",id:2}}}}}},3701:function(e){e.exports={nested:{TodayActiveGoalGet_t:{fields:{GoalSw:{type:"uint32",id:1},GoalItem:{rule:"repeated",type:"GoalContent_t",id:2}}},GoalContent_t:{fields:{SubType:{type:"uint32",id:1},SubSw:{type:"uint32",id:2},SubValue:{type:"uint32",id:3}}},SportDetectionGet_t:{fields:{Sw:{type:"uint32",id:1},Item:{type:"ItemContent_t",id:2}}},ItemContent_t:{fields:{SubType:{type:"uint32",id:1},SubSw:{type:"uint32",id:2}}},SportAutoPauseStopGet_t:{fields:{AutoPauseSw:{type:"uint32",id:1},AutoPauseTimeSet:{type:"uint32",id:2},AutoStopTimeSet:{type:"uint32",id:3}}},TodayActiveTotalGet_t:{fields:{DayUtc:{type:"uint32",id:1},DayCalorie:{type:"uint32",id:2},DayStep:{type:"uint32",id:3},DayDistance:{type:"uint32",id:4},DayExercise:{type:"uint32",id:5},DayActivityCount:{type:"uint32",id:6},HighStrengthDuration:{type:"uint32",id:7},MiddleStrengthDuration:{type:"uint32",id:8},DayStandDetail:{type:"uint32",id:9},WakeupHr:{type:"uint32",id:10},DayWearDetail:{type:"uint32",id:11},WeekHighStrength:{type:"uint32",id:12},WeekMiddleStrength:{type:"uint32",id:13},HourActiveData:{type:"HourActiveData_t",id:14},DayExerciseTime:{type:"uint32",id:15}}},HourActiveData_t:{fields:{Calorie:{type:"uint32",id:1},Step:{type:"uint32",id:2},Distance:{type:"uint32",id:3},ExerciseTime:{type:"uint32",id:4},HighStrengthDuration:{type:"uint32",id:5},MiddleStrengthDuration:{type:"uint32",id:6},StandState:{type:"bool",id:7},WearState:{type:"bool",id:8}}},SportDescription_t:{fields:{StartTime:{type:"uint32",id:1},EndTime:{type:"uint32",id:2},SportIds:{rule:"repeated",type:"string",id:3}}},SportDetail_t:{fields:{SportIds:{type:"string",id:1}}},GpsSwitch_t:{fields:{GpsEnable:{type:"uint32",id:1},TimeOut:{type:"uint32",id:2},Interval:{type:"uint32",id:3},trackID:{type:"string",id:4}}},GpsLocationRsp_t:{fields:{StateCode:{type:"uint32",id:1},TimesTamp:{type:"uint32",id:2},Speed:{type:"double",id:3},InvertSpeed:{type:"double",id:4},Altitude:{type:"int32",id:5},Distance:{type:"float",id:6},Longitude:{type:"uint32",id:7},Latitude:{type:"uint32",id:8},Precision:{type:"uint32",id:9}}},activityStrength_t:{fields:{sportType:{type:"uint32",id:1},midActivityTime:{type:"uint32",id:2},highActivityTime:{type:"uint32",id:3}}},activityStrengthDetail_t:{fields:{activityStrengths:{rule:"repeated",type:"activityStrength_t",id:1}}},SportDetailPacket_t:{fields:{StartTime:{type:"uint32",id:1},TimeInterval:{type:"uint32",id:2},SportDetailData:{rule:"repeated",type:"DetailData_t",id:3}}},DetailData_t:{fields:{Pace:{type:"unit16",id:1},Hr:{type:"unit16",id:2},Frequency:{type:"unit16",id:3},Step:{type:"unit16",id:4},Distance:{type:"unit16",id:5},Cal:{type:"unit8",id:6},State:{type:"unit8",id:7}}},GpsLocation_t:{fields:{StateCode:{type:"uint32",id:1},TimesTamp:{type:"uint32",id:2},Speed:{type:"double",id:3},InvertSpeed:{type:"double",id:4},Altitude:{type:"int32",id:5},Distance:{type:"float",id:6},Longitude:{type:"uint32",id:7},latitude:{type:"uint32",id:8},precision:{type:"uint32",id:9}}},GpsDetailPacket_t:{fields:{GpsDetailData:{rule:"repeated",type:"DetailGps_t",id:1}}},DetailGps_t:{fields:{utc:{type:"uint32",id:1},longitude:{type:"uint32",id:2},latitude:{type:"uint32",id:3},state:{type:"uint8",id:4}}},PEClassGet_t:{fields:{isSet:{type:"bool",id:1},PEState:{type:"bool",id:2},PEDuration:{type:"uint32",id:3}}}}}},3986:function(e){e.exports={nested:{UserInfo_t:{fields:{Weight:{type:"uint32",id:1},Height:{type:"uint32",id:2},Birthday:{type:"uint32",id:3},Age:{type:"uint32",id:4},Gender:{type:"uint32",id:5},NickName:{type:"string",id:6}}}}}},2339:function(e){e.exports={nested:{pushWatchface_t:{fields:{watchface:{type:"watchface_t",id:1},index:{type:"uint32",id:2}}},pushStatus_t:{fields:{watchfaceId:{type:"string",id:1},status:{type:"uint32",id:2},errorCode:{type:"uint32",id:3}}},deleteWatchface_t:{fields:{watchfaceIds:{rule:"repeated",type:"string",id:1}}},watchfaceCapacity_t:{fields:{supportVersion:{type:"uint32",id:1},capacity:{type:"uint32",id:2},resolution:{type:"resolution_t",id:3},maxFilesize:{type:"uint32",id:4}}},resolution_t:{fields:{width:{type:"uint32",id:1},height:{type:"uint32",id:2}}},watchface_summary_t:{fields:{watchfaceIds:{rule:"repeated",type:"string",id:3},choosed:{type:"string",id:4}}},watchface_req_t:{fields:{watchfaceId:{type:"string",id:1}}},watchface_t:{fields:{watchfaceId:{type:"string",id:1},type:{type:"uint32",id:2},fileName:{type:"string",id:3},fileSize:{type:"uint32",id:4},version:{type:"uint32",id:5},formatVersion:{type:"uint32",id:6},visual:{type:"visual_t",id:7},city:{type:"city_t",id:8}}},visual_t:{fields:{backgrounds:{rule:"repeated",type:"string",id:1},styleId:{type:"uint32",id:2}}},city_t:{fields:{timezone:{type:"int32",id:1},name:{type:"string",id:2}}},sortWatchface_t:{fields:{watchfaceIds:{rule:"repeated",type:"string",id:1},choosed:{type:"string",id:2}}},syncChoosedWatchface_t:{fields:{choosedIdx:{type:"uint32",id:1},choosedID:{type:"string",id:2}}}}}},7149:function(e){e.exports={nested:{WeatherPush_t:{fields:{weatherInfo:{rule:"repeated",type:"WeatherInfo_t",id:1}}},WeatherInfo_t:{fields:{cityName:{type:"string",id:1},weatherType:{type:"uint32",id:2},temp:{type:"uint32",id:3},realFeelTemp:{type:"uint32",id:4},windPower:{type:"uint32",id:5},windDegrees:{type:"uint32",id:6},uvClass:{type:"uint32",id:7},uvIndex:{type:"uint32",id:8},humidity:{type:"uint32",id:9},visibility:{type:"uint32",id:10},pressure:{type:"uint32",id:11},rainProbability:{type:"uint32",id:12},sunriseTime:{type:"uint32",id:13},sunsetTime:{type:"uint32",id:14},avgPm25:{type:"uint32",id:15},avgAqi:{type:"uint32",id:16},hourlyWeather:{rule:"repeated",type:"HourlyWeather_t",id:17},dailyWeather:{rule:"repeated",type:"DailyWeather_t",id:18},updatedUTC:{type:"uint32",id:19},weatherTypeDefine:{type:"uint32",id:20}}},HourlyWeather_t:{fields:{hour:{type:"uint32",id:1},temp:{type:"int32",id:2},weatherType:{type:"uint32",id:3}}},DailyWeather_t:{fields:{weatherType:{type:"uint32",id:1},highTemp:{type:"int32",id:2},lowTemp:{type:"int32",id:3},sunriseTime:{type:"uint32",id:4},sunsetTime:{type:"uint32",id:5}}}}}},1795:function(e,t,r){"use strict";r.r(t);var n=r(7934),i=r.n(n);t.default={decodePb:function(e,t,r){return i().Root.fromJSON(e).lookupType(t).decode(r)},encodePb:function(e,t,r){t=t.trim();let n=i().Root.fromJSON(e).lookupType(t),o=n.create(r);return n.encode(o).finish()}}},7934:function(e,t,r){e.exports=function(){function e(){t.converter._configure(),t.decoder._configure(),t.encoder._configure(),t.Field._configure(),t.MapField._configure(),t.Message._configure(),t.Namespace._configure(),t.Method._configure(),t.ReflectionObject._configure(),t.OneOf._configure(),t.parse._configure(),t.Reader._configure(),t.Root._configure(),t.Service._configure(),t.verifier._configure(),t.Type._configure(),t.types._configure(),t.wrappers._configure(),t.Writer._configure()}var t={build:"minimal"};if(t.Writer=r(372),t.encoder=r(9909),t.Reader=r(9384),t.util=r(3472),t.rpc=r(6427),t.roots=r(789),t.verifier=r(4235),t.tokenize=r(6448),t.parse=r(7965),t.common=r(9290),t.ReflectionObject=r(5988),t.Namespace=r(8909),t.Root=r(4902),t.Enum=r(343),t.Type=r(8529),t.Field=r(7255),t.OneOf=r(4543),t.MapField=r(4357),t.Service=r(6007),t.Method=r(5467),t.converter=r(9904),t.decoder=r(7285),t.Message=r(1912),t.wrappers=r(5785),t.types=r(5360),t.util=r(3472),t.configure=e,t.load=function(e,r,n){return"function"==typeof r?(n=r,r=new t.Root):!r&&(r=new t.Root),r.load(e,n)},t.loadSync=function(e,r){return r||(r=new t.Root),r.loadSync(e)},t.parseFromPbString=function(e,r,n){return"function"==typeof r?(n=r,r=new t.Root):!r&&(r=new t.Root),r.parseFromPbString(e,n)},e(),arguments&&arguments.length)for(var n,i=0;i<arguments.length;i++)if((n=arguments[i]).hasOwnProperty("exports"))return void(n.exports=t);return t}()},4344:function(e){"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this}},9535:function(e){"use strict";e.exports=function(e,t){for(var r=Array(arguments.length-1),n=0,i=2,o=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise((function(i,a){r[n]=function(e){if(o)if(o=!1,e)a(e);else{for(var t=Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];i.apply(null,t)}};try{e.apply(t||null,r)}catch(e){o&&(o=!1,a(e))}}))}},5599:function(e){"use strict";var t=e.exports;t.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;1<--t%4&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var r=Array(64),n=Array(123),i=0;64>i;)n[r[i]=26>i?i+65:52>i?i+71:62>i?i-4:43|i-59]=i++;t.encode=function(e,t,n){for(var i,o,a=String.fromCharCode,u=null,c=[],s=0,l=0;t<n;)o=e[t++],0===l?(c[s++]=r[o>>2],i=(3&o)<<4,l=1):1===l?(c[s++]=r[i|o>>4],i=(15&o)<<2,l=2):2===l&&(c[s++]=r[i|o>>6],c[s++]=r[63&o],l=0),8191<s&&((u||(u=[])).push(a.apply(String,c)),s=0);return l&&(c[s++]=r[i],c[s++]=61,1===l&&(c[s++]=61)),u?(s&&u.push(a.apply(String,c.slice(0,s))),u.join("")):a.apply(String,c.slice(0,s))};var o="invalid encoding";t.decode=function(e,t,r){for(var i,a,u=r,c=0,s=0;s<e.length&&!(61===(a=e.charCodeAt(s++))&&1<c);){if(void 0===(a=n[a]))throw Error(o);0===c?(i=a,c=1):1===c?(t[r++]=i<<2|(48&a)>>4,i=a,c=2):2===c?(t[r++]=(15&i)<<4|(60&a)>>2,i=a,c=3):3===c&&(t[r++]=(3&i)<<6|a,c=0)}if(1===c)throw Error(o);return r-u},t.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},9290:function(e){e.exports=n;var t,r=/\/|\./;function n(e,t){r.test(e)||(e="google/protobuf/"+e+".proto",t={nested:{google:{nested:{protobuf:{nested:t}}}}}),n[e]=t}n("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}}),n("duration",{Duration:t={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),n("timestamp",{Timestamp:t}),n("empty",{Empty:{fields:{}}}),n("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),n("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),n("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),n.get=function(e){return n[e]||null}},9904:function(e,t,r){var n,i,o=e.exports;function a(e,t,r,o){var a=o.m,u=o.d,c=o.types,s=o.ksi,l=void 0!==s;if(e.resolvedType)if(e.resolvedType instanceof n){for(var f=l?u[r][s]:u[r],d=e.resolvedType.values,p=Object.keys(d),h=0;h<p.length;h++)if(!(e.repeated&&d[p[h]]===e.typeDefault||p[h]!=f&&d[p[h]]!=f)){l?a[r][s]=d[p[h]]:a[r]=d[p[h]];break}}else{if("object"!=typeof(l?u[r][s]:u[r]))throw TypeError(e.fullName+": object expected");l?a[r][s]=c[t].fromObject(u[r][s]):a[r]=c[t].fromObject(u[r])}else{var v=!1;switch(e.type){case"double":case"float":l?a[r][s]=+u[r][s]:a[r]=+u[r];break;case"uint32":case"fixed32":l?a[r][s]=u[r][s]>>>0:a[r]=u[r]>>>0;break;case"int32":case"sint32":case"sfixed32":l?a[r][s]=0|u[r][s]:a[r]=0|u[r];break;case"uint64":v=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":i.Long?l?a[r][s]=i.Long.fromValue(u[r][s]).unsigned=v:a[r]=i.Long.fromValue(u[r]).unsigned=v:"string"==typeof(l?u[r][s]:u[r])?l?a[r][s]=parseInt(u[r][s],10):a[r]=parseInt(u[r],10):"number"==typeof(l?u[r][s]:u[r])?l?a[r][s]=u[r][s]:a[r]=u[r]:"object"==typeof(l?u[r][s]:u[r])&&(l?a[r][s]=new i.LongBits(u[r][s].low>>>0,u[r][s].high>>>0).toNumber(v):a[r]=new i.LongBits(u[r].low>>>0,u[r].high>>>0).toNumber(v));break;case"bytes":"string"==typeof(l?u[r][s]:u[r])?l?i.base64.decode(u[r][s],a[r][s]=i.newBuffer(i.base64.length(u[r][s])),0):i.base64.decode(u[r],a[r]=i.newBuffer(i.base64.length(u[r])),0):(l?u[r][s]:u[r]).length&&(l?a[r][s]=u[r][s]:a[r]=u[r]);break;case"string":l?a[r][s]=u[r][s]+"":a[r]=u[r]+"";break;case"bool":l?a[r][s]=!!u[r][s]:a[r]=!!u[r]}}}function u(e,t,r,o){var a=o.m,u=o.d,c=o.types,s=o.ksi,l=o.o,f=void 0!==s;if(e.resolvedType)e.resolvedType instanceof n?f?u[r][s]=l.enums===String?c[t].values[a[r][s]]:a[r][s]:u[r]=l.enums===String?c[t].values[a[r]]:a[r]:f?u[r][s]=c[t].toObject(a[r][s],l):u[r]=c[t].toObject(a[r],l);else{var d=!1;switch(e.type){case"double":case"float":f?u[r][s]=l.json&&!isFinite(a[r][s])?a[r][s]+"":a[r][s]:u[r]=l.json&&!isFinite(a[r])?a[r]+"":a[r];break;case"uint64":d=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":"number"==typeof a[r][s]?f?u[r][s]=l.longs===String?a[r][s]+"":a[r][s]:u[r]=l.longs===String?a[r]+"":a[r]:f?u[r][s]=l.longs===String?i.Long.prototype.toString.call(a[r][s]):l.longs===Number?new i.LongBits(a[r][s].low>>>0,a[r][s].high>>>0).toNumber(d):a[r][s]:u[r]=l.longs===String?i.Long.prototype.toString.call(a[r]):l.longs===Number?new i.LongBits(a[r].low>>>0,a[r].high>>>0).toNumber(d):a[r];break;case"bytes":f?u[r][s]=l.bytes===String?i.base64.encode(a[r][s],0,a[r][s].length):l.bytes===Array?Array.prototype.slice.call(a[r][s]):a[r][s]:u[r]=l.bytes===String?i.base64.encode(a[r],0,a[r].length):l.bytes===Array?Array.prototype.slice.call(a[r]):a[r];break;default:f?u[r][s]=a[r][s]:u[r]=a[r]}}}o._configure=function(){n=r(343),i=r(3472)},o.fromObject=function(e){var t=e.fieldsArray;return function(e){return function(r){if(r instanceof this.ctor)return r;if(!t.length)return new this.ctor;for(var o=new this.ctor,u=0;u<t.length;++u){var c,s=t[u].resolve(),l=s.name;if(s.map){if(r[l]){if("object"!=typeof r[l])throw TypeError(s.fullName+": object expected");o[l]={}}var f=Object.keys(r[l]);for(c=0;c<f.length;++c)a(s,u,l,i.merge(i.copy(e),{m:o,d:r,ksi:f[c]}))}else if(s.repeated){if(r[l]){if(!Array.isArray(r[l]))throw TypeError(s.fullName+": array expected");for(o[l]=[],c=0;c<r[l].length;++c)a(s,u,l,i.merge(i.copy(e),{m:o,d:r,ksi:c}))}}else(s.resolvedType instanceof n||null!=r[l])&&a(s,u,l,i.merge(i.copy(e),{m:o,d:r}))}return o}}},o.toObject=function(e){var t=e.fieldsArray.slice().sort(i.compareFieldsById);return function(r){return t.length?function(o,a){var c=String.fromCharCode;a=a||{};for(var s,l,f={},d=[],p=[],h=[],v=0;v<t.length;++v)t[v].partOf||(t[v].resolve().repeated?d:t[v].map?p:h).push(t[v]);if(d.length&&(a.arrays||a.defaults))for(v=0;v<d.length;++v)f[d[v].name]=[];if(p.length&&(a.objects||a.defaults))for(v=0;v<p.length;++v)f[p[v].name]={};if(h.length&&a.defaults)for(v=0;v<h.length;++v)if(l=(s=h[v]).name,s.resolvedType instanceof n)f[l]=a.enums=String?s.resolvedType.valuesById[s.typeDefault]:s.typeDefault;else if(s.long)if(i.Long){var y=new i.Long(s.typeDefault.low,s.typeDefault.high,s.typeDefault.unsigned);f[l]=a.longs===String?y.toString():a.longs===Number?y.toNumber():y}else f[l]=a.longs===String?s.typeDefault.toString():s.typeDefault.toNumber();else f[l]=s.bytes?a.bytes===String?c.apply(String,s.typeDefault):Array.prototype.slice.call(s.typeDefault).join("*..*").split("*..*"):s.typeDefault;var b=!1;for(v=0;v<t.length;++v){l=(s=t[v]).name;var m,g,w=e._fieldsArray.indexOf(s);if(s.map){if(b||(b=!0),o[l]&&(m=Object.keys(o[l]).length))for(f[l]={},g=0;g<m.length;++g)u(s,w,l,i.merge(i.copy(r),{m:o,d:f,ksi:m[g],o:a}))}else if(s.repeated){if(o[l]&&o[l].length)for(f[l]=[],g=0;g<o[l].length;++g)u(s,w,l,i.merge(i.copy(r),{m:o,d:f,ksi:g,o:a}))}else null!=o[l]&&o.hasOwnProperty(l)&&u(s,w,l,i.merge(i.copy(r),{m:o,d:f,o:a})),s.partOf&&a.oneofs&&(f[s.partOf.name]=l)}return f}:function(){return{}}}}},7285:function(e,t,r){var n,i,o;function a(e){return"missing required '"+e.name+"'"}function u(e){return function(t){var r=t.Reader,u=t.types,c=t.util;return function(t,s){t instanceof r||(t=r.create(t));for(var l,f=void 0===s?t.len:t.pos+s,d=new this.ctor;t.pos<f;){var p=t.uint32();if(e.group&&4==(7&p))break;for(var h=0,v=!1;h<e.fieldsArray.length;++h){var y=e._fieldsArray[h].resolve(),b=y.name,m=y.resolvedType instanceof n?"int32":y.type;if(p>>>3==y.id){if(v=!0,y.map)t.skip().pos++,d[b]===c.emptyObject&&(d[b]={}),l=t[y.keyType](),t.pos++,null==i.long[y.keyType]?null==i.basic[m]?d[b]=u[h].decode(t,t.uint32()):d[b]=t[m]():null==i.basic[m]?d[b]["object"==typeof l?c.longToHash(l):l]=u[h].decode(t,t.uint32()):d[b]["object"==typeof l?c.longToHash(l):l]=t[m]();else if(y.repeated)if(d[b]&&d[b].length||(d[b]=[]),null!=i.packed[m]&&2==(7&p))for(var g=t.uint32()+t.pos;t.pos<g;)d[b].push(t[m]());else null==i.basic[m]?y.resolvedType.group?d[b].push(u[h].decode(t)):d[b].push(u[h].decode(t,t.uint32())):d[b].push(t[m]());else d[b]=null==i.basic[m]?y.resolvedType.group?u[h].decode(t):u[h].decode(t,t.uint32()):t[m]();break}}v||t.skipType(7&p)}for(h=0;h<e._fieldsArray.length;++h){var w=e._fieldsArray[h];if(w.required&&!d.hasOwnProperty(w.name))throw o.ProtocolError(a(w),{instance:d})}return d}}}e.exports=u,u._configure=function(){n=r(343),i=r(5360),o=r(3472)}},9909:function(e,t,r){var n,i;function o(e){return function(t){var r=t.Writer,o=t.types,a=t.util;return function(t,u){u=u||r.create();for(var c=e.fieldsArray.slice().sort(a.compareFieldsById),s=0;s<c.length;s++){var l=c[s],f=e._fieldsArray.indexOf(l),d=l.resolvedType instanceof n?"uint32":l.type,p=i.basic[d],h=t[l.name];if(l.resolvedType instanceof n&&"string"==typeof h&&(h=o[f].values[h]),l.map){if(null!=h&&t.hasOwnProperty(l.name))for(var v=Object.keys(h),y=0;y<v.length;++y)u.uint32((2|l.id<<3)>>>0).fork().uint32(8|i.mapKey[l.keyType])[l.keyType](v[y]),void 0===p?o[f].encode(h[v[y]],u.uint32(18).fork()).ldelim().ldelim():u.uint32(16|p)[d](h[v[y]]).ldelim()}else if(l.repeated){if(h&&h.length)if(l.packed&&void 0!==i.packed[d]){u.uint32((2|l.id<<3)>>>0).fork();for(var b=0;b<h.length;b++)u[d](h[b]);u.ldelim()}else for(var m=0;m<h.length;m++)void 0===p?l.resolvedType.group?o[f].encode(h[m],u.uint32((3|l.id<<3)>>>0)).uint32((4|l.id<<3)>>>0):o[f].encode(h[m],u.uint32((2|l.id<<3)>>>0).fork()).ldelim():u.uint32((l.id<<3|p)>>>0)[d](h[m])}else(!l.optional||null!=h&&t.hasOwnProperty(l.name))&&(!l.optional&&(null==h||!t.hasOwnProperty(l.name))&&console.warn("注意啦!!!很大概率会报错 类型:",t.$type?t.$type.name:"不晓得","没有设置对应的属性:",l.name,"检查是不是proto文件属性设置为了required"),void 0===p?l.resolvedType.group?o[f].encode(h,u.uint32((3|l.id<<3)>>>0)).uint32((4|l.id<<3)>>>0):o[f].encode(h,u.uint32((2|l.id<<3)>>>0).fork()).ldelim():u.uint32((l.id<<3|p)>>>0)[d](h))}return u}}}e.exports=o,o._configure=function(){n=r(343),i=r(5360)}},343:function(e,t,r){e.exports=o;var n=r(5988);((o.prototype=Object.create(n.prototype)).constructor=o).className="Enum";var i=r(8909);function o(e,t,r,i,o){if(n.call(this,e,r),t&&"object"!=typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=i,this.comments=o||{},this.reserved=void 0,t)for(var a=Object.keys(t),u=0;u<a.length;++u)"number"==typeof t[a[u]]&&(this.valuesById[this.values[a[u]]=t[a[u]]]=a[u])}o.fromJSON=function(e,t){var r=new o(e,t.values,t.options,t.comment,t.comments);return r.reserved=t.reserved,r},o.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return util.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},o.prototype.add=function(e,t,r){if(!util.isString(e))throw TypeError("name must be a string");if(!util.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return this.comments[e]=r||null,this},o.prototype.remove=function(e){if(!util.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this},o.prototype.isReservedId=function(e){return i.isReservedId(this.reserved,e)},o.prototype.isReservedName=function(e){return i.isReservedName(this.reserved,e)}},7255:function(e,t,r){e.exports=s;var n=r(5988);((s.prototype=Object.create(n.prototype)).constructor=s).className="Field";var i,o,a,u,c=/^required|optional|repeated$/;function s(e,t,r,i,u,s,l){if(a.isObject(i)?(l=u,s=i,i=u=void 0):a.isObject(u)&&(l=s,s=u,u=void 0),n.call(this,e,s),!a.isInteger(t)||0>t)throw TypeError("id must be a non-negative integer");if(!a.isString(r))throw TypeError("type must be a string");if(void 0!==i&&!c.test(i=i.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==u&&!a.isString(u))throw TypeError("extend must be a string");this.rule=i&&"optional"!==i?i:void 0,this.type=r,this.id=t,this.extend=u||void 0,this.required="required"===i,this.optional=!this.required,this.repeated="repeated"===i,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!a.Long&&void 0!==o.long[r],this.bytes="bytes"===r,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=l}s.fromJSON=function(e,t){return new s(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(s.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),s.prototype.setOption=function(e,t,r){return"packed"===e&&(this._packed=null),n.prototype.setOption.call(this,e,t,r)},s.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return a.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},s.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=o.defaults[this.type])&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.typeDefault=this.resolvedType instanceof u?null:this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof i&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&((!0===this.options.packed||void 0!==this.options.packed&&this.resolvedType&&!(this.resolvedType instanceof i))&&delete this.options.packed,!Object.keys(this.options).length&&(this.options=void 0)),this.long)this.typeDefault=a.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;a.utf8.write(this.typeDefault,e=a.newBuffer(a.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.defaultValue=this.map?a.emptyObject:this.repeated?a.emptyArray:this.typeDefault,this.parent instanceof u&&(this.parent.ctor.prototype[this.name]=this.defaultValue),n.prototype.resolve.call(this)},s.d=function(e,t,r,n){return"function"==typeof t?t=a.decorateType(t).name:t&&"object"==typeof t&&(t=a.decorateEnum(t).name),function(i,o){a.decorateType(i.constructor).add(new s(o,e,t,r,{default:n}))}},s._configure=function(){u=r(8529),i=r(343),o=r(5360),a=r(3472)}},2333:function(e){function t(e){var t=Math.pow,a=Math.floor,u=Math.LN2,c=Math.log;return"undefined"==typeof Float32Array?function(){function s(e,r,n,i){var o=Math.round,s=0>r?1:0;if(s&&(r=-r),0===r)e(0<1/r?0:2147483648,n,i);else if(isNaN(r))e(2143289344,n,i);else if(34028234663852886e22<r)e((2139095040|s<<31)>>>0,n,i);else if(11754943508222875e-54>r)e((s<<31|o(r/1401298464324817e-60))>>>0,n,i);else{var l=a(c(r)/u);e((s<<31|l+127<<23|8388607&o(r*t(2,-l)*8388608))>>>0,n,i)}}function l(e,r,n){var i=e(r,n),o=2*(i>>31)+1,a=255&i>>>23,u=8388607&i;return 255==a?u?NaN:o*(1/0):0===a?1401298464324817e-60*o*u:o*t(2,a-150)*(u+8388608)}e.writeFloatLE=s.bind(null,r),e.writeFloatBE=s.bind(null,n),e.readFloatLE=l.bind(null,i),e.readFloatBE=l.bind(null,o)}():function(){function t(e,t,r){o[0]=e,t[r]=a[0],t[r+1]=a[1],t[r+2]=a[2],t[r+3]=a[3]}function r(e,t,r){o[0]=e,t[r]=a[3],t[r+1]=a[2],t[r+2]=a[1],t[r+3]=a[0]}function n(e,t){return a[0]=e[t],a[1]=e[t+1],a[2]=e[t+2],a[3]=e[t+3],o[0]}function i(e,t){return a[3]=e[t],a[2]=e[t+1],a[1]=e[t+2],a[0]=e[t+3],o[0]}var o=new Float32Array([-0]),a=new Uint8Array(o.buffer),u=128===a[3];e.writeFloatLE=u?t:r,e.writeFloatBE=u?r:t,e.readFloatLE=u?n:i,e.readFloatBE=u?i:n}(),"undefined"==typeof Float64Array?function(){function s(e,r,n,i,o,s){var l=0>i?1:0;if(l&&(i=-i),0===i)e(0,o,s+r),e(0<1/i?0:2147483648,o,s+n);else if(isNaN(i))e(0,o,s+r),e(2146959360,o,s+n);else if(17976931348623157e292<i)e(0,o,s+r),e((2146435072|l<<31)>>>0,o,s+n);else{var f;if(22250738585072014e-324>i)e((f=i/5e-324)>>>0,o,s+r),e((l<<31|f/4294967296)>>>0,o,s+n);else{var d=a(c(i)/u);1024===d&&(d=1023),e(4503599627370496*(f=i*t(2,-d))>>>0,o,s+r),e((l<<31|d+1023<<20|1048575&1048576*f)>>>0,o,s+n)}}}function l(e,r,n,i,o){var a=e(i,o+r),u=e(i,o+n),c=2*(u>>31)+1,s=2047&u>>>20,l=4294967296*(1048575&u)+a;return 2047===s?l?NaN:c*(1/0):0===s?5e-324*c*l:c*t(2,s-1075)*(l+4503599627370496)}e.writeDoubleLE=s.bind(null,r,0,4),e.writeDoubleBE=s.bind(null,n,4,0),e.readDoubleLE=l.bind(null,i,0,4),e.readDoubleBE=l.bind(null,o,4,0)}():function(){function t(e,t,r){o[0]=e,t[r]=a[0],t[r+1]=a[1],t[r+2]=a[2],t[r+3]=a[3],t[r+4]=a[4],t[r+5]=a[5],t[r+6]=a[6],t[r+7]=a[7]}function r(e,t,r){o[0]=e,t[r]=a[7],t[r+1]=a[6],t[r+2]=a[5],t[r+3]=a[4],t[r+4]=a[3],t[r+5]=a[2],t[r+6]=a[1],t[r+7]=a[0]}function n(e,t){return a[0]=e[t],a[1]=e[t+1],a[2]=e[t+2],a[3]=e[t+3],a[4]=e[t+4],a[5]=e[t+5],a[6]=e[t+6],a[7]=e[t+7],o[0]}function i(e,t){return a[7]=e[t],a[6]=e[t+1],a[5]=e[t+2],a[4]=e[t+3],a[3]=e[t+4],a[2]=e[t+5],a[1]=e[t+6],a[0]=e[t+7],o[0]}var o=new Float64Array([-0]),a=new Uint8Array(o.buffer),u=128===a[7];e.writeDoubleLE=u?t:r,e.writeDoubleBE=u?r:t,e.readDoubleLE=u?n:i,e.readDoubleBE=u?i:n}(),e}function r(e,t,r){t[r]=255&e,t[r+1]=255&e>>>8,t[r+2]=255&e>>>16,t[r+3]=e>>>24}function n(e,t,r){t[r]=e>>>24,t[r+1]=255&e>>>16,t[r+2]=255&e>>>8,t[r+3]=255&e}function i(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function o(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},2282:function(e){e.exports=r;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function n(e){return!0===(e&&e.__isLong__)}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=n;var i={},o={};function a(e,t){var r,n,a;return t?(a=0<=(e>>>=0)&&256>e)&&(n=o[e])?n:(r=c(e,0>(0|e)?-1:0,!0),a&&(o[e]=r),r):(a=-128<=(e|=0)&&128>e)&&(n=i[e])?n:(r=c(e,0>e?-1:0,!1),a&&(i[e]=r),r)}function u(e,t){if(isNaN(e))return t?b:y;if(t){if(0>e)return b;if(e>=p)return _}else{if(e<=-h)return O;if(e+1>=h)return S}return 0>e?u(-e,t).neg():c(0|e%d,0|e/d,t)}function c(e,t,n){return new r(e,t,n)}r.fromInt=a,r.fromNumber=u,r.fromBits=c;var s=Math.pow;function l(e,t,r){var n,i=Math.min;if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return y;if("number"==typeof t?(r=t,t=!1):t=!!t,2>(r=r||10)||36<r)throw RangeError("radix");if(0<(n=e.indexOf("-")))throw Error("interior hyphen");if(0===n)return l(e.substring(1),t,r).neg();for(var o=u(s(r,8)),a=y,c=0;c<e.length;c+=8){var f=i(8,e.length-c),d=parseInt(e.substring(c,c+f),r);if(8>f){var p=u(s(r,f));a=a.mul(p).add(u(d))}else a=(a=a.mul(o)).add(u(d))}return a.unsigned=t,a}function f(e,t){return"number"==typeof e?u(e,t):"string"==typeof e?l(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=l,r.fromValue=f;var d=4294967296,p=d*d,h=p/2,v=a(16777216),y=a(0);r.ZERO=y;var b=a(0,!0);r.UZERO=b;var m=a(1);r.ONE=m;var g=a(1,!0);r.UONE=g;var w=a(-1);r.NEG_ONE=w;var S=c(-1,2147483647,!1);r.MAX_VALUE=S;var _=c(-1,-1,!0);r.MAX_UNSIGNED_VALUE=_;var O=c(0,-2147483648,!1);r.MIN_VALUE=O;var I=r.prototype;I.toInt=function(){return this.unsigned?this.low>>>0:this.low},I.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},I.toString=function(e){if(2>(e=e||10)||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(O)){var t=u(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=u(s(e,6),this.unsigned),o=this,a="";;){var c=o.div(i),l=(o.sub(c.mul(i)).toInt()>>>0).toString(e);if((o=c).isZero())return l+a;for(;6>l.length;)l="0"+l;a=""+l+a}},I.getHighBits=function(){return this.high},I.getHighBitsUnsigned=function(){return this.high>>>0},I.getLowBits=function(){return this.low},I.getLowBitsUnsigned=function(){return this.low>>>0},I.getNumBitsAbs=function(){if(this.isNegative())return this.eq(O)?64:this.neg().getNumBitsAbs();for(var e=0==this.high?this.low:this.high,t=31;0<t&&0==(e&1<<t);t--);return 0==this.high?t+1:t+33},I.isZero=function(){return 0===this.high&&0===this.low},I.eqz=I.isZero,I.isNegative=function(){return!this.unsigned&&0>this.high},I.isPositive=function(){return this.unsigned||0<=this.high},I.isOdd=function(){return 1==(1&this.low)},I.isEven=function(){return 0==(1&this.low)},I.equals=function(e){return n(e)||(e=f(e)),(this.unsigned===e.unsigned||1!=this.high>>>31||1!=e.high>>>31)&&this.high===e.high&&this.low===e.low},I.eq=I.equals,I.notEquals=function(e){return!this.eq(e)},I.neq=I.notEquals,I.ne=I.notEquals,I.lessThan=function(e){return 0>this.comp(e)},I.lt=I.lessThan,I.lessThanOrEqual=function(e){return 0>=this.comp(e)},I.lte=I.lessThanOrEqual,I.le=I.lessThanOrEqual,I.greaterThan=function(e){return 0<this.comp(e)},I.gt=I.greaterThan,I.greaterThanOrEqual=function(e){return 0<=this.comp(e)},I.gte=I.greaterThanOrEqual,I.ge=I.greaterThanOrEqual,I.compare=function(e){if(n(e)||(e=f(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},I.comp=I.compare,I.negate=function(){return!this.unsigned&&this.eq(O)?O:this.not().add(m)},I.neg=I.negate,I.add=function(e){n(e)||(e=f(e));var t=this.high>>>16,r=65535&this.high,i=this.low>>>16,o=65535&this.low,a=e.high>>>16,u=65535&e.high,s=e.low>>>16,l=0,d=0,p=0,h=0;return p+=(h+=o+(65535&e.low))>>>16,d+=(p+=i+s)>>>16,l+=(d+=r+u)>>>16,l+=t+a,c((p&=65535)<<16|(h&=65535),(l&=65535)<<16|(d&=65535),this.unsigned)},I.subtract=function(e){return n(e)||(e=f(e)),this.add(e.neg())},I.sub=I.subtract,I.multiply=function(e){if(this.isZero())return y;if(n(e)||(e=f(e)),t)return c(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return y;if(this.eq(O))return e.isOdd()?O:y;if(e.eq(O))return this.isOdd()?O:y;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(v)&&e.lt(v))return u(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,i=65535&this.high,o=this.low>>>16,a=65535&this.low,s=e.high>>>16,l=65535&e.high,d=e.low>>>16,p=65535&e.low,h=0,b=0,m=0,g=0;return m+=(g+=a*p)>>>16,b+=(m+=o*p)>>>16,m&=65535,b+=(m+=a*d)>>>16,h+=(b+=i*p)>>>16,b&=65535,h+=(b+=o*d)>>>16,b&=65535,h+=(b+=a*l)>>>16,h+=r*p+i*d+o*l+a*s,c((m&=65535)<<16|(g&=65535),(h&=65535)<<16|(b&=65535),this.unsigned)},I.mul=I.multiply,I.divide=function(e){var r,i,o,a=Math.ceil,l=Math.LN2,d=Math.log,p=Math.max,h=Math.floor;if(n(e)||(e=f(e)),e.isZero())throw Error("division by zero");if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?b:y;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return b;if(e.gt(this.shru(1)))return g;o=b}else{if(this.eq(O))return e.eq(m)||e.eq(w)?O:e.eq(O)?m:(r=this.shr(1).div(e).shl(1)).eq(y)?e.isNegative()?m:w:(i=this.sub(e.mul(r)),o=r.add(i.div(e)));if(e.eq(O))return this.unsigned?b:y;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=y}for(i=this;i.gte(e);){for(var v=a(d(r=p(1,h(i.toNumber()/e.toNumber())))/l),S=48>=v?1:s(2,v-48),_=u(r),I=_.mul(e);I.isNegative()||I.gt(i);)I=(_=u(r-=S,this.unsigned)).mul(e);_.isZero()&&(_=m),o=o.add(_),i=i.sub(I)}return o},I.div=I.divide,I.modulo=function(e){return n(e)||(e=f(e)),t?c((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},I.mod=I.modulo,I.rem=I.modulo,I.not=function(){return c(~this.low,~this.high,this.unsigned)},I.and=function(e){return n(e)||(e=f(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},I.or=function(e){return n(e)||(e=f(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},I.xor=function(e){return n(e)||(e=f(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},I.shiftLeft=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:32>e?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},I.shl=I.shiftLeft,I.shiftRight=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:32>e?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,0<=this.high?0:-1,this.unsigned)},I.shr=I.shiftRight,I.shiftRightUnsigned=function(e){if(n(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return 32>e?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},I.shru=I.shiftRightUnsigned,I.shr_u=I.shiftRightUnsigned,I.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},I.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},I.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},I.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,255&t>>>8,255&t>>>16,t>>>24,255&e,255&e>>>8,255&e>>>16,e>>>24]},I.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,255&e>>>16,255&e>>>8,255&e,t>>>24,255&t>>>16,255&t>>>8,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},2223:function(e){function t(e,t){this.lo=e>>>0,this.hi=t>>>0}e.exports=t;var r=t.zero=new t(0,0);r.toNumber=function(){return 0},r.zzEncode=r.zzDecode=function(){return this},r.length=function(){return 1};var n=t.zeroHash="\0\0\0\0\0\0\0\0";t.fromNumber=function(e){if(0===e)return r;var n=0>e;n&&(e=-e);var i=e>>>0,o=(e-i)/4294967296>>>0;return n&&(o=~o>>>0,i=~i>>>0,4294967295<++i&&(i=0,4294967295<++o&&(o=0))),new t(i,o)},t.from=function(e){return"number"==typeof e?t.fromNumber(e):"string"==typeof e||e instanceof String?t.fromNumber(parseInt(e,10)):e.low||e.high?new t(e.low>>>0,e.high>>>0):r},t.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},t.prototype.toLong=function(e){return{low:0|this.lo,high:0|this.hi,unsigned:!!e}};var i=String.prototype.charCodeAt;t.fromHash=function(e){return e===n?r:new t((i.call(e,0)|i.call(e,1)<<8|i.call(e,2)<<16|i.call(e,3)<<24)>>>0,(i.call(e,4)|i.call(e,5)<<8|i.call(e,6)<<16|i.call(e,7)<<24)>>>0)},t.prototype.toHash=function(){return String.fromCharCode(255&this.lo,255&this.lo>>>8,255&this.lo>>>16,this.lo>>>24,255&this.hi,255&this.hi>>>8,255&this.hi>>>16,this.hi>>>24)},t.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},t.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},t.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0==r?0===t?16384>e?128>e?1:2:2097152>e?3:4:16384>t?128>t?5:6:2097152>t?7:8:128>r?9:10}},4357:function(e,t,r){e.exports=a;var n,i,o=r(7255);function a(e,t,r,n,a,u){if(o.call(this,e,t,n,void 0,void 0,a,u),!i.isString(r))throw TypeError("keyType must be a string");this.keyType=r,this.resolvedKeyType=null,this.map=!0}((a.prototype=Object.create(o.prototype)).constructor=a).className="MapField",a.fromJSON=function(e,t){return new a(e,t.id,t.keyType,t.type,t.options,t.comment)},a.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return i.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},a.prototype.resolve=function(){if(this.resolved)return this;if(void 0===n.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return o.prototype.resolve.call(this)},a.d=function(e,t,r){return"function"==typeof r?r=i.decorateType(r).name:r&&"object"==typeof r&&(r=i.decorateEnum(r).name),function(n,o){i.decorateType(n.constructor).add(new a(o,e,t,r))}},a._configure=function(){n=r(5360),i=r(3472)}},1912:function(e,t,r){"use strict";var n;function i(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)this[t[r]]=e[t[r]]}e.exports=i,i.create=function(e){return this.$type.create(e)},i.encode=function(){return arguments.length?1==arguments.length?this.$type.encode(arguments[0]):this.$type.encode(arguments[0],arguments[1]):this.$type.encode(this)},i.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},i.decode=function(e){return this.$type.decode(e)},i.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},i.verify=function(e){return this.$type.verify(e)},i.fromObject=function(e){return this.$type.fromObject(e)},i.toObject=function(e,t){return e=e||this,this.$type.toObject(e,t)},i.prototype.toJSON=function(){return this.$type.toObject(this,n.toJSONOptions)},i.set=function(e,t){i[e]=t},i.get=function(e){return i[e]},i._configure=function(){n=r(3472)}},5467:function(e,t,r){"use strict";e.exports=o;var n,i=r(5988);function o(e,t,r,o,a,u,c,s){if(n.isObject(a)?(c=a,a=u=void 0):n.isObject(u)&&(c=u,u=void 0),void 0!==t&&!n.isString(t))throw TypeError("type must be a string");if(!n.isString(r))throw TypeError("requestType must be a string");if(!n.isString(o))throw TypeError("responseType must be a string");i.call(this,e,c),this.type=t||"rpc",this.requestType=r,this.requestStream=!!a||void 0,this.responseType=o,this.responseStream=!!u||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=s}((o.prototype=Object.create(i.prototype)).constructor=o).className="Method",o.fromJSON=function(e,t){return new o(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment)},o.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return n.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0])},o.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),i.prototype.resolve.call(this))},o._configure=function(){n=r(3472)}},8909:function(e,t,r){e.exports=l;var n,i,o,a,u,c=r(5988);function s(e,t){if(e&&e.length){for(var r={},n=0;n<e.length;++n)r[e[n].name]=e[n].toJSON(t);return r}}function l(e,t){c.call(this,e,t),this.nested=void 0,this._nestedArray=null}function f(e){return e._nestedArray=null,e}((l.prototype=Object.create(c.prototype)).constructor=l).className="Namespace",l.fromJSON=function(e,t){return new l(e,t.options).addJSON(t.nested)},l.arrayToJSON=s,l.isReservedId=function(e,t){if(e)for(var r=0;r<e.length;++r)if("string"!=typeof e[r]&&e[r][0]<=t&&e[r][1]>=t)return!0;return!1},l.isReservedName=function(e,t){if(e)for(var r=0;r<e.length;++r)if(e[r]===t)return!0;return!1},Object.defineProperty(l.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=o.toArray(this.nested))}}),l.prototype.toJSON=function(e){return o.toObject(["options",this.options,"nested",s(this.nestedArray,e)])},l.prototype.addJSON=function(e){if(e)for(var t,r=Object.keys(e),o=0;o<r.length;++o)t=e[r[o]],this.add((void 0===t.fields?void 0===t.values?void 0===t.methods?void 0===t.id?l.fromJSON:i.fromJSON:u.fromJSON:n.fromJSON:a.fromJSON)(r[o],t));return this},l.prototype.get=function(e){return this.nested&&this.nested[e]||null},l.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof n)return this.nested[e].values;throw Error("no such enum: "+e)},l.prototype.add=function(e){if(!(e instanceof i&&void 0!==e.extend||e instanceof a||e instanceof n||e instanceof u||e instanceof l))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof l&&e instanceof l)||t instanceof a||t instanceof u)throw Error("duplicate name '"+e.name+"' in "+this);for(var r=t.nestedArray,o=0;o<r.length;++o)e.add(r[o]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),f(this)},l.prototype.remove=function(e){if(!(e instanceof c))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),f(this)},l.prototype.define=function(e,t){if(o.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var r,n=this;0<e.length;)if(r=e.shift(),n.nested&&n.nested[r]){if(!((n=n.nested[r])instanceof l))throw Error("path conflicts with non-namespace objects")}else n.add(n=new l(r));return t&&n.addJSON(t),n},l.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof l?e[t++].resolveAll():e[t++].resolve();return this.resolve()},l.prototype.lookup=function(e,t,r){if("boolean"==typeof t?(r=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),o.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var n=this.get(e[0]);if(n){if(1===e.length){if(!t||-1<t.indexOf(n.constructor))return n}else if(n instanceof l&&(n=n.lookup(e.slice(1),t,!0)))return n}else for(var i=0;i<this.nestedArray.length;++i)if(this._nestedArray[i]instanceof l&&(n=this._nestedArray[i].lookup(e,t,!0)))return n;return null===this.parent||r?null:this.parent.lookup(e,t)},l.prototype.lookupType=function(e){var t=this.lookup(e,[a]);if(!t)throw Error("no such type: "+e);return t},l.prototype.lookupEnum=function(e){var t=this.lookup(e,[n]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},l.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[a,n]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},l.prototype.lookupService=function(e){var t=this.lookup(e,[u]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},l._configure=function(){n=r(343),i=r(7255),o=r(3472),a=r(8529),u=r(6007)}},5988:function(e,t,r){"use strict";var n,i;function o(e,t){if(!n.isString(e))throw TypeError("name must be a string");if(t&&!n.isObject(t))throw TypeError("options must be an object");this.options=t,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}e.exports=o,o.className="ReflectionObject",Object.defineProperties(o.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),o.prototype.toJSON=function(){throw Error()},o.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof i&&t._handleAdd(this)},o.prototype.onRemove=function(e){var t=e.root;t instanceof i&&t._handleRemove(this),this.parent=null,this.resolved=!1},o.prototype.resolve=function(){return this.resolved||this.root instanceof i&&(this.resolved=!0),this},o.prototype.getOption=function(e){return this.options?this.options[e]:void 0},o.prototype.setOption=function(e,t,r){return r&&this.options&&void 0!==this.options[e]||((this.options||(this.options={}))[e]=t),this},o.prototype.setOptions=function(e,t){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)this.setOption(r[n],e[r[n]],t);return this},o.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},o._configure=function(){i=r(4902),n=r(3472)}},4543:function(e,t,r){e.exports=a;var n,i,o=r(5988);function a(e,t,r,n){if(Array.isArray(t)||(r=t,t=void 0),o.call(this,e,r),void 0!==t&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=n}function u(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}((a.prototype=Object.create(o.prototype)).constructor=a).className="OneOf",a.fromJSON=function(e,t){return new a(e,t.oneof,t.options,t.comment)},a.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return i.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},a.prototype.add=function(e){if(!(e instanceof n))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,u(this),this},a.prototype.remove=function(e){if(!(e instanceof n))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(0>t)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),-1<(t=this.oneof.indexOf(e.name))&&this.oneof.splice(t,1),e.partOf=null,this},a.prototype.onAdd=function(e){o.prototype.onAdd.call(this,e);for(var t,r=0;r<this.oneof.length;++r)(t=e.get(this.oneof[r]))&&!t.partOf&&(t.partOf=this,this.fieldsArray.push(t));u(this)},a.prototype.onRemove=function(e){for(var t,r=0;r<this.fieldsArray.length;++r)(t=this.fieldsArray[r]).parent&&t.parent.remove(t);o.prototype.onRemove.call(this,e)},a.d=function(){for(var e=Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,r){i.decorateType(t.constructor).add(new a(r,e)),Object.defineProperty(t,r,{get:i.oneOfGetter(e),set:i.oneOfSetter(e)})}},a._configure=function(){n=r(7255),i=r(3472)}},7965:function(e,t,r){"use strict";e.exports=I,I.filename=null,I.defaults={keepCase:!1};var n,i,o,a,u,c,s,l,f,d,p,h=/^[1-9][0-9]*$/,v=/^-?[1-9][0-9]*$/,y=/^0[x][0-9a-fA-F]+$/,b=/^-?0[x][0-9a-fA-F]+$/,m=/^0[0-7]+$/,g=/^-?0[0-7]+$/,w=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,S=/^[a-zA-Z_][a-zA-Z_0-9]*$/,_=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)+$/,O=/^(?:\.[a-zA-Z][a-zA-Z_0-9]*)+$/;function I(e,t,r){function E(e,t,r){var n=I.filename;return r||(I.filename=null),Error("illegal "+(t||"token")+" '"+e+"' ("+(n?n+", ":"")+"line "+W.line+")")}function C(){var e,t=[];do{if('"'!==(e=G())&&"'"!==e)throw E(e);t.push(G()),Y(e),e=J()}while('"'===e||"'"===e);return t.join("")}function A(e){var t=G();switch(t){case"'":case'"':return H(t),C();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return function(e,t){var r=1;switch("-"===e.charAt(0)&&(r=-1,e=e.substring(1)),e){case"inf":case"INF":case"Inf":return r*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(h.test(e))return r*parseInt(e,10);if(y.test(e))return r*parseInt(e,16);if(m.test(e))return r*parseInt(e,8);if(w.test(e))return r*parseFloat(e);throw E(e,"number",!0)}(t)}catch(r){if(e&&_.test(t))return t;throw E(t,"value")}}function x(e,t){var r,n;do{!t||'"'!==(r=J())&&"'"!==r?e.push([n=T(G()),Y("to",!0)?T(G()):n]):e.push(C())}while(Y(",",!0));Y(";")}function T(e,t){switch(e){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!t&&"-"===e.charAt(0))throw E(e,"id");if(v.test(e))return parseInt(e,10);if(b.test(e))return parseInt(e,16);if(g.test(e))return parseInt(e,8);throw E(e,"id")}function P(){if(void 0!==U)throw E("package");if(U=G(),!_.test(U))throw E(U,"name");X=X.define(U),Y(";")}function j(){var e,t=J();switch(t){case"weak":e=$||($=[]),G();break;case"public":G();default:e=q||(q=[])}t=C(),Y(";"),e.push(t)}function D(){if(Y("="),V=C(),!(Q="proto3"===V)&&"proto2"!==V)throw E(V,"syntax");Y(";")}function k(e,t){return"option"===t?(L(e,t),Y(";"),!0):"message"===t?(function(e,t){if(!S.test(t=G()))throw E(t,"type name");var r=new o(t);M(r,(function(e){if(!k(r,e))switch(e){case"map":!function(e){Y("<");var t=G();if(void 0===d.mapKey[t])throw E(t,"type");Y(",");var r=G();if(!_.test(r))throw E(r,"type");Y(">");var n=G();if(!S.test(n))throw E(n,"name");Y("=");var i=new u(ee(n),T(G()),t,r);M(i,(function(e){if("option"!==e)throw E(e);L(i,e),Y(";")}),(function(){F(i)})),e.add(i)}(r);break;case"required":case"optional":case"repeated":B(r,e);break;case"oneof":!function(e,t){if(!S.test(t=G()))throw E(t,"name");var r=new c(ee(t));M(r,(function(e){"option"===e?(L(r,e),Y(";")):(H(e),B(r,"optional"))})),e.add(r)}(r,e);break;case"extensions":x(r.extensions||(r.extensions=[]));break;case"reserved":x(r.reserved||(r.reserved=[]),!0);break;default:if(!Q||!_.test(e))throw E(e);H(e),B(r,"optional")}})),e.add(r)}(e,t),!0):"enum"===t?(function(e,t){if(!S.test(t=G()))throw E(t,"name");var r=new s(t);M(r,(function(e){"option"===e?(L(r,e),Y(";")):"reserved"===e?x(r.reserved||(r.reserved=[]),!0):function(e,t){if(!S.test(t))throw E(t,"name");Y("=");var r=T(G(),!0),n={};M(n,(function(e){if("option"!==e)throw E(e);L(n,e),Y(";")}),(function(){F(n)})),e.add(t,r,n.comment)}(r,e)})),e.add(r)}(e,t),!0):"service"===t?(function(e,t){if(!S.test(t=G()))throw E(t,"service name");var r=new l(t);M(r,(function(e){if(!k(r,e)){if("rpc"!==e)throw E(e);!function(e,t){var r=t;if(!S.test(t=G()))throw E(t,"name");var n,i,o,a,u=t;if(Y("("),Y("stream",!0)&&(i=!0),!_.test(t=G()))throw E(t);if(n=t,Y(")"),Y("returns"),Y("("),Y("stream",!0)&&(a=!0),!_.test(t=G()))throw E(t);o=t,Y(")");var c=new f(u,r,n,o,i,a);M(c,(function(e){if("option"!==e)throw E(e);L(c,e),Y(";")})),e.add(c)}(r,e)}})),e.add(r)}(e,t),!0):"extend"==t&&(function(e,t){if(!_.test(t=G()))throw E(t,"reference");var r=t;M(null,(function(t){switch(t){case"required":case"repeated":case"optional":B(e,t,r);break;default:if(!Q||!_.test(t))throw E(t);H(t),B(e,"optional",r)}}))}(e,t),!0)}function M(e,t,r){var n=W.line;if(e&&(e.comment=K(),e.filename=I.filename),Y("{",!0)){for(var i;"}"!==(i=G());)t(i);Y(";",!0)}else r&&r(),Y(";"),e&&"string"!=typeof e.comment&&(e.comment=K(n))}function B(e,t,r){var n=G();if("group"!==n){if(!_.test(n))throw E(n,"type");var i=G();if(!S.test(i))throw E(i,"name");i=ee(i),Y("=");var u=new a(i,T(G()),n,t,r);M(u,(function(e){if("option"!==e)throw E(e);L(u,e),Y(";")}),(function(){F(u)})),e.add(u),!Q&&u.repeated&&(void 0!==d.packed[n]||void 0===d.basic[n])&&u.setOption("packed",!1,!0)}else!function(e,t){var r=G();if(!S.test(r))throw E(r,"name");var n=p.lcFirst(r);r===n&&(r=p.ucFirst(r)),Y("=");var i=T(G()),u=new o(r);u.group=!0;var c=new a(n,i,r,t);c.filename=I.filename,M(u,(function(e){switch(e){case"option":L(u,e),Y(";");break;case"required":case"optional":case"repeated":B(u,e);break;default:throw E(e)}})),e.add(u).add(c)}(e,t)}function L(e,t){var r=Y("(",!0);if(!_.test(t=G()))throw E(t,"name");var n=t;r&&(Y(")"),n="("+n+")",t=J(),O.test(t)&&(n+=t,G())),Y("="),N(e,n)}function N(e,t){if(Y("{",!0))do{if(!S.test(z=G()))throw E(z,"name");"{"===J()?N(e,t+"."+z):(Y(":"),"{"===J()?N(e,t+"."+z):R(e,t+"."+z,A(!0)))}while(!Y("}",!0));else R(e,t,A(!0))}function R(e,t,r){e.setOption&&e.setOption(t,r)}function F(e){if(Y("[",!0)){do{L(e,"option")}while(Y(",",!0));Y("]")}return e}t instanceof i||(r=t,t=new i),r||(r=I.defaults);for(var U,q,$,V,z,W=n(e,r.alternateCommentMode||!1),G=W.next,H=W.push,J=W.peek,Y=W.skip,K=W.cmnt,Z=!0,Q=!1,X=t,ee=r.keepCase?function(e){return e}:p.camelCase;null!==(z=G());)switch(z){case"package":if(!Z)throw E(z);P();break;case"import":if(!Z)throw E(z);j();break;case"syntax":if(!Z)throw E(z);D();break;case"option":if(!Z)throw E(z);L(X,z),Y(";");break;default:if(k(X,z)){Z=!1;continue}throw E(z)}return I.filename=null,{package:U,imports:q,weakImports:$,syntax:V,root:t}}I._configure=function(){n=r(6448),i=r(4902),o=r(8529),a=r(7255),u=r(4357),c=r(4543),s=r(343),l=r(6007),f=r(5467),d=r(5360),p=r(3472)}},2651:function(e){var t=e.exports,r=t.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},n=t.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),n=r(e),i="";n&&(i=t.shift()+"/");for(var o=0;o<t.length;)".."===t[o]?0<o&&".."!==t[o-1]?t.splice(--o,2):n?t.splice(o,1):++o:"."===t[o]?t.splice(o,1):++o;return i+t.join("/")};t.resolve=function(e,t,i){return i||(t=n(t)),r(t)?t:(i||(e=n(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?n(e+"/"+t):t)}},9650:function(e){e.exports=function(e,t,r){var n=r||8192,i=null,o=n;return function(r){if(1>r||r>n>>>1)return e(r);o+r>n&&(i=e(n),o=0);var a=t.call(i,o,o+=r);return 7&o&&(o=1+(7|o)),a}}},9384:function(e,t,r){e.exports=u;var n,i,o=r(3472);function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function u(e){this.buf=e,this.pos=0,this.len=e.length}var c,s="undefined"==typeof Uint8Array?function(e){if(Array.isArray(e))return new u(e);throw Error("illegal buffer")}:function(e){if(e instanceof Uint8Array||Array.isArray(e))return new u(e);if("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer)return new u(new Uint8Array(e));throw Error("illegal buffer")};function l(){var e=new n(0,0),t=0;if(!(4<this.len-this.pos)){for(;3>t;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,128>this.buf[this.pos++])return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;4>t;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,128>this.buf[this.pos++])return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,128>this.buf[this.pos++])return e;if(t=0,4<this.len-this.pos){for(;5>t;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,128>this.buf[this.pos++])return e}else for(;5>t;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,128>this.buf[this.pos++])return e}throw Error("invalid varint encoding")}function f(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function d(){if(this.pos+8>this.len)throw a(this,8);return new n(f(this.buf,this.pos+=4),f(this.buf,this.pos+=4))}u.create=o.Buffer?function(e){return(u.create=function(e){return o.Buffer.isBuffer(e)?new(void 0)(e):s(e)})(e)}:s,u.prototype._slice=o.Array.prototype.subarray||o.Array.prototype.slice,u.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,128>this.buf[this.pos++])return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,128>this.buf[this.pos++])return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,128>this.buf[this.pos++])return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,128>this.buf[this.pos++])return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,128>this.buf[this.pos++])return c;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return c}),u.prototype.int32=function(){return 0|this.uint32()},u.prototype.sint32=function(){var e=this.uint32();return 0|e>>>1^-(1&e)},u.prototype.bool=function(){return 0!==this.uint32()},u.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return f(this.buf,this.pos+=4)},u.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|f(this.buf,this.pos+=4)},u.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=o.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},u.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=o.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},u.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},u.prototype.string=function(){var e=this.bytes();return i.read(e,0,e.length)},u.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},u.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},u._configure=function(){n=r(2223),i=r(7927);var e=o.Long?"toLong":"toNumber";o.merge(u.prototype,{int64:function(){return l.call(this)[e](!1)},uint64:function(){return l.call(this)[e](!0)},sint64:function(){return l.call(this).zzDecode()[e](!1)},fixed64:function(){return d.call(this)[e](!0)},sfixed64:function(){return d.call(this)[e](!1)}})}},4902:function(e,t,r){e.exports=f;var n=r(8909);((f.prototype=Object.create(n.prototype)).constructor=f).className="Root";var i,o,a,u=r(7255),c=r(343),s=r(4543),l=r(3472);function f(e){n.call(this,"",e),this.deferred=[],this.files=[],this.names=[]}function d(){}f.fromJSON=function(e,t){return e="string"==typeof e?JSON.parse(e):e,t||(t=new f),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},f.prototype.resolvePath=l.path.resolve,f.prototype.parseFromPbString=function e(t,r,n){function i(e,t){if(n){var r=n;n=null,r(e,t)}}function u(e,t){try{if(l.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),l.isString(t)){o.filename=e;var n,a=o(t,s,r),u=0;if(a.imports)for(;u<a.imports.length;++u)c(n=a.imports[u]);if(a.weakImports){for(u=0;u<a.weakImports.length;++u)n=a.weakImports[u];c(n)}}else s.setOptions(t.options).addJSON(t.nested)}catch(e){i(e)}i(null,s)}function c(e){-1<s.names.indexOf(e)||(s.names.push(e),e in a&&u(e,a[e]))}"function"==typeof r&&(n=r,r=void 0);var s=this;if(!n)return l.asPromise(e,s,t,r);var f=null;if("string"==typeof t)f=JSON.parse(t);else{if("object"!=typeof t)return void console.log("pb格式转化失败");f=t}u(f.name,f.pbJsonStr)},f.prototype.load=function e(t,r,n){function i(e,t){if(n){var r=n;if(n=null,f)throw e;r(e,t)}}function u(e,t){try{if(l.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),l.isString(t)){o.filename=e;var n,a=o(t,s,r),u=0;if(a.imports)for(;u<a.imports.length;++u)(n=s.resolvePath(e,a.imports[u]))&&c(n);if(a.weakImports)for(u=0;u<a.weakImports.length;++u)(n=s.resolvePath(e,a.weakImports[u]))&&c(n,!0)}else s.setOptions(t.options).addJSON(t.nested)}catch(e){i(e)}f||p||i(null,s)}function c(e,t){var r=e.lastIndexOf("google/protobuf/");if(-1<r){var o=e.substring(r);o in a&&(e=o)}if(!(-1<s.files.indexOf(e))){if(s.files.push(e),e in a)return void(f?u(e,a[e]):(++p,setTimeout((function(){--p,u(e,a[e])}))));if(f){var c;try{c=l.fs.readFileSync(e).toString("utf8")}catch(e){return void(t||i(e))}u(e,c)}else++p,l.fetch(e,(function(r,o){return--p,n?r?void(t?!p&&i(null,s):i(r)):void u(e,o):void 0}))}}"function"==typeof r&&(n=r,r=void 0);var s=this;if(!n)return l.asPromise(e,s,t,r);var f=n===d,p=0;l.isString(t)&&(t=[t]);for(var h,v=0;v<t.length;++v)(h=s.resolvePath("",t[v]))&&c(h);return f?s:void(p||i(null,s))},f.prototype.loadSync=function(e,t){if(!l.isNode)throw Error("not supported");return this.load(e,t,d)},f.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(e){return"'extend "+e.extend+"' in "+e.parent.fullName})).join(", "));return n.prototype.resolveAll.call(this)};var p=/^[A-Z]/;function h(e,t){var r=t.parent.lookup(t.extend);if(r){var n=new u(t.fullName,t.id,t.type,t.rule,void 0,t.options);return n.declaringField=t,t.extensionField=n,r.add(n),!0}return!1}f.prototype._handleAdd=function(e){if(e instanceof u)void 0===e.extend||e.extensionField||h(0,e)||this.deferred.push(e);else if(e instanceof c)p.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof s)){if(e instanceof i)for(var t=0;t<this.deferred.length;)h(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var r=0;r<e.nestedArray.length;++r)this._handleAdd(e._nestedArray[r]);p.test(e.name)&&(e.parent[e.name]=e)}},f.prototype._handleRemove=function(e){if(e instanceof u){if(void 0!==e.extend)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);-1<t&&this.deferred.splice(t,1)}}else if(e instanceof c)p.test(e.name)&&delete e.parent[e.name];else if(e instanceof n){for(var r=0;r<e.nestedArray.length;++r)this._handleRemove(e._nestedArray[r]);p.test(e.name)&&delete e.parent[e.name]}},f._configure=function(){i=r(8529),o=r(7965),a=r(9290),u=r(7255),c=r(343),s=r(4543),l=r(3472)}},789:function(e){e.exports={}},6427:function(e,t,r){"use strict";e.exports=i;var n=r(3472);function i(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=!!t,this.responseDelimited=!!r}(i.prototype=Object.create(n.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function e(t,r,i,o,a){if(!o)throw TypeError("request must be specified");var u=this;if(!a)return n.asPromise(e,u,t,r,i,o);if(u.rpcImpl)try{return u.rpcImpl(t,r[u.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(e,r){if(e)return u.emit("error",e,t),a(e);if(null!==r){if(!(r instanceof i))try{r=i[u.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return u.emit("error",e,t),a(e)}return u.emit("data",r,t),a(null,r)}u.end(!0)}))}catch(r){return u.emit("error",r,t),void setTimeout((function(){a(r)}),0)}else setTimeout((function(){a(Error("already ended"))}),0)},i.prototype.end=function(e){return this.rpcImpl&&(!e&&this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},6007:function(e,t,r){"use strict";e.exports=u;var n,i,o,a=r(8909);function u(e,t){a.call(this,e,t),this.methods={},this._methodsArray=null}function c(e){return e._methodsArray=null,e}((u.prototype=Object.create(a.prototype)).constructor=u).className="Service",u.fromJSON=function(e,t){var r=new u(e,t.options);if(t.methods)for(var i=Object.keys(t.methods),o=0;o<i.length;++o)r.add(n.fromJSON(i[o],t.methods[i[o]]));return t.nested&&r.addJSON(t.nested),r.comment=t.comment,r},u.prototype.toJSON=function(e){var t=a.prototype.toJSON.call(this,e),r=!!e&&!!e.keepComments;return i.toObject(["options",t&&t.options||void 0,"methods",a.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},Object.defineProperty(u.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=i.toArray(this.methods))}}),u.prototype.get=function(e){return this.methods[e]||a.prototype.get.call(this,e)},u.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return a.prototype.resolve.call(this)},u.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof n?(this.methods[e.name]=e,e.parent=this,c(this)):a.prototype.add.call(this,e)},u.prototype.remove=function(e){if(e instanceof n){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,c(this)}return a.prototype.remove.call(this,e)},u.prototype.create=function(e,t,r){for(var n,a,u=new o.Service(e,t,r),c=0;c<this.methodsArray.length;++c)u[a=i.lcFirst((n=this._methodsArray[c]).resolve().name).replace(/[^$\w_]/g,"")]=i.codegen(["r","c"],i.isReserved(a)?a+"_":a)("return this.rpcCall(m,q,s,r,c)")({m:n,q:n.resolvedRequestType.ctor,s:n.resolvedResponseType.ctor});return u},u._configure=function(){n=r(5467),i=r(3472),o=r(6427)}},6448:function(e){e.exports=f;var t=/[\s{}=;:[\],'"()<>]/g,r=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,n=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,i=/^ *[*/]+ */,o=/^\s*\*?\/*/,a=/\n/g,u=/\s/,c=/\\(.?)/g,s={0:"\0",r:"\r",n:"\n",t:"\t"};function l(e){return e.replace(c,(function(e,t){return"\\"===t||""===t?t:s[t]||""}))}function f(e,c){function s(e){return Error("illegal "+e+" (line "+w+")")}function f(t){return e.charAt(t)}function d(t,r){S=e.charAt(t++),O=w,I=!1;var n,u=t-(c?2:3);do{if(0>--u||"\n"===(n=e.charAt(u))){I=!0;break}}while(" "===n||"\t"===n);for(var s=e.substring(t,r).split(a),l=0;l<s.length;++l)s[l]=s[l].replace(c?o:i,"").trim();_=s.join("\n").trim()}function p(t){var r=h(t),n=e.substring(t,r);return/^\s*\/{1,2}/.test(n)}function h(e){for(var t=e;t<g&&"\n"!==f(t);)t++;return t}function v(){var i,o,a,v,b,S=Math.min;if(0<E.length)return E.shift();if(C)return function(){var t="'"===C?n:r;t.lastIndex=m-1;var i=t.exec(e);if(!i)throw s("string");return m=t.lastIndex,y(C),C=null,l(i[1])}();do{if(m===g)return null;for(i=!1;u.test(a=f(m));)if("\n"===a&&++w,++m===g)return null;if("/"===f(m)){if(++m===g)throw s("comment");if("/"===f(m))if(c){if(v=m,b=!1,p(m)){b=!0;do{if((m=h(m))===g)break;m++}while(p(m))}else m=S(g,h(m)+1);b&&d(v,m),w++,i=!0}else{for(b="/"===f(v=m+1);"\n"!==f(++m);)if(m===g)return null;++m,b&&d(v,m-1),++w,i=!0}else{if("*"!==(a=f(m)))return"/";v=m+1,b=c||"*"===f(v);do{if("\n"===a&&++w,++m===g)throw s("comment");o=a,a=f(m)}while("*"!==o||"/"!==a);++m,b&&d(v,m-2),i=!0}}}while(i);var _=m;if(t.lastIndex=0,!t.test(f(_++)))for(;_<g&&!t.test(f(_));)++_;var O=e.substring(m,m=_);return('"'===O||"'"===O)&&(C=O),O}function y(e){E.push(e)}function b(){if(!E.length){var e=v();if(null===e)return null;y(e)}return E[0]}e=e.toString();var m=0,g=e.length,w=1,S=null,_=null,O=0,I=!1,E=[],C=null;return Object.defineProperty({next:v,peek:b,push:y,skip:function(e,t){var r=b();if(r===e)return v(),!0;if(!t)throw s("token '"+r+"', '"+e+"' expected");return!1},cmnt:function(e){var t=null;return void 0===e?O===w-1&&(c||"*"===S||I)&&(t=_):(O<e&&b(),O===e&&!I&&(c||"/"===S)&&(t=_)),t}},"line",{get:function(){return w}})}f.unescape=l},8529:function(e,t,r){e.exports=m;var n,i,o,a,u,c,s,l,f,d,p,h,v,y,b=r(8909);function m(e,t){b.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function g(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}((m.prototype=Object.create(b.prototype)).constructor=m).className="Type",Object.defineProperties(m.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var r=this.fields[e[t]],n=r.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=r}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=s.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=s.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=m.generateConstructor(this))},set:function(e){var t=e.prototype;t instanceof o||((e.prototype=new o).constructor=e,s.merge(e.prototype,t)),e.$type=e.prototype.$type=this,s.merge(e,o,!0),s.merge(e.prototype,o,!0),this._ctor=e;for(var r=0;r<this.fieldsArray.length;++r)this._fieldsArray[r].resolve();var n={};for(r=0;r<this.oneofsArray.length;++r){var i=this._oneofsArray[r].resolve().name,a=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=0;return{setter:function(r){if(!(0>e.indexOf(r))){t[r]=1;for(var n=0;n<e.length;++n)e[n]!==r&&delete this[e[n]]}},getter:function(){for(var e=Object.keys(this),r=e.length-1;-1<r;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}}}(this._oneofsArray[r].oneof);n[i]={get:a.getter,set:a.setter}}r&&Object.defineProperties(e.prototype,n)}}}),m.generateConstructor=function(e){return function(t){for(var r,n=0;n<e.fieldsArray.length;n++)(r=e._fieldsArray[n]).map?this[r.name]={}:r.repeated&&(this[r.name]=[]);if(t)for(var i=Object.keys(t),o=0;o<i.length;++o)null!=t[i[o]]&&(this[i[o]]=t[i[o]])}},m.fromJSON=function(e,t){var r=new m(e,t.options);r.extensions=t.extensions,r.reserved=t.reserved;for(var o=Object.keys(t.fields),u=0;u<o.length;++u)r.add((void 0===t.fields[o[u]].keyType?i.fromJSON:y.fromJSON)(o[u],t.fields[o[u]]));if(t.oneofs)for(o=Object.keys(t.oneofs),u=0;u<o.length;++u)r.add(a.fromJSON(o[u],t.oneofs[o[u]]));if(t.nested)for(o=Object.keys(t.nested),u=0;u<o.length;++u){var c=t.nested[o[u]];r.add((void 0===c.id?void 0===c.fields?void 0===c.values?void 0===c.methods?b.fromJSON:p.fromJSON:n.fromJSON:m.fromJSON:i.fromJSON)(o[u],c))}return t.extensions&&t.extensions.length&&(r.extensions=t.extensions),t.reserved&&t.reserved.length&&(r.reserved=t.reserved),t.group&&(r.group=!0),t.comment&&(r.comment=t.comment),r},m.prototype.toJSON=function(e){var t=b.prototype.toJSON.call(this,e),r=!!e&&!!e.keepComments;return{options:t&&t.options||void 0,oneofs:b.arrayToJSON(this.oneofsArray,e),fields:b.arrayToJSON(this.fieldsArray.filter((function(e){return!e.declaringField})),e)||{},extensions:this.extensions&&this.extensions.length?this.extensions:void 0,reserved:this.reserved&&this.reserved.length?this.reserved:void 0,group:this.group||void 0,nested:t&&t.nested||void 0,comment:r?this.comment:void 0}},m.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var r=this.oneofsArray;for(t=0;t<r.length;)r[t++].resolve();return b.prototype.resolveAll.call(this)},m.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},m.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof i&&void 0===e.extend){if(this._fieldsById&&this._fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),g(this)}return e instanceof a?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),g(this)):b.prototype.add.call(this,e)},m.prototype.remove=function(e){if(e instanceof i&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),g(this)}if(e instanceof a){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),g(this)}return b.prototype.remove.call(this,e)},m.prototype.isReservedId=function(e){return b.isReservedId(this.reserved,e)},m.prototype.isReservedName=function(e){return b.isReservedName(this.reserved,e)},m.prototype.create=function(e){return new this.ctor(e)},m.prototype.setup=function(){for(var e=this.fullName,t=[],r=0;r<this.fieldsArray.length;++r)t.push(this._fieldsArray[r].resolve().resolvedType);this.encode=f(this)({Writer:u,types:t,util:s}),this.decode=d(this)({Reader:c,types:t,util:s}),this.verify=l(this)({types:t,util:s}),this.fromObject=v.fromObject(this)({types:t,util:s}),this.toObject=v.toObject(this)({types:t,util:s});var n=h[e];if(n){var i=Object.create(this);i.fromObject=this.fromObject,this.fromObject=n.fromObject.bind(i),i.toObject=this.toObject,this.toObject=n.toObject.bind(i)}return this},m.prototype.encode=function(e,t){return this.setup().encode(e,t)},m.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},m.prototype.decode=function(e,t){return this.setup().decode(e,t)},m.prototype.decodeDelimited=function(e){return e instanceof c||(e=c.create(e)),this.decode(e,e.uint32())},m.prototype.verify=function(e){return this.setup().verify(e)},m.prototype.fromObject=function(e){return this.setup().fromObject(e)},m.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},m.d=function(e){return function(t){s.decorateType(t,e)}},m._configure=function(){n=r(343),i=r(7255),o=r(1912),a=r(4543),u=r(372),c=r(9384),s=r(3472),l=r(4235),f=r(9909),d=r(7285),p=r(6007),h=r(5785),v=r(9904),y=r(4357)}},5360:function(e,t,r){"use strict";var n=e.exports,i=r(3472),o=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function a(e,t){var r=0,n={};for(t|=0;r<e.length;)n[o[r+t]]=e[r++];return n}n.basic=a([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),n.defaults=a([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",i.emptyArray,null]),n.long=a([0,0,0,1,1],7),n.mapKey=a([0,0,0,5,5,0,0,0,1,1,0,2],2),n.packed=a([1,5,0,0,0,5,5,0,0,0,1,1,0]),n._configure=function(){i=r(3472)}},7927:function(e){"use strict";var t=e.exports;t.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)128>(r=e.charCodeAt(n))?t+=1:2048>r?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},t.read=function(e,t,r){var n=String.fromCharCode;if(1>r-t)return"";for(var i,o=null,a=[],u=0;t<r;)128>(i=e[t++])?a[u++]=i:191<i&&224>i?a[u++]=(31&i)<<6|63&e[t++]:239<i&&365>i?(i=((7&i)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,a[u++]=55296+(i>>10),a[u++]=56320+(1023&i)):a[u++]=(15&i)<<12|(63&e[t++])<<6|63&e[t++],8191<u&&((o||(o=[])).push(n.apply(String,a)),u=0);return o?(u&&o.push(n.apply(String,a.slice(0,u))),o.join("")):n.apply(String,a.slice(0,u))},t.write=function(e,t,r){for(var n,i,o=r,a=0;a<e.length;++a)128>(n=e.charCodeAt(a))?t[r++]=n:2048>n?(t[r++]=192|n>>6,t[r++]=128|63&n):55296==(64512&n)&&56320==(64512&(i=e.charCodeAt(a+1)))?(n=65536+((1023&n)<<10)+(1023&i),++a,t[r++]=240|n>>18,t[r++]=128|63&n>>12,t[r++]=128|63&n>>6,t[r++]=128|63&n):(t[r++]=224|n>>12,t[r++]=128|63&n>>6,t[r++]=128|63&n);return r-o}},3472:function(e,t,r){var n=e.exports,i=r(789);n.LongBits=r(2223),n.Long=r(2282),n.pool=r(9650),n.float=r(2333),n.asPromise=r(9535),n.EventEmitter=r(4344),n.path=r(2651),n.base64=r(5599),n.utf8=r(7927),n.compareFieldsById=function(e,t){return e.id-t.id},n.toArray=function(e){if(e){for(var t=Object.keys(e),r=Array(t.length),n=0;n<t.length;)r[n]=e[t[n++]];return r}return[]},n.toObject=function(e){for(var t={},r=0;r<e.length;){var n=e[r++],i=e[r++];void 0!==i&&(t[n]=i)}return t},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},n.isObject=function(e){return e&&"object"==typeof e},n.Array="undefined"==typeof Uint8Array?Array:Uint8Array,n.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;-1<r;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},n.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},n.merge=function(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)void 0!==e[n[i]]&&r||(e[n[i]]=t[n[i]]);return e},n.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(n.decorateRoot.remove(e.$type),e.$type.name=t,n.decorateRoot.add(e.$type)),e.$type;Type||(Type=r(8529));var i=new Type(t||e.name);return n.decorateRoot.add(i),i.ctor=e,Object.defineProperty(e,"$type",{value:i,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:i,enumerable:!1}),i},n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.copy=function(e){if("object"!=typeof e)return e;var t={};for(var r in e)t[r]=e[r];return t},n.deepCopy=function e(t){if("object"!=typeof t)return t;var r={};for(var n in t)r[n]=e(t[n]);return r},n.ProtocolError=function(e){function t(e,r){return this instanceof t?(Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),void(r&&merge(this,r))):new t(e,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n.Buffer=null,n.newBuffer=function(e){return"number"==typeof e?new n.Array(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.stringToBytes=function(e){var t,r,n=[];t=e.length;for(var i=0;i<t;i++)65536<=(r=e.charCodeAt(i))&&1114111>=r?(n.push(240|7&r>>18),n.push(128|63&r>>12),n.push(128|63&r>>6),n.push(128|63&r)):2048<=r&&65535>=r?(n.push(224|15&r>>12),n.push(128|63&r>>6),n.push(128|63&r)):128<=r&&2047>=r?(n.push(192|31&r>>6),n.push(128|63&r)):n.push(255&r);return n},n.byteToString=function(e){var t=String.fromCharCode;if("string"==typeof e)return e;for(var r="",n=e,i=0;i<n.length;i++){var o=n[i].toString(2),a=o.match(/^1+?(?=0)/);if(a&&8==o.length){for(var u=a[0].length,c=n[i].toString(2).slice(7-u),s=1;s<u;s++)c+=n[s+i].toString(2).slice(2);r+=t(parseInt(c,2)),i+=u-1}else r+=t(n[i])}return r},n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},Object.defineProperty(n,"decorateRoot",{get:function(){return i.decorated||(i.decorated=new(r(4902)))}})},4235:function(e,t,r){var n,i;function o(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function a(e,t,r,a){var u=a.types;if(e.resolvedType)if(e.resolvedType instanceof n){if(0>Object.keys(e.resolvedType.values).indexOf(r))return o(e,"enum value")}else{var c=u[t].verify(r);if(c)return e.name+"."+c}else switch(e.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":if(!i.isInteger(r))return o(e,"integer");break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":if(!(i.isInteger(r)||r&&i.isInteger(r.low)&&i.isInteger(r.high)))return o(e,"integer|Long");break;case"float":case"double":if("number"!=typeof r)return o(e,"number");break;case"bool":if("boolean"!=typeof r)return o(e,"boolean");break;case"string":if(!i.isString(r))return o(e,"string");break;case"bytes":if(!(r&&"number"==typeof r.length||i.isString(r)))return o(e,"buffer")}}function u(e,t){switch(e.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":if(!i.key32Re.test(t))return o(e,"integer key");break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":if(!i.key64Re.test(t))return o(e,"integer|Long key");break;case"bool":if(!i.key2Re.test(t))return o(e,"boolean key")}}function c(e){return function(t){return function(r){var n;if("object"!=typeof r||null===r)return"object expected";var c,s={};e.oneofsArray.length&&(c={});for(var l=0;l<e.fieldsArray.length;++l){var f,d=e._fieldsArray[l].resolve(),p=r[d.name];if(!d.optional||null!=p&&r.hasOwnProperty(d.name))if(d.map){if(!i.isObject(p))return o(d,"object");var h=Object.keys(p);for(f=0;f<h.length;++f){if(n=u(d,h[f]))return n;if(n=a(d,l,p[h[f]],t))return n}}else if(d.repeated){if(!Array.isArray(p))return o(d,"array");for(f=0;f<p.length;++f)if(n=a(d,l,p[f],t))return n}else{if(d.partOf){var v=d.partOf.name;if(1===s[d.partOf.name]&&1===c[v])return d.partOf.name+": multiple values";c[v]=1}if(n=a(d,l,p,t))return n}}}}}e.exports=c,c._configure=function(){n=r(343),i=r(3472)}},5785:function(e,t,r){var n,i=t;i[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=this.lookup(e["@type"]);if(t){var r="."===e["@type"].charAt(0)?e["@type"].substr(1):e["@type"];return this.create({type_url:"/"+r,value:t.encode(t.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){if(t&&t.json&&e.type_url&&e.value){var r=e.type_url.substring(e.type_url.lastIndexOf("/")+1),i=this.lookup(r);i&&(e=i.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof n){var o=e.$type.toObject(e,t);return o["@type"]=e.$type.fullName,o}return this.toObject(e,t)}},i._configure=function(){n=r(1912)}},372:function(e,t,r){e.exports=s;var n,i=r(3472),o=r(7927);function a(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function u(){}function c(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function s(){this.len=0,this.head=new a(u,0,0),this.tail=this.head,this.states=null}function l(e,t,r){t[r]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function d(e,t,r){for(;e.hi;)t[r++]=128|127&e.lo,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;127<e.lo;)t[r++]=128|127&e.lo,e.lo>>>=7;t[r++]=e.lo}function p(e,t,r){t[r]=255&e,t[r+1]=255&e>>>8,t[r+2]=255&e>>>16,t[r+3]=e>>>24}s.create=i.Buffer?function(){return(s.create=function(){return new(void 0)})()}:function(){return new s},s.alloc=function(e){return new i.Array(e)},i.Array!==Array&&(s.alloc=i.pool(s.alloc,i.Array.prototype.subarray)),s.prototype._push=function(e,t,r){return this.tail=this.tail.next=new a(e,t,r),this.len+=t,this},f.prototype=Object.create(a.prototype),f.prototype.fn=function(e,t,r){for(;127<e;)t[r++]=128|127&e,e>>>=7;t[r]=e},s.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f(128>(e>>>=0)?1:16384>e?2:2097152>e?3:268435456>e?4:5,e)).len,this},s.prototype.int32=function(e){return 0>e?this._push(d,10,n.fromNumber(e)):this.uint32(e)},s.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},s.prototype.uint64=function(e){var t=n.from(e);return this._push(d,t.length(),t)},s.prototype.int64=s.prototype.uint64,s.prototype.sint64=function(e){var t=n.from(e).zzEncode();return this._push(d,t.length(),t)},s.prototype.bool=function(e){return this._push(l,1,e?1:0)},s.prototype.fixed32=function(e){return this._push(p,4,e>>>0)},s.prototype.sfixed32=s.prototype.fixed32,s.prototype.fixed64=function(e){var t=n.from(e);return this._push(p,4,t.lo)._push(p,4,t.hi)},s.prototype.sfixed64=s.prototype.fixed64,s.prototype.float=function(e){return this._push(i.float.writeFloatLE,4,e)},s.prototype.double=function(e){return this._push(i.float.writeDoubleLE,8,e)};var h=i.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};s.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(l,1,0);if(i.isString(e)){var r=s.alloc(t=o.length(e));o.write(e,r,0),e=r}return this.uint32(t)._push(h,t,e)},s.prototype.string=function(e){var t=o.length(e);return t?this.uint32(t)._push(o.write,t,e):this._push(l,1,0)},s.prototype.fork=function(){return this.states=new c(this),this.head=this.tail=new a(u,0,0),this.len=0,this},s.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new a(u,0,0),this.len=0),this},s.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},s.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},s._configure=function(){n=r(2223),r(5599),o=r(7927)}}},r={};function n(t){var i=r[t];if(void 0!==i)return i.exports;var o=r[t]={exports:{}};return e[t].call(o.exports,o,o.exports,n),o.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i=n(4240),o=t;for(var a in i)o[a]=i[a];i.__esModule&&Object.defineProperty(o,"__esModule",{value:!0})}()},6047:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},3505:(e,t,r)=>{var n=r(9317);function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n(i.key),i)}}e.exports=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},2101:(e,t,r)=>{var n=r(9317);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},1801:(e,t,r)=>{var n=r(2101);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}e.exports=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},3596:(e,t,r)=>{var n=r(901).default;e.exports=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},9317:(e,t,r)=>{var n=r(901).default,i=r(3596);e.exports=function(e){var t=i(e,"string");return"symbol"===n(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},901:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{"use strict";r.r(n),r.d(n,{BindDevice:()=>ja,BindDeviceErrorCode:()=>s,CommonErrorCode:()=>a,ConnectAndBindDevice:()=>Da,ConnectionErrorCode:()=>c,Event:()=>ia,GpsStatus:()=>ur.GpsStatus,Init:()=>Oa,InitErrorCode:()=>u,OtaErrorCode:()=>l,SERVICES:()=>f,StartDataSync:()=>fo,bindDevice:()=>qa,bindDeviceObservable:()=>Ua,clearDeviceStorage:()=>Ba,connectAndBindDevice:()=>Va,connectDevice:()=>Mn,dataHelper:()=>i,destroyGps:()=>xo,destroySDK:()=>Pa,destroytDeviceConnectionManager:()=>An,disconnectDevice:()=>Ln,getAllDeviceStorage:()=>Nr,getConnectedDevices:()=>$n,getConnectionState:()=>Nn,getDeviceMacInfo:()=>Wr,getDeviceMacInfoList:()=>zr,getMobileDeviceMac:()=>vn,getScanDevices:()=>Qr,init:()=>xa,isSupportFileUpdateEvent:()=>uc,onConnectionConnectedChange:()=>Un,onConnectionConnectedChangeObservalbe:()=>qn,onConnectionStateChange:()=>Rn,onConnectionStateChangeObservable:()=>Fn,onEvent:()=>ya,onEventObservable:()=>ba,onGpsStartRequest:()=>go,onGpsStopRequest:()=>So,onInitialized:()=>Ta,onUploadData:()=>ho,parseAdvertisData:()=>ur.parseAdvertisData,parseQrcode:()=>Ma,requestDevice:()=>ra,requestDeviceGetFile:()=>sa,scanDevice:()=>Zr,scanDeviceObservable:()=>Kr,startDataSync:()=>yo,startUpgrade:()=>ac,unbindDevice:()=>Ga,updateGpsStatus:()=>Po,updateLocationInfo:()=>jo});var e={};r.r(e),r.d(e,{closeBLEConnection:()=>P,closeBluetoothAdapter:()=>x,createBLEConnection:()=>T,getBLEDeviceCharacteristics:()=>M,getBLEDeviceServices:()=>B,getBluetoothAdapterState:()=>C,getConnectedBluetoothDevices:()=>j,getStorage:()=>q,getSystemInfoSync:()=>V,notifyBLECharacteristicValueChange:()=>N,offBLECharacteristicValueChange:()=>Z,offBLEConnectionStateChange:()=>Y,offBluetoothAdapterStateChange:()=>W,offBluetoothDeviceFound:()=>H,onBLECharacteristicValueChange:()=>K,onBLEConnectionStateChange:()=>J,onBluetoothAdapterStateChange:()=>z,onBluetoothDeviceFound:()=>G,openBluetoothAdapter:()=>A,readBLECharacteristicValue:()=>R,removeStorage:()=>$,setBLEMTU:()=>F,setStorage:()=>U,startBluetoothDevicesDiscovery:()=>D,stopBluetoothDevicesDiscovery:()=>k,writeBLECharacteristicValue:()=>L});var t={};r.r(t),r.d(t,{closeBLEConnection:()=>me,closeBluetoothAdapter:()=>ue,createBLEConnection:()=>be,getBLEDeviceCharacteristics:()=>_e,getBLEDeviceServices:()=>Oe,getBluetoothAdapterState:()=>ce,getConnectedBluetoothDevices:()=>ge,getStorage:()=>Te,getSystemInfoSync:()=>xe,notifyBLECharacteristicValueChange:()=>Ee,offBLECharacteristicValueChange:()=>le,offBLEConnectionStateChange:()=>ye,offBluetoothAdapterStateChange:()=>de,offBluetoothDeviceFound:()=>he,onBLECharacteristicValueChange:()=>se,onBLEConnectionStateChange:()=>ve,onBluetoothAdapterStateChange:()=>fe,onBluetoothDeviceFound:()=>pe,openBluetoothAdapter:()=>ae,readBLECharacteristicValue:()=>Ce,removeStorage:()=>je,setBLEMTU:()=>Ae,setStorage:()=>Pe,startBluetoothDevicesDiscovery:()=>we,stopBluetoothDevicesDiscovery:()=>Se,writeBLECharacteristicValue:()=>Ie});var i={};function o(e){return"0000".concat(e,"-0000-1000-8000-00805F9B34FB")}r.r(i),r.d(i,{BloodOxygenSettingType:()=>xn,DataType:()=>jn,FileType:()=>Tn,Gender:()=>fi,GpsLocation:()=>si,HrSettingSwitch:()=>kn,PressureStatusType:()=>Dn,RecordType:()=>Pn,SleepReportSwitch:()=>li,TodayActiveGoalType:()=>di,formatBatteryInfo:()=>Jn,formatDeviceInfo:()=>Hn,formatDeviceLanguageSet:()=>Yn,formatDeviceTime:()=>Gn,formatGetFileList:()=>Xn,formatGetPressureStatus:()=>ni,formatGetSportRecordList:()=>ai,formatHrSwitch:()=>ci,formatPEClassSetting:()=>ki,formatSedentaryReminder:()=>wi,formatSleepReport:()=>hi,formatSleepSwitch:()=>_i,formatSpo2Switch:()=>Vn,formatSportHrSectionCfg:()=>Ii,formatTodayActiveGoalGet:()=>Di,formatUserInfo:()=>Ai,formatactivityStrengthDetail:()=>ei,getAge:()=>Pi,parseBloodOxygenSetting:()=>zn,parseDeviceLanguageSetting:()=>Kn,parseDeviceTime:()=>Wn,parseGetDailyRecordData:()=>ti,parseGetFileList:()=>Qn,parseGetFileRequest:()=>Zn,parseGetPressureStatus:()=>ri,parseGetSportRecordFile:()=>ii,parseGetSportRecordList:()=>oi,parseGpsLocation:()=>Si,parseHrSwitch:()=>ui,parsePEClassSetting:()=>Mi,parseSedentaryReminder:()=>gi,parseSleepSwitch:()=>Oi,parseSportHrSectionSetting:()=>Ei,parseTodayActiveGoalGet:()=>ji,parseUserInfo:()=>Ci});var a,u,c,s,l,f=["A500","AC00"].map((function(e){return o(e)})),d=["LS Band 6","Mio Band","Mio BJ"];!function(e){e[e.Unknow=10001]="Unknow",e[e.BadParams=10002]="BadParams",e[e.OpenBluetoothAdapterError=10003]="OpenBluetoothAdapterError"}(a||(a={})),function(e){e[e.Initializing=20002]="Initializing",e[e.InitBluetoothError=20003]="InitBluetoothError",e[e.Initialized=20004]="Initialized"}(u||(u={})),function(e){e[e.Timeout=30002]="Timeout",e[e.AlreadyConnecting=30003]="AlreadyConnecting",e[e.AlreadyConnected=30004]="AlreadyConnected",e[e.NotConnected=30005]="NotConnected",e[e.NotFoundDevice=30006]="NotFoundDevice"}(c||(c={})),function(e){e[e.NotFoundDevice=40002]="NotFoundDevice",e[e.NotConnected=40003]="NotConnected",e[e.UserDeny=40004]="UserDeny",e[e.DeviceCharging=40005]="DeviceCharging",e[e.DeviceAlreadyBind=40006]="DeviceAlreadyBind",e[e.OnConfirmBindError=40007]="OnConfirmBindError",e[e.OnConfirmBindResultNotSuccess=40008]="OnConfirmBindResultNotSuccess"}(s||(s={})),function(e){e[e.NotFoundDevice=50001]="NotFoundDevice",e[e.Success=0]="Success",e[e.ErrVerify=50011]="ErrVerify",e[e.ErrVersion=50002]="ErrVersion",e[e.ErrStorage=50003]="ErrStorage",e[e.ErrNoMem=50004]="ErrNoMem",e[e.ErrDecompress=50005]="ErrDecompress",e[e.ErrBattery=50006]="ErrBattery",e[e.ErrStatus=50007]="ErrStatus",e[e.Send0x02Fail=50008]="Send0x02Fail",e[e.SendA703Fail=50009]="SendA703Fail",e[e.Timeout=50010]="Timeout"}(l||(l={}));var p,h=r(3405),v=(p=function(e,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},p(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),y=function(e){function t(r,n,i){var o=e.call(this,r)||this;return Object.setPrototypeOf(o,t.prototype),o.code=null!=n?n:-1,o.data=i,o}return v(t,e),t}(Error);function b(){return function(e){function t(r,n,i){var o=e.call(this,r,n,i)||this;return Object.setPrototypeOf(o,t.prototype),o}return v(t,e),t}(y)}var m=r(1125),g=r.n(m),w=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};function S(e){for(var t=e.methodName,r=e.loggerName,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o,a,u=n[0],c=n.slice(1);return["string","number","bigint","boolean"].includes(typeof u)?(o=" ".concat(u),a=c):(o="",a=w([u],c,!0)),w(["[".concat(t,"][").concat(r,"]").concat(o)],a,!0)}function _(e){var t=g().methodFactory,r=g().getLogger(e);return r.methodFactory=function(e,r,n){var i=t(e,r,n);return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];i.apply(void 0,S.apply(void 0,w([{methodName:e,loggerName:n}],t,!1)))}},r}function O(e){return function(t){return new Promise((function(r){e(Object.assign(null!=t?t:{},{success:function(e){r({success:e,error:void 0})},fail:function(e){r({error:e||{}})}}))}))}}var I={},E={},C=ne((function(){return wx}),"getBluetoothAdapterState"),A=ne((function(){return wx}),"openBluetoothAdapter"),x=ne((function(){return wx}),"closeBluetoothAdapter"),T=ne((function(){return wx}),"createBLEConnection"),P=ne((function(){return wx}),"closeBLEConnection"),j=ne((function(){return wx}),"getConnectedBluetoothDevices"),D=ne((function(){return wx}),"startBluetoothDevicesDiscovery"),k=ne((function(){return wx}),"stopBluetoothDevicesDiscovery"),M=ne((function(){return wx}),"getBLEDeviceCharacteristics"),B=ne((function(){return wx}),"getBLEDeviceServices"),L=ne((function(){return wx}),"writeBLECharacteristicValue"),N=ne((function(){return wx}),"notifyBLECharacteristicValueChange"),R=ne((function(){return wx}),"readBLECharacteristicValue"),F=ne((function(){return wx}),"setBLEMTU"),U=ne((function(){return wx}),"setStorage"),q=ne((function(){return wx}),"getStorage"),$=ne((function(){return wx}),"removeStorage"),V=ne((function(){return wx}),"getSystemInfoSync"),z=Q("onBluetoothAdapterStateChange"),W=X("offBluetoothAdapterStateChange"),G=Q("onBluetoothDeviceFound"),H=X("offBluetoothDeviceFound"),J=Q("onBLEConnectionStateChange"),Y=X("offBLEConnectionStateChange"),K=Q("onBLECharacteristicValueChange"),Z=X("offBLECharacteristicValueChange");function Q(e){return function(t){var r=E[e]=E[e]||[];if(r.push(t),!I[e]){var n=I[e]=new h.Subject;wx[e]((function(e){return n.next(e)})),n.subscribe((function(e){r.forEach((function(t){return t(e)}))}))}}}function X(e){return function(t){E[e]&&(E[e]=E[e].filter((function(e){return e!==t})))}}var ee,te=e;function re(){return te}function ne(e,t){return function(){for(var r,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return(r=e())[t].apply(r,n)}}!function(e){e.Ios="ios",e.Android="android"}(ee||(ee={}));var ie,oe,ae=ne(re,"openBluetoothAdapter"),ue=ne(re,"closeBluetoothAdapter"),ce=ne(re,"getBluetoothAdapterState"),se=ne(re,"onBLECharacteristicValueChange"),le=ne(re,"offBLECharacteristicValueChange"),fe=ne(re,"onBluetoothAdapterStateChange"),de=ne(re,"offBluetoothAdapterStateChange"),pe=ne(re,"onBluetoothDeviceFound"),he=ne(re,"offBluetoothDeviceFound"),ve=ne(re,"onBLEConnectionStateChange"),ye=ne(re,"offBLEConnectionStateChange"),be=ne(re,"createBLEConnection"),me=ne(re,"closeBLEConnection"),ge=ne(re,"getConnectedBluetoothDevices"),we=ne(re,"startBluetoothDevicesDiscovery"),Se=ne(re,"stopBluetoothDevicesDiscovery"),_e=ne(re,"getBLEDeviceCharacteristics"),Oe=ne(re,"getBLEDeviceServices"),Ie=ne(re,"writeBLECharacteristicValue"),Ee=ne(re,"notifyBLECharacteristicValueChange"),Ce=ne(re,"readBLECharacteristicValue"),Ae=ne(re,"setBLEMTU"),xe=ne(re,"getSystemInfoSync"),Te=ne(re,"getStorage"),Pe=ne(re,"setStorage"),je=ne(re,"removeStorage"),De=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ke=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function u(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}c((n=n.apply(e,t||[])).next())}))},Me=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(c){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},Be=_("wxapp-bluetooth-helper/bluetoothAdapter");!function(e){e.closed="closed",e.opened="opened"}(ie||(ie={})),function(e){e.openning="openning",e.opened="opened",e.cancel="cancel"}(oe||(oe={}));var Le,Ne=function(e){function t(t){var r=e.call(this,t)||this;return r.code=t,r}return De(t,e),t}(Error),Re=function(){function e(){var e=this;this.state$=new h.BehaviorSubject("closed"),this.open$=new h.Subject,this.close$=new h.Subject,this.apiOpenSuccess$=new h.Subject,this.apiCloseSuccess$=new h.Subject,this.check$=new h.Subject,this.destroy$=new h.Subject,this.expectOpen$=(0,h.merge)(this.open$.pipe((0,h.map)((function(){return!0}))),this.close$.pipe((0,h.map)((function(){return!1})))).pipe((0,h.startWith)(!1),(0,h.distinctUntilChanged)(),(0,h.shareReplay)());var t=function(e){var t=e.state$;return t.pipe((0,h.switchMap)((function(e){return"opened"!==e?h.NEVER:(0,h.interval)(5e3).pipe((0,h.mergeMap)((function(){return Ue()})),(0,h.tap)((function(e){return Be.debug("health check state",e)})),(0,h.map)((function(e){var t;return!!(null===(t=e.success)||void 0===t?void 0:t.available)})))})))}({state$:this.state$});this.realState$=(0,h.merge)(this.apiOpenSuccess$.pipe((0,h.map)((function(){return ie.opened}))),this.apiCloseSuccess$.pipe((0,h.map)((function(){return ie.closed}))),t.pipe((0,h.filter)((function(e){return!e})),(0,h.map)((function(){return ie.closed})))).pipe((0,h.startWith)(ie.closed),(0,h.distinctUntilChanged)(),(0,h.shareReplay)());var r=(0,h.combineLatest)([this.expectOpen$,this.realState$],(function(e,t){return{expectOpen:e,realState:t}})).pipe((0,h.tap)((function(e){var t=e.expectOpen,r=e.realState;return Be.debug("".concat((new Date).getTime()," expectOpen=").concat(t,", realState=").concat(r))})),(0,h.share)());(0,h.merge)(r.pipe((0,h.map)((function(e){var t=e.expectOpen,r=e.realState;return t?r===ie.opened?"opened":"opening":r===ie.closed?"closed":"closing"})),(0,h.distinctUntilChanged)(),(0,h.takeUntil)(this.destroy$))).subscribe(this.state$),(0,h.merge)(this.expectOpen$.pipe((0,h.skip)(1)),this.realState$.pipe((0,h.skip)(1))).pipe((0,h.map)((function(){}))).pipe((0,h.takeUntil)(this.destroy$)).subscribe(this.check$),this.checkResult$=this.check$.pipe((0,h.exhaustMap)((function(){return e.doCheck().pipe((0,h.delay)(200))})),(0,h.share)()),this.checkResult$.pipe((0,h.filter)((function(e){return"openSuccess"===(null==e?void 0:e.code)})),(0,h.map)((function(){}))).pipe((0,h.takeUntil)(this.destroy$)).subscribe(this.apiOpenSuccess$);var n=this.checkResult$.pipe((0,h.filter)((function(e){return"openError"===(null==e?void 0:e.code)})),(0,h.map)((function(){})));this.checkResult$.pipe((0,h.filter)((function(e){return"closeSuccess"===(null==e?void 0:e.code)})),(0,h.map)((function(){}))).pipe((0,h.takeUntil)(this.destroy$)).subscribe(this.apiCloseSuccess$),(0,h.merge)(n.pipe((0,h.map)((function(){return{check:!0,delay:2e3}}))),this.check$.pipe((0,h.map)((function(){return{check:!1}})))).pipe((0,h.distinctUntilChanged)(),(0,h.switchMap)((function(e){return e.check?(0,h.timer)(e.delay):h.NEVER})),(0,h.takeUntil)(this.destroy$)).pipe((0,h.map)((function(){}))).subscribe(this.check$),(0,h.combineLatest)([this.state$,this.realState$],(function(e,t){return{state:e,realState:t}})).pipe((0,h.tap)((function(e){var t=e.state,r=e.realState;Be.debug("".concat((new Date).getTime()," state=").concat(t,", realState=").concat(r))})),(0,h.takeUntil)(this.destroy$)).subscribe()}return e.prototype.open=function(){return ke(this,void 0,void 0,(function(){var e,t;return Me(this,(function(r){return this.open$.next(),e=this.state$.pipe((0,h.filter)((function(e){return"opened"===e})),(0,h.map)((function(){return{error:void 0}}))),t=this.close$.pipe((0,h.map)((function(){return{error:new Ne(oe.cancel)}}))),[2,(0,h.firstValueFrom)((0,h.merge)(e,t))]}))}))},e.prototype.close=function(){throw new Error("未测试过，暂不可关闭")},e.prototype.check=function(){var e=this,t=(0,h.merge)(this.checkResult$,(0,h.defer)((function(){return e.check$.next(),h.NEVER}))).pipe((0,h.first)()).pipe((0,h.mergeMap)((function(){return e.state$})),(0,h.map)((function(e){return{state:e}})));return(0,h.firstValueFrom)(t)},e.prototype.getState=function(){return this.state$.getValue()},e.prototype.onStateChange=function(e,t){var r=(void 0===t?{}:t).immediate,n=this.state$.pipe((0,h.skip)(r?0:1)).subscribe((function(t){return e(t)}));return function(){return n.unsubscribe()}},e.prototype.onOpenedChangeObservable=function(e){var t=(void 0===e?{}:e).immediate;return this.state$.pipe((0,h.map)((function(e){return"opened"===e})),(0,h.distinctUntilChanged)(),(0,h.skip)(t?0:1))},e.prototype.onOpenedChange=function(e,t){void 0===t&&(t={});var r=this.onOpenedChangeObservable(t).subscribe((function(t){return e(t)}));return function(){return r.unsubscribe()}},e.prototype.destroy=function(){Fe(),this.destroy$.next(),this.destroy$.complete()},e.prototype.doCheck=function(){var e=this;return(0,h.of)(null).pipe((0,h.withLatestFrom)(this.expectOpen$,this.state$,this.realState$,(function(e,t,r,n){return{expectOpen:t,state:r,realState:n}})),(0,h.mergeMap)((function(t){var r=t.expectOpen,n=t.realState;return Be.debug("check expectOpen=".concat(r,", realState=").concat(n)),r&&[ie.closed].includes(n)?e.doOpenObservable().pipe((0,h.map)((function(){return{code:"openSuccess"}})),(0,h.catchError)((function(){return(0,h.of)({code:"openError"})}))):!r&&[ie.opened].includes(n)?(0,h.defer)((function(){return Fe()})).pipe((0,h.map)((function(){return{code:"closeSuccess"}}))):(0,h.of)({code:"none"})})))},e.prototype.doOpenObservable=function(){return(0,h.defer)((function(){return function(){return ke(this,void 0,void 0,(function(){var e;return Me(this,(function(t){switch(t.label){case 0:return Be.debug("doOpen start"),[4,O(ae)({})];case 1:return(e=t.sent()).error&&10001===e.error.errCode&&(e={success:e.error,error:void 0}),e.error?Be.debug("doOpen error",e.error):Be.debug("doOpen success",e.success),[2,e]}}))}))}()})).pipe((0,h.timeout)(3e3)).pipe((0,h.mergeMap)((function(e){return e.error?(0,h.from)(Fe()).pipe((0,h.tap)((function(){throw e.error}))):(0,h.of)(e)}))).pipe((0,h.mergeMap)((function(){return Ue()})),(0,h.mergeMap)((function(e){return Be.debug("getBluetoothAdapterState",e),e.error?(0,h.from)(Fe()).pipe((0,h.map)((function(){throw e.error}))):(0,h.of)(e.success)})))},e}();function Fe(){return ke(this,void 0,void 0,(function(){var e;return Me(this,(function(t){switch(t.label){case 0:return Be.debug("doClose start"),ue?[4,O(ue)({})]:[3,2];case 1:return(e=t.sent()).error?Be.debug("doClose error",e.error):Be.debug("doClose success",e.success),[2,e];case 2:return[2]}}))}))}function Ue(){return(0,h.defer)((function(){return O(ce)({})}))}function qe(){return Le||(Le=new Re),Le}var $e,Ve=ne(qe,"open"),ze=(ne(qe,"close"),ne(qe,"getState"),ne(qe,"onStateChange"),ne(qe,"onOpenedChange"),ne(qe,"onOpenedChangeObservable")),We=(ne(qe,"check"),function(){return We=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},We.apply(this,arguments)}),Ge=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function u(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}c((n=n.apply(e,t||[])).next())}))},He=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(c){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},Je=_("wxapp-bluetooth-helper/adapterState"),Ye=function(){function e(){this.state$=new h.BehaviorSubject({available:!1,discovering:!1}),this.discovering$=this.state$.pipe((0,h.map)((function(e){return e.discovering})),(0,h.distinctUntilChanged)()),this.destroy$=new h.Subject,function(){var e=(0,h.fromEventPattern)((function(e){return fe(e)}),(function(e){return de(e)})).pipe((0,h.map)((function(e){return{state:e,updateTime:(new Date).getTime()}}))),t=(0,h.defer)((function(){return function(){return Ge(this,void 0,void 0,(function(){var e,t;return He(this,(function(r){switch(r.label){case 0:return e=(new Date).getTime(),Je.debug("getBluetoothAdapterStateByApi"),[4,O(ce)({})];case 1:if((t=r.sent()).error)throw Je.error("getBluetoothAdapterStateByApi error",t.error),new y(t.error.errMsg,t.error.errCode);return Je.debug("getBluetoothAdapterStateByApi success",t.success),[2,{state:t.success,updateTime:e}]}}))}))}()})).pipe((0,h.catchError)((function(e){return Je.error("getBluetoothAdapterStateByApi error",e),h.EMPTY}))),r=ze({immediate:!0}).pipe((0,h.switchMap)((function(r){return Je.debug("adapter opened change:",r),r?(0,h.merge)(e,t):(0,h.of)({state:{available:!1,discovering:!1},updateTime:(new Date).getTime()})}))).pipe((0,h.tap)((function(e){return Je.debug("adapter state change:",e)})),(0,h.distinctUntilChanged)((function(e,t){return t.updateTime<=e.updateTime})),(0,h.map)((function(e){return e.state})),(0,h.map)((function(e){return e.available?e:We(We({},e),{discovering:!1})}))).pipe((0,h.distinctUntilChanged)((function(e,t){return e.available===t.available&&e.discovering===t.discovering}))).pipe((0,h.tap)((function(e){return Je.debug("adapter state changed:",e)})));return r}().pipe((0,h.takeUntil)(this.destroy$)).subscribe(this.state$),this.onBluetoothAdapterStateChange$=this.state$.pipe((0,h.pairwise)(),(0,h.map)((function(e){var t=e[0];return{state:e[1],prevState:t}})))}return e.prototype.getBluetoothAdapterState=function(){return this.state$.getValue()},e.prototype.getBluetoothAdapterAvailable=function(){return this.getBluetoothAdapterState().available},e.prototype.onBluetoothAdapterStateChange=function(e){var t=e.onChange;e.immediate&&t(this.getBluetoothAdapterState());var r=this.onBluetoothAdapterStateChange$.subscribe({next:function(e){var r=e.state,n=e.prevState;return t(r,n)}});return function(){r.unsubscribe()}},e.prototype.onBluetoothAdapterAvailableChange=function(e){var t=e.onChange,r=e.immediate,n=this.onBluetoothAdapterAvailableChangeObservable({immediate:r}).subscribe((function(e){return t(e)}));return function(){n.unsubscribe()}},e.prototype.onBluetoothAdapterAvailableChangeObservable=function(e){var t=(void 0===e?{}:e).immediate,r=this.state$.pipe((0,h.map)((function(e){return e.available})),(0,h.distinctUntilChanged)());return t||(r=r.pipe((0,h.skip)(1))),r.pipe((0,h.tap)((function(e){Je.debug("onBluetoothAdapterAvailableChange",e)})))},e.prototype.destroy=function(){this.destroy$.next(),this.destroy$.complete(),this.state$.next({available:!1,discovering:!1})},e}();function Ke(){return $e||($e=new Ye),$e}ne(Ke,"getBluetoothAdapterState"),ne(Ke,"getBluetoothAdapterAvailable");var Ze,Qe=ne(Ke,"onBluetoothAdapterStateChange"),Xe=ne(Ke,"onBluetoothAdapterAvailableChange"),et=(ne(Ke,"onBluetoothAdapterAvailableChangeObservable"),function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}),tt=_("wxapp-bluetooth-helper/DevicesScanner"),rt=function(){function e(){var e=this;this.onBluetoothDeviceFound$=new h.Subject,this.scanDevices$=new h.Subject,this.stopScanDevices$=new h.Subject,this.onDeviceFound$=new h.Subject,this.scanDevicesDataList$=new h.BehaviorSubject([]),this.state={available:!1,discovering:!1},this.destroy$=new h.Subject;var t=(0,h.fromEventPattern)((function(e){return pe(e)}),(function(e){return he(e)}));ze({immediate:!0}).pipe((0,h.switchMap)((function(e){return e?t:h.NEVER})),(0,h.takeUntil)(this.destroy$)).subscribe(this.onBluetoothDeviceFound$),Qe({immediate:!0,onChange:function(t){tt.debug("onBluetoothAdapterStateChange",t),e.state=t}}),this.scanDevices$.pipe((0,h.tap)((function(e){return tt.debug("scanDevices:",e)})),(0,h.withLatestFrom)(this.scanDevicesDataList$,(function(e,t){return{option:e,options:t}})),(0,h.map)((function(e){var t=e.option,r=e.options;return et(et([],r,!0),[t],!1)})),(0,h.takeUntil)(this.destroy$)).subscribe(this.scanDevicesDataList$),this.stopScanDevices$.pipe((0,h.tap)((function(e){return tt.debug("stopScanDevices id=".concat(e))})),(0,h.withLatestFrom)(this.scanDevicesDataList$,(function(e,t){return{id:e,dataList:t}})),(0,h.map)((function(e){var t=e.id;return e.dataList.filter((function(e){return e.id!==t}))})),(0,h.takeUntil)(this.destroy$)).subscribe(this.scanDevicesDataList$),this.scanDevicesDataList$.pipe((0,h.tap)((function(e){return tt.debug("scanDevicesDataList",e)})),(0,h.map)((function(e){if(!(e.length<=0)){var t=e.map((function(e){return e.option})),r=function(e){var t=[],r=e.some((function(e){var r;return!(null===(r=e.services)||void 0===r?void 0:r.length)||(t=et(et([],t,!0),e.services,!0),!1)}));return r?void 0:Array.from(new Set(t))}(t),n=function(e){return e.some((function(e){return e.allowDuplicatesKey}))}(t),i=function(e){var t=e.map((function(e){return e.interval})).filter((function(e){return void 0!==e}));return t.length<=0?void 0:Math.min.apply(Math,t)}(t),o=function(e){var t=e.map((function(e){return e.powerLevel})).filter((function(e){return void 0!==e}));if(t.length<=0)return;var r=Math.max.apply(Math,t.map((function(e){return bt.find((function(t){return e===t.level})).value})));return bt.find((function(e){return e.value===r})).level}(t);return{services:r,allowDuplicatesKey:n,interval:i,powerLevel:o}}})),(0,h.startWith)(void 0),(0,h.pairwise)(),(0,h.map)((function(e){return{previous:e[0],current:e[1]}})),(0,h.filter)((function(e){var t,r,n,i,o=e.previous,a=e.current;return(void 0!==o||o!==a)&&(!o||!a||(t=o.services,r=a.services,i=null!=r?r:[],(n=null!=t?t:[]).length!==i.length||!n.every((function(e){return i.includes(e)}))||(o.allowDuplicatesKey!==a.allowDuplicatesKey||(o.interval!==a.interval||o.powerLevel!==a.powerLevel))))})),(0,h.map)((function(e){return e.current}))).pipe((0,h.tap)((function(e){return tt.debug("新的扫描参数",e)})),(0,h.filter)((function(){return e.state.available})),(0,h.debounceTime)(200),(0,h.takeUntil)(this.destroy$),(0,h.concatMap)((function(t){return t?e.state.discovering?ot().pipe((0,h.delay)(100),(0,h.mergeMap)((function(){return it(t)}))):it(t):e.state.discovering?ot():(0,h.of)("done")})),(0,h.tap)((function(){return tt.debug("执行完成")}))).subscribe(),this.onBluetoothDeviceFound$.pipe((0,h.takeUntil)(this.destroy$),(0,h.withLatestFrom)(this.scanDevicesDataList$,(function(e,t){return{devices:e.devices,scanDevicesDataList:t}})),(0,h.mergeMap)((function(e){var t=e.devices,r=e.scanDevicesDataList;return(0,h.from)(t.map((function(e){return{device:e,scanDevicesDataList:r}})))})),(0,h.mergeMap)((function(e){var t=e.device,r=e.scanDevicesDataList;return(0,h.from)(r.map((function(e){return{device:t,scanDevicesData:e}})))})),(0,h.filter)((function(e){var t=e.device,r=e.scanDevicesData;if(!r.option.allowDuplicatesKey){if(r.scanDeviceIdMap[t.deviceId])return!1;r.scanDeviceIdMap[t.deviceId]=!0}return!0})),(0,h.filter)((function(e){var t,r=e.device,n=e.scanDevicesData.option;return!(null===(t=n.services)||void 0===t?void 0:t.length)||n.services.some((function(e){var t;return null===(t=r.advertisServiceUUIDs)||void 0===t?void 0:t.includes(e)}))})),(0,h.tap)((function(e){var t=e.device,r=e.scanDevicesData;tt.debug("onBluetoothDeviceFound",t,r)})),(0,h.map)((function(e){var t=e.device;return{id:e.scanDevicesData.id,device:t}}))).subscribe(this.onDeviceFound$)}return e.prototype.scanDevicesObservable=function(e){var t=this,r=new h.Observable((function(r){var n=nt();tt.debug("scanDevices id=".concat(n));var i={id:n,option:e,scanDeviceIdMap:{}};t.scanDevices$.next(i);var o=t.onDeviceFound$.pipe((0,h.filter)((function(e){return e.id===n})),(0,h.map)((function(e){return{device:e.device}}))).subscribe((function(e){return r.next(e)}));return function(){tt.debug("stopScanDevices id=".concat(n)),o.unsubscribe(),t.stopScanDevices$.next(n)}}));return e.deviceId&&(r=r.pipe((0,h.filter)((function(t){return t.device.deviceId===e.deviceId})))),e.timeout&&(r=r.pipe((0,h.timeout)(e.timeout))),e.findOne&&(r=r.pipe((0,h.first)())),r},e.prototype.scanDevices=function(e){var t=this.scanDevicesObservable(e).subscribe((function(t){var r;null===(r=e.onDeviceFound)||void 0===r||r.call(e,t)}));return function(){return t.unsubscribe()}},e.prototype.destroy=function(){this.destroy$.next(),this.destroy$.complete()},e}(),nt=(Ze=0,function(){return++Ze});function it(e){return(0,h.of)(1).pipe((0,h.tap)((function(){return tt.info("开启扫描设备",e)})),(0,h.mergeMap)((function(){return(0,h.from)(O(we)(e)).pipe((0,h.tap)((function(e){e.error?tt.error("开启扫描设备 失败",e.error):tt.debug("开启扫描设备 成功")})))})))}function ot(){return(0,h.of)(1).pipe((0,h.tap)((function(){return tt.info("停止扫描设备")})),(0,h.mergeMap)((function(){return(0,h.from)(O(Se)()).pipe((0,h.catchError)((function(e){return tt.warn("stopBluetoothDevicesDiscovery error"),(0,h.of)(e)})))})))}var at,ut,ct,st,lt,ft,dt,pt,ht,vt,yt,bt=[{level:"low",value:0},{level:"medium",value:1},{level:"high",value:2}];function mt(){if(!at)throw new Error("getDevicesScanner: 请先调用 initDevicesScanner");return at}!function(e){e.Error=b()}(ut||(ut={})),function(e){e.Error=b()}(ct||(ct={})),function(e){e.Error=b()}(st||(st={})),function(e){e.Error=b()}(lt||(lt={})),function(e){e.Error=b()}(ft||(ft={})),function(e){e.Error=b()}(dt||(dt={})),function(e){e.Error=b()}(pt||(pt={})),function(e){e[e.Unknow=10001]="Unknow",e[e.BadParams=10002]="BadParams",e[e.OpenBluetoothAdapterError=10003]="OpenBluetoothAdapterError"}(ht||(ht={})),function(e){e[e.AlreadyConnected=20001]="AlreadyConnected",e[e.AlreadyConnecting=20002]="AlreadyConnecting",e[e.ConnectError=20003]="ConnectError",e[e.DisconnectError=20004]="DisconnectError",e[e.NotConnected=20005]="NotConnected",e[e.Timeout=20006]="Timeout",e[e.CancelConnect=20007]="CancelConnect"}(vt||(vt={})),function(e){e[e.WriteError=30001]="WriteError"}(yt||(yt={}));var gt,wt=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function u(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}c((n=n.apply(e,t||[])).next())}))},St=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(c){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},_t=_("wxapp-bluetooth-helper/DeviceConnection"),Ot=1,It=function(){function e(e){var t=e.deviceId,r=this;this.state$=new h.BehaviorSubject({connected:!1,connecting:!1}),this.expectConnected$=new h.BehaviorSubject(!1),this.connectRequest$=new h.Subject,this.connectError$=new h.Subject,this.connectSuccess$=new h.Subject,this.createConnectionStart$=new h.Subject,this.currentRequestId$=new h.BehaviorSubject(void 0),this.disconnectRequest$=new h.Subject,this.disconnected$=new h.Subject,this.changeState$=new h.Subject,this.destroy$=new h.Subject,this.deviceId=t,(0,h.merge)(this.connectSuccess$.pipe((0,h.tap)((function(e){var t=e.id;return _t.debug("connectDevice success id=".concat(t))}))),this.connectError$.pipe((0,h.tap)((function(e){var t=e.id;return _t.debug("connectDevice error id=".concat(t))}))),this.disconnected$.pipe((0,h.tap)((function(){return _t.debug("disconnected")})))).pipe((0,h.takeUntil)(this.destroy$)).subscribe(),this.changeState$.pipe((0,h.tap)((function(e){return _t.debug("changeState",e)})),(0,h.distinctUntilChanged)(),(0,h.filter)((function(e){return!e.connected})),(0,h.map)((function(){})),(0,h.takeUntil)(this.destroy$)).subscribe(this.disconnected$),(0,h.merge)(this.connectRequest$.pipe((0,h.map)((function(){return!0}))),this.disconnectRequest$.pipe((0,h.map)((function(){return!1}))),this.connectError$.pipe((0,h.filter)((function(e){var t=e.id;return r.currentRequestId$.getValue()===t})),(0,h.map)((function(){return!1}))),this.disconnected$.pipe((0,h.map)((function(){return!1})))).pipe((0,h.tap)((function(e){return _t.debug("expectConnected = ".concat(e))})),(0,h.takeUntil)(this.destroy$)).subscribe(this.expectConnected$),this.createConnectionStart$.pipe((0,h.map)((function(e){return e.id})),(0,h.tap)((function(e){return _t.debug("currentRequestId = ".concat(e))})),(0,h.takeUntil)(this.destroy$)).subscribe(this.currentRequestId$),(0,h.merge)(this.createConnectionStart$.pipe((0,h.map)((function(){return{connected:!1,connecting:!0}}))),this.connectSuccess$.pipe((0,h.filter)((function(e){var t=e.id;return r.currentRequestId$.getValue()===t})),(0,h.map)((function(){return{connected:!0,connecting:!1}}))),this.connectError$.pipe((0,h.filter)((function(e){var t=e.id;return r.currentRequestId$.getValue()===t})),(0,h.map)((function(){return{connected:!1,connecting:!1}}))),this.disconnectRequest$.pipe((0,h.map)((function(){return{connected:!1,connecting:!1}}))),this.disconnected$.pipe((0,h.map)((function(){return{connected:!1,connecting:!1}})))).pipe((0,h.filter)((function(e){var t=r.expectConnected$.getValue();return t&&(e.connected||e.connecting)||!t&&!e.connected&&!e.connecting})),(0,h.takeUntil)(this.destroy$)).subscribe(this.state$),this.onStateChange$=this.state$.pipe((0,h.distinctUntilChanged)((function(e,t){return e.connecting===t.connecting&&e.connected===t.connected})),(0,h.pairwise)(),(0,h.map)((function(e){return{prevState:e[0],state:e[1]}})),(0,h.tap)((function(e){_t.debug("连接状态变更 deviceId=".concat(r.deviceId),JSON.stringify(e))})),(0,h.takeUntil)(this.destroy$),(0,h.share)()),this.connectRequest$.pipe((0,h.tap)((function(){return _t.debug("connectDevice deviceId=".concat(r.deviceId))})),(0,h.mergeMap)((function(e){var t=e.id,n=e.option;return(0,h.of)(void 0).pipe((0,h.filter)((function(){var e=r.state$.getValue();if(e.connected)throw new ut.Error("已连接",vt.AlreadyConnected);if(e.connecting)throw new ut.Error("连接中",vt.AlreadyConnecting);return!0})),(0,h.tap)((function(){return r.createConnectionStart$.next({id:t})})),(0,h.mergeMap)((function(){return(0,h.from)(O(be)({deviceId:r.deviceId,timeout:n.timeout})).pipe((0,h.map)((function(e){if(e.error){_t.debug("createBLEConnection error");var r=new ut.Error("蓝牙连接失败",vt.ConnectError);throw r.createBLEConnectionError=e.error,r}return _t.debug("createBLEConnection success"),{id:t}})))})),(0,h.map)((function(){r.connectSuccess$.next({id:t})})),(0,h.catchError)((function(e){var n=e;return n instanceof ut.Error||(n=new ut.Error("蓝牙连接失败，未知异常",ht.Unknow,{error:n})),_t.debug("connectDevice error id=".concat(t)),r.connectError$.next({id:t,error:n}),(0,h.of)({id:t,error:n})})))}))).pipe((0,h.takeUntil)(this.destroy$)).subscribe()}return e.prototype.getState=function(){return this.state$.getValue()},e.prototype.connectDeviceObservable=function(e){var t=this,r=e.timeout,n=null!=r?r:1e4,i="".concat(this.deviceId,"-").concat(Ot++);return(0,h.merge)(this.connectError$.pipe((0,h.filter)((function(e){return e.id===i})),(0,h.tap)((function(e){throw _t.debug("connectDeviceObservable error",e),e.error}))),this.connectSuccess$.pipe((0,h.filter)((function(e){return e.id===i}))),(0,h.defer)((function(){return t.connectRequest$.next({id:i,option:{timeout:n}}),h.EMPTY}))).pipe((0,h.first)(),(0,h.map)((function(){})))},e.prototype.disconnectDevice=function(){return wt(this,void 0,void 0,(function(){var e,t,r,n;return St(this,(function(i){switch(i.label){case 0:if(i.trys.push([0,2,,3]),!(e=this.getState()).connected&&!e.connecting)throw new ct.Error("断开连接异常, 不存在连接",vt.DisconnectError);return this.disconnectRequest$.next(),_t.debug("closeBLEConnection deviceId=".concat(this.deviceId)),[4,O(me)({deviceId:this.deviceId})];case 1:if((t=i.sent()).error)throw new ct.Error("断开连接, closeBLEConnection 发生异常",vt.DisconnectError,{error:t.error});return _t.debug("closeBLEConnection success",t),[2,t];case 2:throw r=i.sent(),(n=r)instanceof ut.Error||(n=new ut.Error("连接失败，未知异常",ht.Unknow,{error:n})),n;case 3:return[2]}}))}))},e.prototype.onStateChangeObservable=function(){return this.onStateChange$},e.prototype.changeState=function(e){var t=e.connected;_t.debug("changeState",t),this.changeState$.next({connected:t})},e.prototype.destroy=function(){_t.debug("destroy"),this.state$.next({connected:!1,connecting:!1}),this.destroy$.next(),this.destroy$.complete()},e}(),Et=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function u(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}c((n=n.apply(e,t||[])).next())}))},Ct=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(c){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},At=_("wxapp-bluetooth-helper/DeviceConnectionManager"),xt=function(){function e(){var e=this;this.deviceConnectionMap=new Map,this.connectionStateChange$=new h.Subject,this.destroy$=new h.Subject,Xe({onChange:function(t){At.debug("onBluetoothAdapterAvailableChange: ".concat(JSON.stringify(t))),t||Array.from(e.deviceConnectionMap.values()).forEach((function(e){e.changeState({connected:!1})}))}}),ze({immediate:!0}).pipe((0,h.switchMap)((function(e){return e?(0,h.fromEventPattern)(ve,ye):h.NEVER}))).pipe((0,h.tap)((function(t){At.debug("onBLEConnectionStateChange: ".concat(JSON.stringify(t)));var r=e.deviceConnectionMap.get(t.deviceId);r&&r.changeState({connected:t.connected})})),(0,h.takeUntil)(this.destroy$)).subscribe()}return e.prototype.connectDevice=function(e){var t=e.deviceId,r=e.timeout;return Et(this,void 0,void 0,(function(){var e,n=this;return Ct(this,(function(i){return At.debug("connectDevice deviceId=".concat(t)),(e=this.deviceConnectionMap.get(t))||((e=new It({deviceId:t})).onStateChangeObservable().subscribe((function(e){return n.connectionStateChange$.next({deviceId:t,state:e.state,prevState:e.prevState})})),this.deviceConnectionMap.set(t,e)),[2,(0,h.firstValueFrom)(e.connectDeviceObservable({timeout:r}))]}))}))},e.prototype.disconnectDevice=function(e){var t=e.deviceId;return Et(this,void 0,void 0,(function(){var e;return Ct(this,(function(r){switch(r.label){case 0:return At.debug("disconnectDevice deviceId=".concat(t)),(e=this.deviceConnectionMap.get(t))?[4,e.disconnectDevice()]:[2];case 1:return r.sent(),[2]}}))}))},e.prototype.getConnectionState=function(e){var t,r=e.deviceId;try{var n=this.deviceConnectionMap.get(r);return null!==(t=null==n?void 0:n.getState())&&void 0!==t?t:{connecting:!1,connected:!1}}catch(e){throw new ft.Error("获取设备连接状态，未知异常",ht.Unknow,{error:e})}},e.prototype.onConnectionStateChange=function(e){var t=e.deviceId,r=e.onStateChange;try{var n=this.onConnectionStateChangeObservable({deviceId:t}).subscribe((function(e){var t=e.deviceId,n=e.state,i=e.prevState;return r({deviceId:t,connected:n.connected,connecting:n.connecting},{deviceId:t,connected:i.connected,connecting:i.connecting})}));return function(){n.unsubscribe()}}catch(e){throw new st.Error("监听连接状态失败，未知异常",ht.Unknow,{error:e})}},e.prototype.onConnectionConnectedChangeObservable=function(e){var t=(void 0===e?{}:e).deviceId;return this.onConnectionStateChangeObservable({deviceId:t}).pipe((0,h.filter)((function(e){var t=e.state,r=e.prevState;return t.connected!==r.connected})),(0,h.map)((function(e){return{deviceId:e.deviceId,connected:e.state.connected}})))},e.prototype.onConnectionConnectedChange=function(e){var t=e.deviceId,r=e.onConnectedChange,n=this.onConnectionConnectedChangeObservable({deviceId:t}).subscribe((function(e){return r(e)}));return function(){n.unsubscribe()}},e.prototype.getConnectedDevices=function(){return Array.from(this.deviceConnectionMap.values()).filter((function(e){return e.getState().connected})).map((function(e){return{deviceId:e.deviceId}}))},e.prototype.getLatestConnectedDevices=function(e){var t=e.services;return Et(this,void 0,void 0,(function(){var e;return Ct(this,(function(r){switch(r.label){case 0:return[4,O(ge)({services:t})];case 1:if((e=r.sent()).error)throw new pt.Error("获取失败",ht.Unknow,{error:e.error});return At.debug("获取最新已连接设备",e.success.devices),[2,e.success.devices]}}))}))},e.prototype.onConnectionStateChangeObservable=function(e){var t=(void 0===e?{}:e).deviceId,r=this.connectionStateChange$;return t?r.pipe((0,h.filter)((function(e){return e.deviceId===t}))):r},e.prototype.destroy=function(){this.destroy$.next(),this.destroy$.complete(),Array.from(this.deviceConnectionMap.values()).forEach((function(e){e.destroy()}))},e}();function Tt(){return gt||(gt=new xt),gt}var Pt=ne(Tt,"connectDevice"),jt=ne(Tt,"disconnectDevice"),Dt=ne(Tt,"getConnectionState"),kt=(ne(Tt,"onConnectionStateChange"),ne(Tt,"onConnectionStateChangeObservable")),Mt=ne(Tt,"onConnectionConnectedChange"),Bt=(ne(Tt,"onConnectionConnectedChangeObservable"),ne(Tt,"getConnectedDevices"),ne(Tt,"getLatestConnectedDevices"));function Lt(e,t){var r=void 0===t?{}:t,n=r.reversal,i=r.limit;if(!e)return"";if("string"==typeof e)return e;var o=Array.prototype.map.call(new Uint8Array(e.slice(0,i)),(function(e){return("00"+e.toString(16)).slice(-2)}));return n?o.reverse().join(""):o.join("")}var Nt,Rt=_("wxapp-bluetooth-helper/writeCharacteristicValue"),Ft=function(){function e(){var e=this;this.write$=new h.Subject,this.writeComplete$=new h.Subject,this.seq=0,this.write$.pipe((0,h.groupBy)((function(e){return e.option.deviceId})),(0,h.mergeMap)((function(e){return e.pipe((0,h.concatMap)((function(e){return(t=e.option,n=null!==(r=t.retry)&&void 0!==r?r:0,i=(0,h.of)(1).pipe((0,h.mergeMap)((function(){var e={deviceId:t.deviceId,serviceId:t.serviceId,characteristicId:t.characteristicId,value:t.value};return(0,h.defer)((function(){var t=(new Date).getTime();return Rt.debug("writeBLECharacteristicValue ".concat(t),e,Lt(e.value)),O(Ie)(e).catch((function(e){return Rt.debug("writeBLECharacteristicValue error ".concat((new Date).getTime()-t),e),e})).then((function(e){return Rt.debug("writeBLECharacteristicValue result ".concat((new Date).getTime()-t),e),e}))})).pipe((0,h.timeout)({each:2e3,with:function(e){return Rt.debug("writeBLECharacteristicValue timeout ".concat((new Date).getTime()),e),(0,h.of)({error:e,success:void 0})}}))})),(0,h.filter)((function(e){if(e.error)throw e.error;return!0})),(0,h.retry)({delay:function(e,t){return(0,h.of)(1).pipe((0,h.tap)((function(){if(t>n)throw Rt.error("writeBLECharacteristicValue error",e),e;Rt.debug("writeBLECharacteristicValue error retry ".concat(t),e)})),(0,h.delay)(100))}}),(0,h.catchError)((function(e){var t={error:e,success:void 0};return(0,h.of)(t)}))),i).pipe((0,h.map)((function(t){return{seq:e.seq,apiResult:t}})),(0,h.tap)((function(e){return Rt.debug("write result",e)})));var t,r,n,i}))).pipe((0,h.catchError)((function(e){return Rt.error("Writer 发生未知异常",e),h.EMPTY})))}))).subscribe((function(t){return e.writeComplete$.next(t)}))}return e.prototype.writeCharacteristicValue=function(e){var t=this.seq++;return this.write$.next({seq:t,option:e}),(0,h.firstValueFrom)(this.writeComplete$.pipe((0,h.filter)((function(e){return e.seq===t})),(0,h.map)((function(e){if(e.apiResult.error)throw e.apiResult.error;return e.apiResult.success})),(0,h.timeout)(3e3)))},e}();function Ut(e){return function(){if(!Nt)throw new Error("请先调用 initWriteCharacteristicValue");return Nt}().writeCharacteristicValue(e)}var qt=_("wxapp-bluetooth-helper/services/getCharacteristics");_("wxapp-bluetooth-helper/services/getServices");var $t,Vt=_("wxapp-bluetooth-helper/services/notifyCharacteristicValueChange");function zt(){Nt=new Ft}!function(e){e.Error=b()}($t||($t={}));var Wt=_("wxapp-bluetooth-helper/initBluetoothHelper"),Gt=!1;function Ht(e){void 0===e&&(e={}),Wt.debug("initBluetoothHelper"),Gt||function(e){try{e.apis&&(t=e.apis,te=t),Ve(),!e.disabledScanner&&(at||(at=new rt)),zt()}catch(e){throw new $t.Error("初始化未知异常",ht.Unknow)}var t}(e),Gt=!0}function Jt(){try{Gt=!1,null==Le||Le.destroy(),Le=void 0,at&&(at.destroy(),at=void 0),null==$e||$e.destroy(),$e=void 0,null==gt||gt.destroy(),gt=void 0}catch(e){throw new $t.Error("销毁未知异常",ht.Unknow)}}var Yt=ne(mt,"scanDevices"),Kt=ne(mt,"scanDevicesObservable"),Zt=function(){return Zt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Zt.apply(this,arguments)};function Qt(e){var t,r,n={errCode:0,errMsg:"ok"};null===(t=e.success)||void 0===t||t.call(e,n),null===(r=e.complete)||void 0===r||r.call(e,n)}function Xt(e,t){var r,n,i,o,a={errCode:null!==(r=null==e?void 0:e.errCode)&&void 0!==r?r:10008,errMsg:null!==(n=null==e?void 0:e.errMsg)&&void 0!==n?n:"其余所有系统上报的异常"};null===(i=t.fail)||void 0===i||i.call(t,a),null===(o=t.complete)||void 0===o||o.call(t,a)}var er=function(){return er=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},er.apply(this,arguments)};function tr(){var e={};function r(r,n){return{on:function(n){if(!e[r])return e[r]=n,void t[r]((function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e[r].apply(e,t)}));e[r]=n},off:function(){e[r]&&t[n](e[r])}}}var n,i,o,a,u=r("onBluetoothAdapterStateChange","offBluetoothAdapterStateChange"),c=r("onBLECharacteristicValueChange","offBLECharacteristicValueChange");return er(er(er(er({},t),{onBLEConnectionStateChange:function(e){null==a||a(),a=void 0,a=Mt({onConnectedChange:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.apply(void 0,t)}})},offBLEConnectionStateChange:function(e){null==a||a(),a=void 0},createBLEConnection:function(e){Pt({deviceId:e.deviceId,timeout:e.timeout}).then((function(){Qt(e)})).catch((function(t){return(null==t?void 0:t.createBLEConnectionError)?Xt(t.createBLEConnectionError,e):Xt({errMsg:null==t?void 0:t.message},e)}))},closeBLEConnection:function(e){jt({deviceId:e.deviceId}).then((function(){Qt(e)})).catch((function(t){return Xt({errMsg:null==t?void 0:t.message},e)}))}}),(o=new h.Subject,{startBluetoothDevicesDiscovery:function(e){n&&(n(),n=void 0),n=Yt(Zt(Zt({},e),{onDeviceFound:function(e){o.next(e)}})),setTimeout((function(){var t,r,n={errCode:0,errMsg:"ok"};null===(t=e.success)||void 0===t||t.call(e,n),null===(r=e.complete)||void 0===r||r.call(e,n)}),0)},stopBluetoothDevicesDiscovery:function(e){n&&(n(),n=void 0),setTimeout((function(){var t,r,n={errCode:0,errMsg:"ok"};null===(t=null==e?void 0:e.success)||void 0===t||t.call(e,n),null===(r=null==e?void 0:e.complete)||void 0===r||r.call(e,n)}),0)},onBluetoothDeviceFound:function(e){i=o.subscribe((function(t){e({devices:[t.device]})}))},offBluetoothDeviceFound:function(){null==i||i.unsubscribe()}})),{writeBLECharacteristicValue:function(e){Ut({deviceId:e.deviceId,serviceId:e.serviceId,characteristicId:e.characteristicId,value:e.value}).then((function(){Qt(e)})).catch((function(t){return Xt(t,e)}))},onBluetoothAdapterStateChange:u.on,offBluetoothAdapterStateChange:u.off,onBLECharacteristicValueChange:c.on,offBLECharacteristicValueChange:c.off})}var rr=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},nr="DeviceSdk",ir={loggerMethod:function(e){for(var t=e.methodName,r=e.loggerName,n=e.loggingMethod,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];n.apply(void 0,S.apply(void 0,rr([{methodName:t,loggerName:r}],i,!1)))}};function or(e){var t,r,n,i,o;t=e,n=(void 0===(r={filter:function(e){return e.startsWith("".concat(nr,"/"))}})?{}:r).filter,i=g().getLoggers(),o=Object.keys(i),n&&(o=o.filter(n)),o.forEach((function(e){var r;null===(r=i[e])||void 0===r||r.setLevel(t,!1)}))}function ar(e){var t=(0,m.getLogger)("".concat(nr,"/").concat(e)),r=t.methodFactory;return t.methodFactory=function(e,t,n){var i=r(e,t,n);return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];ir.loggerMethod.apply(ir,rr([{methodName:e,logLevel:t,loggerName:n,loggingMethod:i}],r,!1))}},t}var ur=r(1737);function cr(e,t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=e();return t(i).bind(i).apply(void 0,r)}}function sr(e){return null!=e}var lr,fr=r(398),dr=r.n(fr);var pr=function(){return pr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},pr.apply(this,arguments)};function hr(e){var t=function(e){return Kt(pr(pr({},e),{services:f}))}(e).subscribe();return function(){return t.unsubscribe()}}var vr,yr,br,mr,gr=function(){return gr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},gr.apply(this,arguments)};function wr(){var e,t=tr();return gr(gr({},t),{startBluetoothDevicesDiscovery:function(t){e&&(e(),e=void 0),e=hr(t),setTimeout((function(){var e,r,n={errCode:0,errMsg:"ok"};null===(e=t.success)||void 0===e||e.call(t,n),null===(r=t.complete)||void 0===r||r.call(t,n)}),0)},stopBluetoothDevicesDiscovery:function(t){e&&(e(),e=void 0),setTimeout((function(){var e,r,n={errCode:0,errMsg:"ok"};null===(e=null==t?void 0:t.success)||void 0===e||e.call(t,n),null===(r=null==t?void 0:t.complete)||void 0===r||r.call(t,n)}),0)},openBluetoothAdapter:function(e){setTimeout((function(){var t,r;console.error("openBluetoothAdapter",e);var n={errCode:0,errMsg:"ok"};null===(t=null==e?void 0:e.success)||void 0===t||t.call(e,n),null===(r=null==e?void 0:e.complete)||void 0===r||r.call(e,n)}),0)},closeBluetoothAdapter:function(e){setTimeout((function(){var t,r;console.error("openBluetoothAdapter",e);var n={errCode:0,errMsg:"ok"};null===(t=null==e?void 0:e.success)||void 0===t||t.call(e,n),null===(r=null==e?void 0:e.complete)||void 0===r||r.call(e,n)}),0)}})}function Sr(){return wr().getSystemInfoSync().platform}function _r(){return Sr()===vr.Ios}!function(e){e.Ios="ios",e.Android="android"}(vr||(vr={})),function(e){e.Error=b()}(yr||(yr={})),function(e){e.Error=b()}(br||(br={})),function(e){e.Error=b()}(mr||(mr={}));var Or,Ir=function(){return Ir=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ir.apply(this,arguments)};function Er(e){(function(){if(!Or)throw new Error("请先调用 initRemoveDevice");return Or})().next(e)}var Cr,Ar=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function u(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}c((n=n.apply(e,t||[])).next())}))},xr=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(c){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},Tr=ar("internal/deviceStorage/deviceStorage"),Pr="devicInfo";function jr(){if(!Cr)throw new Error("请先调用 initDeviceStorage");return Cr}function Dr(){Cr=new h.BehaviorSubject({}),function(){return Ar(this,void 0,void 0,(function(){var e,t;return xr(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,wr().getStorage({key:Pr})];case 1:return e=r.sent(),t=e||{},Tr.debug("getStorage",t),[2,t];case 2:return r.sent(),[2,{}];case 3:return[2]}}))}))}().then((function(e){Tr.info("初始化设备数据缓存",e),null==Cr||Cr.next(e),null==Cr||Cr.pipe((0,h.skip)(1)).subscribe((function(e){!function(e){Tr.debug("setStorage",e),wr().setStorage({key:Pr,data:e})}(e)}))})),function(){Mr=new h.Subject;var e=jr();Mr.pipe((0,h.withLatestFrom)(e,(function(e,t){return{device:e,deviceStorage:t}})),(0,h.map)((function(e){var t,r=e.device,n=e.deviceStorage;return Br(Br({},n),((t={})[r.deviceId]=Br(Br({},n[r.deviceId]),r),t))}))).subscribe(e)}(),function(){Or=new h.Subject;var e=jr();Or.pipe((0,h.withLatestFrom)(e,(function(e,t){return{device:e,deviceStorage:t}})),(0,h.map)((function(e){var t=e.device,r=e.deviceStorage;return Object.keys(r).reduce((function(e,n){var i,o=r[n];return t.deviceId&&t.deviceId===o.deviceId||t.deviceId&&t.deviceId===o.deviceId?e:Ir(Ir({},e),((i={})[n]=o,i))}),{})}))).subscribe(e)}()}function kr(){wr().removeStorage({key:Pr})}var Mr,Br=function(){return Br=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Br.apply(this,arguments)};function Lr(e){(function(){if(!Mr)throw new Error("请先调用 initSaveDevice");return Mr})().next(e)}function Nr(){var e=jr().getValue();return Object.values(e)}var Rr,Fr=ar("internal/deviceMac");function Ur(){if(!Rr)throw new Error("请先调用 initDeviceMacInfo");return Rr}var qr=new h.Subject,$r=new h.Subject;function Vr(e){qr.next(e)}function zr(){return Ur().getValue()}function Wr(e){if(!e.deviceId&&!e.mac)throw new Error("getDeviceMacInfo: deviceId 和 mac 必须传一个");return zr().find((function(t){return!(!e.deviceId||e.deviceId!==t.deviceId)||!(!e.mac||e.mac!==t.mac)}))}var Gr=function(){return Gr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Gr.apply(this,arguments)},Hr=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r},Jr=new Map,Yr=ar("internal/scanDevice/scanDevice");function Kr(e){Yr.debug("scanDeviceObservable",e);var t=e.timeout,r=e.mac,n=e.first,i=e.deviceName,o=e.allowDuplicatesKey,a=e.services,u=Kt({allowDuplicatesKey:null==o||o,powerLevel:"high",services:null!=a?a:f}).pipe((0,h.filter)((function(e){return(null!=i?i:d).includes(e.device.name)||(null!=i?i:d).includes(e.device.localName)})),(0,h.map)((function(e){return Sr()===vr.Android?Gr(Gr({},e.device),{mac:e.device.deviceId.replaceAll(":","").toUpperCase(),serviceData:e.device.serviceData,serviceUUIDs:e.device.advertisServiceUUIDs,timestamp:new Date}):function(e){var t=e.name,r=e.localName;if(t&&r){var n=e.serviceData,i=e.advertisServiceUUIDs||[],o=(0,ur.parseAdvertisData)(e.advertisData),a=null==o?void 0:o.mac;return n&&Object.keys(n).forEach((function(e){if(e.toUpperCase().indexOf("3802")>-1){var t=n[e];t.byteLength&&t.byteLength>0&&(a=Lt(t))}})),a&&(a=a.toUpperCase()),{name:e.name,localName:e.localName,deviceId:e.deviceId,advertisData:e.advertisData,serviceUUIDs:i,serviceData:n,RSSI:e.RSSI,mac:a,timestamp:new Date}}}(e.device)})),(0,h.filter)(sr),(0,h.filter)((function(e){return!!e.mac})),(0,h.tap)((function(e){Jr.set(e.mac,e),e.mac&&Vr({deviceId:e.deviceId,mac:e.mac})})));return r&&(u=u.pipe((0,h.filter)((function(e){return r===e.mac})))),n&&(u=u.pipe((0,h.first)())),t&&(u=u.pipe((0,h.timeout)(t))),u}function Zr(e){var t=null!=e?e:{},r=t.onDeviceFound,n=Kr(Hr(t,["onDeviceFound"])).subscribe((function(e){return null==r?void 0:r(e)}));return function(){return n.unsubscribe()}}function Qr(){return Array.from(Jr.values())}var Xr,en=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function u(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}c((n=n.apply(e,t||[])).next())}))},tn=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(c){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}};!function(e){e.Error=b()}(Xr||(Xr={}));var rn=ar("internal/deviceConnection/sdkConnection"),nn=1e4;function on(e){var t=e.deviceId,r=e.timeout,n=null!=r?r:nn;return rn.info("发起连接设备, deviceId=".concat(t)),new h.Observable((function(e){var r=!1;return ur.BLEManager.connectDevice(t,n).then((function(n){return n.success?(r=!0,rn.debug("BLEManager 连接设备: 连接成功, deviceId=".concat(t)),e.next(),void e.complete()):Promise.reject(n)}),(function(n){r=!0,rn.debug("BLEManager 连接设备: 连接失败, deviceId=".concat(t)),e.error(new yr.Error("连接设备未知异常",a.Unknow,n))})),function(){r||(rn.info("BLEManager 连接设备:  取消连接，deviceId=".concat(t,", 执行 disconnectDevice")),an(t))}}))}function an(e){return rn.debug("断开连接 deviceId=".concat(e)),ur.BLEManager.disconnectDevice(e)}var un=ar("internal/deviceConnection/findDevice/FindDeviceByConnectedDevices"),cn=function(){function e(){this.findDeviceMacs=[],this.readDeviceInfoMap=new Map,this.connectedDeviceLoop$=(0,h.interval)(1e3).pipe((0,h.mergeMap)((function(){return(0,h.from)(Bt({services:f}))})),(0,h.tap)((function(e){return un.debug("getLatestConnectedDevices",e)})),(0,h.share)())}return e.prototype.getDeviceMac=function(e){var t=this,r=e.connectedDevice;return(0,h.of)(r).pipe((0,h.tap)((function(e){return un.debug("deviceConnection",e)})),(0,h.groupBy)((function(e){return e.deviceId})),(0,h.mergeMap)((function(e){return e.pipe((0,h.map)((function(e){return{deviceConnection:e,deviceMacInfo:Wr({deviceId:e.deviceId})}})),(0,h.tap)((function(e){return un.debug("getLatestConnectedDevices and deviceMacInfo",e)})),(0,h.mergeMap)((function(e){var r=e.deviceConnection,n=e.deviceMacInfo;return n?(un.debug("从缓存中获取到 mac 信息 mac=".concat(n.mac)),(0,h.of)({deviceId:r.deviceId,mac:n.mac})):t.connectAndReadDeviceInfoObservable({deviceId:r.deviceId})})),(0,h.first)())})))},e.prototype.findDevice=function(e){var t=this,r=e.mac;return this.findDeviceMacs.push(r),this.connectedDeviceLoop$.pipe((0,h.mergeAll)(),(0,h.mergeMap)((function(e){return t.getDeviceMac({connectedDevice:e})})),(0,h.filter)((function(e){return e.mac===r})),(0,h.first)())},e.prototype.getMobileDeviceMac=function(){var e=this,t=this.connectedDeviceLoop$.pipe((0,h.first)(),(0,h.mergeAll)(),(0,h.tap)((function(e){un.debug("connectedDevice",e)})),(0,h.mergeMap)((function(t){return e.getDeviceMac({connectedDevice:t})})),(0,h.reduce)((function(e,t){return e.push({mac:t.mac}),e}),[]));return(0,h.firstValueFrom)(t)},e.prototype.connectAndReadDeviceInfoObservable=function(e){var t=this,r=e.deviceId,n=this.readDeviceInfoMap.get(r);return n||(n=function(e){var t=e.deviceId;return new h.Observable((function(e){(0,h.of)(1).pipe((0,h.mergeMap)((function(){return un.debug("连接设备进行获取 mac 信息 deviceId=".concat(t," 开始")),on({deviceId:t})})),(0,h.mergeMap)((function(){return un.debug("连接设备进行获取 mac 信息 deviceId=".concat(t," 连接成功")),(0,h.from)(function(e){var t,r,n=e.deviceId;return en(this,void 0,void 0,(function(){var e;return tn(this,(function(i){switch(i.label){case 0:return[4,ur.BLEManager.readDeviceInfo(n).then((function(e){return{deviceInfo:e}})).catch((function(e){return{error:e}}))];case 1:if((e=i.sent())&&"error"in e)throw new Xr.Error((null===(t=e.error)||void 0===t?void 0:t.msg)||(null===(r=e.error)||void 0===r?void 0:r.errMsg)||"读取设备信息失败",a.Unknow,{error:e.error});return[2,e.deviceInfo]}}))}))}({deviceId:t})).pipe((0,h.retry)(1))})),(0,h.tap)((function(e){return un.debug("连接设备进行获取 mac 信息 deviceId=".concat(t," 获取设备信息成功"),e)})),(0,h.map)((function(e){return{mac:e.sn}})),(0,h.map)((function(e){return{deviceId:t,mac:e.mac}})),(0,h.catchError)((function(e){throw an(t),e}))).subscribe(e)}))}({deviceId:r}).pipe((0,h.tap)((function(e){var n=e.mac;Vr({deviceId:r,mac:n,saveToStorage:!0}),t.findDeviceMacs.includes(n)||an(r)})),(0,h.finalize)((function(){t.readDeviceInfoMap.delete(r)})),(0,h.share)()),this.readDeviceInfoMap.set(r,n)),n},e}();var sn,ln=function(){return ln=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ln.apply(this,arguments)},fn=ar("internalapis/deviceConnection/findDevice"),dn=function(){function e(){this.findDeviceByConnectedDevices=new cn}return e.prototype.findDeviceObservable=function(e){var t,r=e.mac,n=e.timeout;fn.debug("start findDeviceId mac=".concat(r));var i=(0,h.merge)(_r()&&this.findDeviceByConnectedDevices?null===(t=this.findDeviceByConnectedDevices)||void 0===t?void 0:t.findDevice({mac:r}).pipe((0,h.map)((function(e){return ln(ln({},e),{connected:!0})}))):h.EMPTY,this.findDeviceByScan({mac:r}).pipe((0,h.map)((function(e){return ln(ln({},e),{connected:!1})})))).pipe((0,h.first)(),(0,h.tap)((function(e){Vr({deviceId:e.deviceId,mac:r,saveToStorage:!0})})));return n&&(i=i.pipe((0,h.timeout)(n))),i},e.prototype.getMobileDeviceMac=function(){var e;return null===(e=this.findDeviceByConnectedDevices)||void 0===e?void 0:e.getMobileDeviceMac()},e.prototype.destroy=function(){this.findDeviceByConnectedDevices=void 0},e.prototype.findDeviceByScan=function(e){var t=e.mac;return(0,h.of)(1).pipe((0,h.tap)((function(){return fn.info("通过扫描查找设备 开始, mac=".concat(t))})),(0,h.mergeMap)((function(){return Kr({mac:t,first:!0})})),(0,h.map)((function(e){return{mac:t,deviceId:e.deviceId}})),(0,h.tap)((function(e){fn.info("通过扫描查找设备 找到设备, mac=".concat(t),e)})))},e}();function pn(){if(!sn)throw new Error("请先调用 initFindDevice");return sn}var hn=cr(pn,(function(e){return e.findDeviceObservable})),vn=cr(pn,(function(e){return e.getMobileDeviceMac})),yn=function(){return yn=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},yn.apply(this,arguments)};var bn=function(){return bn=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},bn.apply(this,arguments)},mn=ar("internal/deviceConnection/DeviceConnection"),gn=function(){function e(e){var t=e.mac,r=this;this.connectRequest$=new h.Subject,this.connectError$=new h.Subject,this.connectSuccess$=new h.Subject,this.destroy$=new h.Subject,this.disconnectRequest$=new h.Subject,this.bleDisconnected$=new h.Subject,this.mac=t;var n=Wr({mac:t}),i=null==n?void 0:n.deviceId;this.state$=new h.BehaviorSubject(i?Dt({deviceId:i}):{connected:!1,connecting:!1}),(0,h.merge)(this.connectRequest$.pipe((0,h.map)((function(){return{connected:!1,connecting:!0}}))),this.connectSuccess$.pipe((0,h.map)((function(){return{connected:!0,connecting:!1}}))),this.connectError$.pipe((0,h.map)((function(){return{connected:!1,connecting:!1}}))),this.bleDisconnected$.pipe((0,h.map)((function(){return{connected:!1,connecting:!1}})))).pipe((0,h.takeUntil)(this.destroy$)).subscribe(this.state$),this.onStateChange$=this.state$.pipe((0,h.distinctUntilChanged)((function(e,t){return e.connecting===t.connecting&&e.connected===t.connected})),(0,h.pairwise)(),(0,h.map)((function(e){return{prevState:e[0],state:e[1]}})),(0,h.tap)((function(e){mn.debug("连接状态变更 mac=".concat(r.mac),JSON.stringify(e))})),(0,h.takeUntil)(this.destroy$),(0,h.share)()),function(e){var t=e.mac;return kt().pipe((0,h.map)((function(e){return yn(yn({},e),{deviceMacInfo:Wr({deviceId:e.deviceId})})})),(0,h.filter)((function(e){var r;return!t||t===(null===(r=e.deviceMacInfo)||void 0===r?void 0:r.mac)})))}({mac:t}).pipe((0,h.filter)((function(e){return e.prevState.connected&&!e.state.connected})),(0,h.map)((function(){})),(0,h.takeUntil)(this.destroy$),(0,h.tap)((function(){return mn.debug("连接已断开 mac=".concat(r.mac))}))).subscribe(this.bleDisconnected$)}return e.prototype.connectObservable=function(e){var t=this,r=e.timeout,n=_r(),i=null!=r?r:1e4,o=!1,u=!1,s=(0,h.of)(void 0).pipe((0,h.tap)((function(){mn.info("连接设备 mac=".concat(t.mac," 开始，timeout=").concat(r))})),(0,h.filter)((function(){if(t.state$.getValue().connecting)throw new yr.Error("连接设备 mac=".concat(t.mac,"，正在连接中"),c.AlreadyConnecting);if(t.state$.getValue().connected)throw new yr.Error("连接设备 mac=".concat(t.mac,"，当前已连接"),c.AlreadyConnected);return!0})),(0,h.mergeMap)((function(){return t.connectRequest$.next(),!n||function(){var e;return null!=lr||(lr="wxwork"===(null===(e=dr().getSystemInfoSync())||void 0===e?void 0:e.environment)),lr}()?(0,h.of)(void 0):function(e){var t=e.mac;return(0,h.of)(1).pipe((0,h.tap)((function(){return mn.debug("通过 mac 从设备缓存中查找是否找到对应设备缓存")})),(0,h.map)((function(){return Wr({mac:t})})),(0,h.tap)((function(e){return mn.debug("findByDeviceMacInfo result",e)})),(0,h.map)((function(e){if(e)return{deviceId:e.deviceId}})))}({mac:t.mac}).pipe((0,h.tap)((function(e){e?mn.info("通过 mac 从设备缓存中找到对应设备, mac=".concat(t.mac,", deviceId=").concat(e.deviceId)):mn.info("通过 mac 从设备缓存中找不到对应设备, mac=".concat(t.mac))})))})),(0,h.mergeMap)((function(e){return e?(0,h.of)(bn(bn({},e),{connected:!1})):hn({mac:t.mac}).pipe((0,h.catchError)((function(e){throw mn.error("连接设备 mac=".concat(t.mac,"，查找设备过程发生异常"),e),new yr.Error("连接设备 mac=".concat(t.mac,"，查找设备过程发生异常"),a.Unknow,{error:e})})))})),(0,h.mergeMap)((function(e){var r=e.deviceId,n=e.connected;return o=!0,n?(0,h.of)(void 0):(mn.info("连接设备 mac=".concat(t.mac,"， 找到 deviceId=").concat(r," 发起连接")),u=!0,on({deviceId:r}).pipe((0,h.catchError)((function(e){throw new yr.Error("连接设备 mac=".concat(t.mac,"，创建连接发生异常"),a.Unknow,{error:e})}))))})),(0,h.timeout)({each:i,with:function(){return(0,h.throwError)((function(){return o?new yr.Error("连接设备 mac=".concat(t.mac,"，超时"),c.Timeout):new yr.Error("连接设备 mac=".concat(t.mac,"，找不到目标设备"),c.NotFoundDevice)}))}}),(0,h.catchError)((function(e){if(e instanceof yr.Error)throw e;throw mn.error("连接设备 mac=".concat(t.mac,"，未知异常"),e),new yr.Error("连接设备 mac=".concat(t.mac,"，未知异常"),a.Unknow,{error:e})})));return s.pipe((0,h.tap)((function(){mn.debug("连接成功 mac=".concat(t.mac)),t.connectSuccess$.next()})),(0,h.finalize)((function(){t.getState().connected||(u&&t.disconnect(),t.connectError$.next())})),(0,h.takeUntil)(this.disconnectRequest$),(0,h.takeUntil)(this.destroy$))},e.prototype.disconnect=function(){try{this.disconnectRequest$.next();var e=Wr({mac:this.mac});if(!e)throw new br.Error("连接设备 mac=".concat(this.mac,"，传入的 mac 没找到对应 deviceId"),c.NotConnected);return an(e.deviceId)}catch(e){if(e instanceof br.Error)throw e;throw new br.Error("断开连接未知异常 mac=".concat(this.mac),a.Unknow)}},e.prototype.getState=function(){return this.state$.getValue()},e.prototype.onStateChangeObservable=function(){return this.onStateChange$},e.prototype.destroy=function(){this.destroy$.next(),this.destroy$.complete()},e}();var wn,Sn=function(){return Sn=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Sn.apply(this,arguments)},_n=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r},On=ar("internal/deviceConnection/DeviceConnectionManager"),In=function(){function e(){this.deviceConnectionMap=new Map,this.connectionStateChange$=new h.Subject}return e.prototype.connectDeviceObservable=function(e){var t=e.mac,r=_n(e,["mac"]),n=this.getAndInitDeviceConnection(t);return this.deviceConnection=n,n.connectObservable(r)},e.prototype.connectDevice=function(e){return On.debug("connectDevice mac=".concat(e.mac)),(0,h.firstValueFrom)(this.connectDeviceObservable(e))},e.prototype.disconnectDevice=function(e){var t=e.mac;On.debug("disconnectDevice mac=".concat(t));var r=this.getDeviceConnection(t);if(!r)throw new br.Error("未连接",c.NotConnected);return r.disconnect()},e.prototype.getConnectionState=function(e){var t,r=e.mac,n=this.getDeviceConnection(r);return null!==(t=null==n?void 0:n.getState())&&void 0!==t?t:{connected:!1,connecting:!1}},e.prototype.onConnectionStateChangeObservable=function(e){var t=e.mac;return this.connectionStateChange$.pipe((0,h.filter)((function(e){return!t||t===e.mac})),(0,h.tap)((function(e){return On.debug("连接状态变更",JSON.stringify(e))})))},e.prototype.onConnectionStateChange=function(e){var t=null!=e?e:{},r=t.onChange,n=_n(t,["onChange"]),i=this.onConnectionStateChangeObservable(Sn({},n)).subscribe((function(e){return null==r?void 0:r(e)}));return function(){return i.unsubscribe()}},e.prototype.onConnectionConnectedChangeObservalbe=function(e){return this.onConnectionStateChangeObservable(e).pipe((0,h.filter)((function(e){return e.prevState.connected!==e.state.connected})),(0,h.map)((function(e){return{mac:e.mac,connected:e.state.connected}})),(0,h.tap)((function(e){return On.debug("已连接状态变更",JSON.stringify(e))})))},e.prototype.onConnectionConnectedChange=function(e){var t=e.onChange,r=_n(e,["onChange"]),n=this.onConnectionConnectedChangeObservalbe(Sn({},r)).subscribe((function(e){return t(e)}));return function(){return n.unsubscribe()}},e.prototype.getConnectedDevices=function(){if(this.deviceConnectionMap)return Array.from(this.deviceConnectionMap.values()).map((function(e){return e.getState().connected?e.mac:void 0})).filter(sr)},e.prototype.destroy=function(){var e;null===(e=this.deviceConnection)||void 0===e||e.destroy(),this.deviceConnectionMap=void 0},e.prototype.getDeviceConnection=function(e){var t;return null===(t=this.deviceConnectionMap)||void 0===t?void 0:t.get(e)},e.prototype.getAndInitDeviceConnection=function(e){var t,r=this,n=this.getDeviceConnection(e);if(n)return n;On.debug("创建新连接 mac=".concat(e));var i=new gn({mac:e});return i.onStateChangeObservable().pipe((0,h.map)((function(t){return Sn({mac:e},t)})),(0,h.tap)((function(t){On.debug("onStateChangeObservable mac=".concat(e),JSON.stringify(t)),r.connectionStateChange$.next(t)}))).subscribe(),i.onStateChangeObservable().pipe((0,h.filter)((function(e){return!e.state.connecting&&!e.state.connected})),(0,h.switchMap)((function(){return(0,h.timer)(3e3)})),(0,h.filter)((function(){var e=i.getState();return!e.connecting&&!e.connected}))).subscribe((function(){var t;On.debug("销毁连接 mac=".concat(e)),i.destroy(),null===(t=r.deviceConnectionMap)||void 0===t||t.delete(e)})),null===(t=this.deviceConnectionMap)||void 0===t||t.set(e,i),i},e}();function En(){sn=new dn,wn=new In}function Cn(){if(!wn)throw new Error("请先调用 initDeviceConnection");return wn}function An(){null==wn||wn.destroy(),wn=void 0}var xn,Tn,Pn,jn,Dn,kn,Mn=cr(Cn,(function(e){return e.connectDevice})),Bn=cr(Cn,(function(e){return e.connectDeviceObservable})),Ln=cr(Cn,(function(e){return e.disconnectDevice})),Nn=cr(Cn,(function(e){return e.getConnectionState})),Rn=cr(Cn,(function(e){return e.onConnectionStateChange})),Fn=cr(Cn,(function(e){return e.onConnectionStateChangeObservable})),Un=cr(Cn,(function(e){return e.onConnectionConnectedChange})),qn=cr(Cn,(function(e){return e.onConnectionConnectedChangeObservalbe})),$n=cr(Cn,(function(e){return e.getConnectedDevices}));function Vn(e){return{type:null==e?void 0:e.Spo2Type,switch:1===(null==e?void 0:e.Spo2Switch),interval:null==e?void 0:e.Spo2Interval}}function zn(e){return{Spo2Type:e.type,Spo2Switch:e.switch?1:0,Spo2Interval:e.interval}}function Wn(e){return e}function Gn(e){return e}function Hn(e){return e}function Jn(e){return e}function Yn(e){return e}function Kn(e){return e}function Zn(e){return{fileType:e.fileType,filename:e.fileName}}function Qn(e){return e}function Xn(e){return e}function ei(e){return e}function ti(e){var t=e.dataType,r=e.recordType;if(t===jn.RestingHeartRate&&r!==Pn.Recent)throw new Error("dataType=".concat(t,", recordType=").concat(r,", dataType=5(静息心率) 此时 recordType, 只能 0(近期记录)有效"));return{DataType:t,RecordType:r}}function ri(e){return e}function ni(e){return e}function ii(e){return{SportIds:e.sportId}}function oi(e){var t,r;return{StartTime:Math.round((null!==(t=e.startTime)&&void 0!==t?t:(new Date).getTime())/1e3),EndTime:Math.round((null!==(r=e.endTime)&&void 0!==r?r:(new Date).getTime())/1e3)}}function ai(e){var t;return{sportIds:null!==(t=null==e?void 0:e.SportIds)&&void 0!==t?t:[]}}function ui(e){var t,r,n;return{HrSwitch:e.hrSwitch,HrInterval:null!==(t=e.hrInterval)&&void 0!==t?t:300,HrDailyWarnEn:e.hrDailyWarnSwitch,HrDailyWarnVal:null!==(r=e.hrDailyWarnValue)&&void 0!==r?r:60,HrSportWarnEn:e.hrSportWarnSwitch,HrSportWarnVal:null!==(n=e.hrSportWarnValue)&&void 0!==n?n:120}}function ci(e){return{hrSwitch:e.HrSwitch,hrInterval:e.HrInterval,hrDailyWarnSwitch:e.HrDailyWarnEn,hrDailyWarnValue:e.HrDailyWarnVal,hrSportWarnSwitch:e.HrSportWarnEn,hrSportWarnValue:e.HrSportWarnVal}}!function(e){e[e.SleepBloodOxygen=0]="SleepBloodOxygen",e[e.AllDayBloodOxygen=1]="AllDayBloodOxygen"}(xn||(xn={})),function(e){e[e.Log=1]="Log",e[e.WatchFace=2]="WatchFace",e[e.Hr=3]="Hr",e[e.Spo2=4]="Spo2",e[e.Sleep=5]="Sleep",e[e.SportReport=6]="SportReport",e[e.DailyActivity=7]="DailyActivity",e[e.SportHr=8]="SportHr",e[e.DailyActivitySummary=12]="DailyActivitySummary",e[e.RestingHr=13]="RestingHr"}(Tn||(Tn={})),function(e){e[e.Recent=0]="Recent",e[e.History=1]="History",e[e.SpotTest=2]="SpotTest"}(Pn||(Pn={})),function(e){e[e.Hr=0]="Hr",e[e.BloodOxygen=1]="BloodOxygen",e[e.Sleep=2]="Sleep",e[e.DailyActivity=3]="DailyActivity",e[e.DailyActivityAndStatus=4]="DailyActivityAndStatus",e[e.RestingHeartRate=5]="RestingHeartRate"}(jn||(jn={})),function(e){e[e.BeforeSleep=1]="BeforeSleep"}(Dn||(Dn={})),function(e){e[e.Invalid=0]="Invalid",e[e.Closed=1]="Closed",e[e.Opened=2]="Opened"}(kn||(kn={}));var si,li,fi,di,pi=function(){return pi=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},pi.apply(this,arguments)};function hi(e){if(e){var t=function(e){if(!e||e.byteLength<=0)return[];var t=new Uint8Array(e.byteLength);t.set(new Uint8Array(e,e.byteLength));for(var r=new DataView(t.buffer),n=r.byteLength,i=[],o=0;o<n;o++){var a=r.getUint8(o);i.push(a)}return i}(e.sleepDetail);return pi(pi({},e),{sleepDetail:t})}}function vi(e){var t=0,r=e.length;if(r%2==0){r/=2;for(var n=[],i=0;i<r;i++){var o=e.substr(t,2),a=parseInt(o,16);n.push(a),t+=2}return n}}function yi(e,t){if(!e)return"";for(var r="",n=0;n<t-e.length;n++)r+="0";return r+=e}function bi(e){if(65535!==e){var t=vi(yi(e.toString(16),4));if(t){var r=t;return{hour:r[0],minute:r[1]}}}}function mi(e){if(!e)return parseInt("ffff",16);var t=[e.hour,e.minute].map((function(e){return e.toString(16)})).map((function(e){return yi(e,2)})).join("");return parseInt(t,16)}function gi(e){var t,r;return{Enable:e.enable?1:0,ThresholdValue:{Duration:e.thresholdValue.duration,Step:e.thresholdValue.step},TimeSets:null!==(r=null===(t=e.timeSets)||void 0===t?void 0:t.map((function(e){return{StartTime:mi(e.startTime),EndTime:mi(e.endTime)}})))&&void 0!==r?r:[]}}function wi(e){var t,r;return{enable:1===e.Enable,thresholdValue:{duration:e.ThresholdValue.Duration,step:e.ThresholdValue.Step},timeSets:null!==(r=null===(t=e.TimeSets)||void 0===t?void 0:t.map((function(e){var t=bi(e.StartTime),r=bi(e.EndTime);if(t&&r)return{startTime:t,endTime:r}})).filter((function(e){return!!e})))&&void 0!==r?r:[]}}function Si(e){return{StateCode:e.stateCode,TimesTamp:e.timesTamp,Speed:e.speed,InvertSpeed:e.invertSpeed,Altitude:e.altitude,Distance:e.distance,Longitude:e.longitude,latitude:e.latitude,precision:e.precision}}function _i(e){var t,r,n=e.SleepSchedule,i=n.FallAsleepRemindSet,o=i?{remindSwitch:1===i.RemindSwitch,remindTime:bi(i.RemindTime),remindCycle:(r=i.RemindCycleMaskFlag,yi(Number(r).toString(2).slice(0,7),7).split("").reverse().map((function(e,t){return 1===Number(e)?t+1:void 0})).filter((function(e){return!!e})))}:void 0;return{sleepSwitch:1===e.SleepSwitch,sleepScheduleEnabled:e.SleepScheduleEn,sleepSchedule:{sleepDuration:n.SleepDuration,sleepStartTime:bi(n.SleepStartTime),sleepEndTime:bi(n.SleepEndTime),fallAsleepRemindSetting:o,sleepReportSwitch:null!==(t=n.SleepReportSwitch)&&void 0!==t?t:li.Invalid}}}function Oi(e){var t,r=e.sleepSchedule,n=r.fallAsleepRemindSetting,i=n?{RemindSwitch:n.remindSwitch?1:0,RemindTime:mi(n.remindTime),RemindCycleMaskFlag:(t=n.remindCycle,parseInt(t.filter((function(e){return e>0&&e<8})).reduce((function(e,t){return e[t-1]=1,e}),Array.from({length:7})).map((function(e){return e?1:0})).reverse().join(""),2))}:void 0;return{SleepSwitch:e.sleepSwitch?1:0,SleepScheduleEn:e.sleepScheduleEnabled,SleepSchedule:{SleepDuration:r.sleepDuration,SleepStartTime:mi(r.sleepStartTime),SleepEndTime:mi(r.sleepEndTime),FallAsleepRemindSet:i}}}function Ii(e){return e}function Ei(e){return e}function Ci(e){var t;return{Weight:e.weight,Height:e.height,Birthday:xi(e.birthday),Age:null!==(t=e.age)&&void 0!==t?t:Pi(e.birthday),Gender:e.gender,NickName:e.nickName}}function Ai(e){if(e)return{weight:e.Weight,height:e.Height,birthday:e.Birthday,age:e.Age,gender:e.Gender,nickName:e.NickName}}function xi(e){if(Ti(e)){var t=new Date(e),r=t.getFullYear(),n=t.getMonth()+1,i=t.getDate(),o=new ArrayBuffer(4),a=new DataView(o);return a.setUint16(0,r,!1),a.setUint8(2,n),a.setUint8(3,i),a.getInt32(0,!1)}}function Ti(e){return!!e&&new Date(e).getTime()<(new Date).getTime()}function Pi(e){if(Ti(e)){var t=new Date(e),r=new Date,n=t.getFullYear(),i=r.getFullYear();if(n===i)return 0;var o=i-n;return r.getMonth()<t.getMonth()||r.getDate()<t.getDate()?o-1:o}}function ji(e){return{GoalSw:e.switch?1:0,GoalItem:e.items.map((function(e){return{SubType:e.type,SubSw:e.switch?1:0,SubValue:e.value}}))}}function Di(e){return{switch:1===e.GoalSw,items:e.GoalItem.map((function(e){return{type:e.SubType,switch:1===e.SubSw,value:e.SubValue}}))}}function ki(e){return e}function Mi(e){return e}!function(e){!function(e){e[e.Closed=0]="Closed",e[e.Wait=1]="Wait",e[e.Weak=2]="Weak",e[e.Normal=3]="Normal"}(e.StateCode||(e.StateCode={}))}(si||(si={})),function(e){e[e.Invalid=0]="Invalid",e[e.Close=1]="Close",e[e.Open=2]="Open"}(li||(li={})),function(e){e[e.Male=1]="Male",e[e.Female=0]="Female"}(fi||(fi={})),function(e){e[e.Invalid=0]="Invalid",e[e.Steps=1]="Steps",e[e.Calorie=2]="Calorie",e[e.Distance=3]="Distance",e[e.StandingDuration=4]="StandingDuration",e[e.WeeklyActivityDuration=5]="WeeklyActivityDuration",e[e.Other=6]="Other"}(di||(di={}));var Bi=function(){return Bi=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Bi.apply(this,arguments)},Li=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};function Ni(e){var t;if(e)return{weight:e.weight,height:e.height,birthday:e.birthday,age:null!==(t=e.age)&&void 0!==t?t:Pi(e.birthday),gender:e.gender,nickName:e.nickName}}const Ri=function(e){var t=e.scanResult,r=e.bindUserId,n=e.userInfo,i=Li(e,["scanResult","bindUserId","userInfo"]),o=wr().getSystemInfoSync();return Bi({scanResult:null!=t?t:{},languageConfig:{local:"CN",language:"zh"},userId:null!=r?r:"userId",userInfo:Bi({},Ni(n)),bindResult:void 0,platform:"ios"===o.platform?ur.Platform.ios:"android"===o.platform?ur.Platform.android:void 0},i)};var Fi;function Ui(e){return ur.AliceUtils.parseFileData(e)}function qi(e){try{if(e.byteLength>4096){for(var t=function(e,t){var r=[],n=e.byteLength;if(n>t){for(var i=0;i<n-t;){var o=e.slice(i,i+t);r.push(o),i+=t}var a=e.slice(i,i+t);r.push(a)}else r.push(e);return r}(e,4096),r=[],n=0;n<t.length;n++)r.push(qi(t[n]));return r.join("")}var i=new Uint8Array(e);return String.fromCharCode.apply(null,i)}catch(e){return console.error("字符串转换失败"+e,e),""}}function $i(e){if(void 0===e)return e;var t=Lt(e);return parseInt(t,16)}function Vi(e){var t;return null!==(t=vi(Lt(e)))&&void 0!==t?t:[]}function zi(e){return qi(e)}!function(e){e.HR="HR",e["SPO2-S"]="SPO2-S",e["SPO2-P"]="SPO2-P",e.SLEP="SLEP",e.ACTI="ACTI",e.ACTIS="ACTIS",e["ACTI-2"]="ACTI-2",e.SPOR="SPOR",e.GPSD="GPSD",e.R_HR="R_HR"}(Fi||(Fi={}));var Wi=ar("internal/dataSync/parse/parseData/parseSportReport");var Gi=ar("internal/dataSync/parse/parseData/parseDailyActivityFile");var Hi=function(){return Hi=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Hi.apply(this,arguments)},Ji=ar("internal/dataSync/parse/parseData/parseHr");function Yi(e){var t=Ui(e);if(!t.fileHeader.fileType.startsWith(Fi.HR))throw Ji.error("解析心率文件，无效文件类型 fileType=".concat(t.fileHeader.fileType),e),new Error("解析心率文件，无效文件类型 fileType=".concat(t.fileHeader.fileType));return{fileList:t.fileList.map((function(e){return t=e.data,Hi(Hi({},t),{HrData:t.HrData?Ki(t.HrData):t.HrData});var t})),fileHeader:t.fileHeader}}function Ki(e){if(e)return Hi(Hi({},e),{Type:Zi(e.Type),HrValue:Vi(e.HrValue),Reliability:$i(e.Reliability)})}function Zi(e){if(void 0!==e){var t=Lt(e);if(!(t.length<2))return parseInt(t.slice(0,2),16)}}var Qi=function(){return Qi=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Qi.apply(this,arguments)},Xi=ar("internal/dataSync/parse/parseData/parseSleep");function eo(e){var t=Ui(e);if(!t.fileHeader.fileType.startsWith(Fi.SLEP))throw Xi.error("解析睡眠文件，无效文件类型 fileType=".concat(t.fileHeader.fileType),e),new Error("解析睡眠文件，无效文件类型 fileType=".concat(t.fileHeader.fileType));return{fileList:t.fileList.map((function(t){return 0===t.originData.type?(r=t.data,Qi(Qi({},r),{SleepData:r.SleepData?Lt(r.SleepData):r.SleepData})):1===t.originData.type?hi(t.data):void Xi.error("解析睡眠文件，无效的数据包类型 type=".concat(t.originData.type),e,t);var r})).filter((function(e){return e})),fileHeader:t.fileHeader}}var to=function(){return to=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},to.apply(this,arguments)},ro=ar("internal/dataSync/parse/parseData/parseSpo2");function no(e){var t=Ui(e),r=t.fileHeader.fileType;if(!r.startsWith(Fi["SPO2-S"])&&!r.startsWith(Fi["SPO2-P"]))throw ro.error("解析血氧文件，无效文件类型 fileType=".concat(r),e),new Error("解析血氧文件，无效文件类型 fileType=".concat(r));return{fileList:t.fileList.map((function(e){return t=e.data,to(to({},t),{Spo2Data:t.Spo2Data?to(to({},t.Spo2Data),{Spo2Value1:Vi(t.Spo2Data.Spo2Value1),Spo2Value2:Vi(t.Spo2Data.Spo2Value2),Reliability1:Vi(t.Spo2Data.Reliability1),Reliability2:Vi(t.Spo2Data.Reliability2)}):t.Spo2Data});var t})),fileHeader:t.fileHeader}}var io=ar("internal/dataSync/parse/parseData/parseDayActiveDataFile");var oo=ar("internal/dataSync/parse/parseData/parseRestingHr");var ao=ar("internal/dataSync/parseFile");function uo(e){var t=e.getData();ao.debug("toFileData",t);var r=function(e){if(e.fileType===Tn.Log)return{fileList:[zi(e.fileBuffer)]};if(e.fileType===Tn.Hr)return Yi(e);if(e.fileType===Tn.Spo2)return no(e);if(e.fileType===Tn.Sleep)return eo(e);if(e.fileType===Tn.SportReport)return function(e){if(e.fileName.endsWith(".rpt"))return{fileList:[(t=e.fileBuffer,r=zi(t),JSON.parse(r))]};var t,r,n=Ui(e),i=n.fileHeader.fileType;if(!i.startsWith(Fi.SPOR)&&!i.startsWith(Fi.GPSD))throw Wi.error("解析运动报告文件，无效文件类型 fileType=".concat(i),e),new Error("解析运动报告文件，无效文件类型 fileType=".concat(i));return{fileList:n.fileList,fileHeader:n.fileHeader}}(e);if(e.fileType===Tn.DailyActivity)return function(e){Gi.debug("receive fileInfo",e);var t=Ui(e);Gi.debug("parse fileInfo",t);var r=t.fileHeader.fileType;if(!r.startsWith(Fi.ACTIS)&&!r.startsWith(Fi.ACTI))throw Gi.error("解析日常活动文件，无效文件类型 fileType=".concat(r),e),new Error("解析日常活动文件，无效文件类型 fileType=".concat(r));return{fileList:t.fileList.map((function(e){return e.data})),fileHeader:t.fileHeader}}(e);if(e.fileType===Tn.DailyActivitySummary)return function(e){io.debug("receive fileInfo",e);var t=Ui(e);io.debug("parse fileInfo",t);var r=t.fileHeader.fileType;if(!r.startsWith(Fi["ACTI-2"]))throw io.error("解析日常活动汇总文件，无效文件类型 fileType=".concat(r),e),new Error("解析日常活动汇总文件，无效文件类型 fileType=".concat(r));return{fileList:t.fileList.map((function(e){return e.data})),fileHeader:t.fileHeader}}(e);if(e.fileType===Tn.SportHr)return function(e){for(var t=new DataView(e.fileBuffer),r=[],n=0;n<t.byteLength;n++){var i=t.getUint8(n);r.push(i)}return{fileList:[r]}}(e);if(e.fileType===Tn.RestingHr)return function(e){oo.debug("receive fileInfo",e),oo.debug("receive fileInfo",Lt(e.fileBuffer));var t=Ui(e);oo.debug("parse fileInfo",t);var r=t.fileHeader.fileType;if(!r.startsWith(Fi.R_HR))throw oo.error("解析静息心率文件，无效文件类型 fileType=".concat(r),e),new Error("解析静息心率文件，无效文件类型 fileType=".concat(r));return{fileList:t.fileList.map((function(e){return e.data})),fileHeader:t.fileHeader}}(e);var t;try{t=zi(e.fileBuffer)}catch(e){return{fileList:[]}}try{return{fileList:[JSON.parse(t)]}}catch(r){return ao.debug("尝试解析为 json 失败",e),{fileList:[t]}}}(t),n={fileName:t.fileName,fileType:t.fileType,fileList:r.fileList,fileHeader:r.fileHeader};return ao.debug("toFileData result",n),n}var co=function(){return co=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},co.apply(this,arguments)},so=ar("internal/dataSync/parseReportData");function lo(e){var t=e.reportData,r=(new Date).getTime();if(t.dataType===ur.DataType_Alice){var n=function(e){var t=e.getData();so.debug("toNormalUploadData",t);var r={categoryId:t.categoryId,commandId:t.commandId,data:t.pbInfo,isReq:t.isReq,isRsp:t.isRsp,seq:t.seq};return so.debug("toNormalUploadData result",r),r}(t);return co(co({},n),{type:fo.UploadDataType.Normal,ts:r})}if(t.dataType===ur.DataType_AliceFile){var i=uo(t);return co(co({},i),{type:fo.UploadDataType.File,ts:r})}so.error("onDataReport unknow dataType",t)}var fo,po=new h.Subject;function ho(e){var t=e.onUpload,r=po.subscribe((function(e){t(e)}));return function(){return r.unsubscribe()}}function vo(e){var t=e.mac,r=e.userInfo;if(!Nn({mac:t}).connected)throw new Error("开始同步数据，设备未连接 mac=".concat(t));var n=Wr({mac:t});if(!n)throw new Error("开始同步数据，找不到设备 mac=".concat(t));var i=n.deviceId;return(0,h.defer)((function(){return ur.BLEManager.startDataSync(i,Ri({scanResult:{},userInfo:r,listeners:{onDataReport:function(e){var t=lo({reportData:e});t&&function(e){var t=e.data,r=Wr({deviceId:e.deviceId}),n=null==r?void 0:r.mac;n?po.next({mac:n,data:t}):console.warn("数据上报，mac 不存在")}({deviceId:i,data:t})}}}))}))}function yo(e){var t=e.mac,r=e.userInfo;return(0,h.firstValueFrom)(vo({mac:t,userInfo:r}))}!function(e){!function(e){e.Normal="normal",e.File="file"}(e.UploadDataType||(e.UploadDataType={}))}(fo||(fo={}));var bo=function(){function e(){this.subscriptions=new Set}return e.prototype.emit=function(e){this.subscriptions.forEach((function(t){t(e)}))},e.prototype.on=function(e){var t=this;return this.subscriptions.add(e),function(){t.subscriptions.delete(e)}},e.prototype.once=function(e){var t=this,r=function(){t.subscriptions.delete(e)};return this.subscriptions.add((function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return r(),e.apply(void 0,t)})),r},e}(),mo=new bo;function go(e){return mo.on(e)}var wo=new bo;function So(e){return wo.on(e)}var _o,Oo=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function u(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}c((n=n.apply(e,t||[])).next())}))},Io=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(c){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},Eo=ar("internal/gps/GpsHandler"),Co=function(){function e(){var e=this;this.gpsStatus=ur.GpsStatus.Close,this.isStart=!1,this.gpsManager=new ur.GpsManager({onStartRequest:function(t){return Oo(e,void 0,void 0,(function(){return Io(this,(function(e){return Eo.debug("gps start",t),this.isStart||(this.isStart=!0,mo.emit()),[2]}))}))},onStopRequest:function(t){return Oo(e,void 0,void 0,(function(){return Io(this,(function(e){return Eo.debug("gps stop",t),0===t.deviceIds.length&&(this.isStart=!1,wo.emit()),[2]}))}))},getGpsInfo:function(){return{locationInfo:e.locationInfo,gpsStatus:e.gpsStatus}}})}return e.prototype.updateLocationInfo=function(e){this.locationInfo=e},e.prototype.updateGpsStatus=function(e){this.gpsStatus=e},e.prototype.handleDeviceRequestGps=function(e){var t=e.uploadData,r=e.mac;Eo.debug("收到gps下发请求, deviceId=".concat(r),t.data);var n=Wr({mac:r});n?this.gpsManager.receiveDeviceGpsSwitch({deviceId:n.deviceId,categoryId:t.categoryId,commandId:t.commandId,gpsSwitch:t.data,seq:t.seq,gpsStatus:this.gpsStatus}):Eo.warn("收到gps下发请求，通过 mac=".concat(r," 找不到对应 deviceId"))},e}();function Ao(){if(!_o)throw new Error("请先调用 initPgs");return _o}function xo(){_o=void 0}var To=cr(Ao,(function(e){return e.handleDeviceRequestGps})),Po=cr(Ao,(function(e){return e.updateGpsStatus})),jo=cr(Ao,(function(e){return e.updateLocationInfo})),Do=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function u(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}c((n=n.apply(e,t||[])).next())}))},ko=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(c){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},Mo=ar("internal/requestDevice/requestByAliceRequest");function Bo(e){var t,r,n,i,o,a,u;return Do(this,void 0,void 0,(function(){var c,s,l,f,d,p,h,v,y;return ko(this,(function(b){switch(b.label){case 0:c=(new Date).getTime(),s=e.request?function(e){var t=e.buffer,r=e.root,n=e.lookup,i=e.data;if(t)return t;if(r&&n)return ur.PbHandler.encodePb(r,n,i);return}(e.request):void 0,l=new ur.AliceRequest(e.categoryId,e.commandId+(e.isRsp?128:0),s,e.seq),e.timeout&&l.setTimeout(e.timeout),b.label=1;case 1:return b.trys.push([1,3,,4]),[4,ur.BLEManager.send(e.deviceId,l)];case 2:return f=b.sent(),d=void 0,p=void 0,(h=null===(t=null==f?void 0:f.originResponse)||void 0===t?void 0:t.responseData)&&(h.parsePb(null!==(n=null===(r=e.response)||void 0===r?void 0:r.root)&&void 0!==n?n:ur.pdfile.error,null!==(o=null===(i=e.response)||void 0===i?void 0:i.lookup)&&void 0!==o?o:"ErrorCode_t"),d=h.packet.pbArrayBuffer,p=h.packet.pbInfo),y=(new Date).getTime(),Mo.info("requestDevice success: startTs=".concat(c,", spendTs=").concat(y-c,", categoryId=").concat(l.categoryId,", commandId=").concat(l.commandId,", reqData=").concat(JSON.stringify(null===(a=e.request)||void 0===a?void 0:a.data),", reqHex=").concat(s&&Lt(s),", respHex=").concat(d&&Lt(d),", respData=").concat(JSON.stringify(p)," ")),[2,p];case 3:throw v=b.sent(),y=(new Date).getTime(),Mo.error("requestDevice error: startTs=".concat(c,", spendTs=").concat(y-c,",  categoryId=").concat(l.categoryId,", commandId=").concat(l.commandId,", reqData=").concat(JSON.stringify(null===(u=e.request)||void 0===u?void 0:u.data),", reqHex=").concat(s&&Lt(s))),v;case 4:return[2]}}))}))}var Lo=ar("internal/requestDevice/config"),No={GetBindInfo:{categoryId:0,commandId:3,response:{root:ur.pdfile.bind,lookup:"bindInfo_t"}},Unbind:{categoryId:0,commandId:7,request:{root:ur.pdfile.bind,lookup:"unbindReq_t"}},GetDeviceTime:{categoryId:1,commandId:1,response:{root:ur.pdfile.deviceinfo,lookup:"time_t",format:Gn}},SetDeviceTime:{categoryId:1,commandId:2,request:{root:ur.pdfile.deviceinfo,lookup:"time_t",parse:Wn}},GetDeviceInfo:{categoryId:1,commandId:3,response:{root:ur.pdfile.deviceinfo,lookup:"device_info_t",format:Hn}},GetBatteryInfo:{categoryId:1,commandId:4,response:{root:ur.pdfile.deviceinfo,lookup:"battery_info_t",format:Jn}},SetLanguage:{categoryId:1,commandId:13,request:{root:ur.pdfile.deviceinfo,lookup:"DeviceLanguageSet_t",parse:Kn}},GetHrSetting:{categoryId:2,commandId:1,response:{root:ur.pdfile.health,lookup:"HrSwitch_t",format:ci}},SetHrSetting:{categoryId:2,commandId:2,request:{root:ur.pdfile.health,lookup:"HrSwitch_t",parse:ui}},GetBloodOxygenSetting:{categoryId:2,commandId:3,response:{root:ur.pdfile.health,lookup:"Spo2Switch_t",format:Vn}},SetBloodOxygenSetting:{categoryId:2,commandId:4,request:{root:ur.pdfile.health,lookup:"Spo2Switch_t",parse:zn}},GetSleepSetting:{categoryId:2,commandId:5,response:{root:ur.pdfile.health,lookup:"SleepSwitch_t",format:_i}},SetSleepSetting:{categoryId:2,commandId:6,request:{root:ur.pdfile.health,lookup:"SleepSwitch_t",parse:Oi}},GetUserInfo:{categoryId:2,commandId:7,response:{root:ur.pdfile.userinfo,lookup:"UserInfo_t",format:Ai}},SetUserInfo:{categoryId:2,commandId:8,request:{root:ur.pdfile.userinfo,lookup:"UserInfo_t",parse:Ci}},GetSedentaryReminder:{categoryId:2,commandId:9,response:{root:ur.pdfile.health,lookup:"SedentaryReminder_t",format:wi}},SetSedentaryReminder:{categoryId:2,commandId:10,request:{root:ur.pdfile.health,lookup:"SedentaryReminder_t",parse:gi}},GetDailyRecordData:{categoryId:2,commandId:11,isGetFile:!0,request:{root:ur.pdfile.health,lookup:"RecordData_t",parse:ti}},GetSleepReport:{categoryId:2,commandId:12,response:{root:ur.pdfile.health,lookup:"sleepReport_t",format:hi}},GetPressureStatus:{categoryId:2,commandId:18,request:{root:ur.pdfile.health,lookup:"pressureStatusReq_t",parse:ri},response:{root:ur.pdfile.health,lookup:"pressureStatusReport_t",format:ni}},GetActivaGoalSetting:{categoryId:3,commandId:1,response:{root:ur.pdfile.sport,lookup:"TodayActiveGoalGet_t",format:Di}},SetActivaGoalSetting:{categoryId:3,commandId:2,request:{root:ur.pdfile.sport,lookup:"TodayActiveGoalGet_t",parse:ji}},GetTodayActivityData:{categoryId:3,commandId:7,response:{root:ur.pdfile.sport,lookup:"TodayActiveTotalGet_t"}},GetSportRecordList:{categoryId:3,commandId:8,request:{root:ur.pdfile.sport,lookup:"SportDescription_t",parse:oi},response:{root:ur.pdfile.sport,lookup:"SportDescription_t",format:ai}},GetSportRecordFile:{categoryId:3,commandId:9,isGetFile:!0,request:{root:ur.pdfile.sport,lookup:"SportDetail_t",parse:ii}},GetDailyRecordSummaryFile:{categoryId:3,commandId:10,isGetFile:!0},SendGpsLocation:{categoryId:3,commandId:13,request:{root:ur.pdfile.sport,lookup:"GpsLocation_t",parse:Si}},GetActivityStrength:{categoryId:3,commandId:14,response:{root:ur.pdfile.sport,lookup:"activityStrengthDetail_t",format:ei}},GetSetSportHrSectionSetting:{categoryId:3,commandId:15,request:{root:ur.pdfile.health,lookup:"sportHrSectionCfg_t",parse:Ei},response:{root:ur.pdfile.health,lookup:"sportHrSectionCfg_t",format:Ii}},GetSetPEClassSetting:{categoryId:3,commandId:16,request:{root:ur.pdfile.sport,lookup:"PEClassGet_t",parse:Mi},response:{root:ur.pdfile.sport,lookup:"PEClassGet_t",format:ki}},GetFileList:{categoryId:8,commandId:1,request:{root:ur.pdfile.file,lookup:"getFlieListReqRsp_t",parse:Qn},response:{root:ur.pdfile.file,lookup:"getFlieListReqRsp_t",format:Xn}},GetFile:{categoryId:8,commandId:2,isGetFile:!0,request:{root:ur.pdfile.file,lookup:"getFlieRequest_t",parse:Zn}}};Object.keys(No).forEach((function(e){No[e].requestType=e})),Lo.debug("AllRequestType",No);var Ro=function(){function e(e){var t=e.executer,r=e.waitTimeout,n=e.runTimeout,i=this;this.isStart=!1,this.isWaitTimeout=!1,this.start$=new h.Subject,this.executer=t,this.createdTs=(new Date).getTime(),this.waitTimeout=r,this.runTimeout=n;var o=this.genWaitTimeoutObservable().pipe((0,h.tap)((function(){i.isWaitTimeout=!0})));this.result$=(0,h.race)(o.pipe((0,h.map)((function(){return{timeout:!0}}))),this.start$.pipe((0,h.map)((function(){return{timeout:!1}})))).pipe((0,h.mergeMap)((function(e){return e.timeout?(0,h.throwError)((function(){return i.genWaitTimeoutError()})):i.genExecuteObservable()}))).pipe((0,h.first)(),(0,h.share)()),this.result$.subscribe()}return e.prototype.start=function(){var e=this;if(this.isStart)throw new Error("已经 start");return this.isWaitTimeout?(0,h.throwError)((function(){return e.genWaitTimeoutError()})):(this.isStart=!0,this.start$.next(),this.result$)},e.prototype.genWaitTimeoutObservable=function(){var e;return(null!==(e=this.waitTimeout)&&void 0!==e?e:0)>0?(0,h.timer)(this.waitTimeout).pipe((0,h.map)((function(){}))):h.NEVER},e.prototype.genExecuteObservable=function(){var e=this,t=(0,h.defer)((function(){return e.waitTimeout&&(new Date).getTime()-e.createdTs>e.waitTimeout?(0,h.throwError)((function(){return e.genWaitTimeoutError()})):e.executer()}));return this.runTimeout&&(t=t.pipe((0,h.tap)((function(){console.error("执行超时,timeOut=".concat(e.runTimeout))})))),t},e.prototype.genWaitTimeoutError=function(){return new Error("等待超时, waitTimeout=".concat(this.waitTimeout))},e}(),Fo=function(){return Fo=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Fo.apply(this,arguments)},Uo=function(){function e(e){var t=e.concurrent,r=e.waitTimeout,n=e.runTimeout;this.task$=new h.Subject,this.concurrent=t,this.waitTimeout=r,this.runTimeout=n,this.subscription=this.task$.pipe((0,h.mergeMap)((function(e){return e.start().pipe((0,h.catchError)((function(){return h.EMPTY})))}),this.concurrent)).subscribe()}return e.prototype.runTask=function(e,t){var r=this;return new Promise((function(n,i){var o,a,u=new Ro(Fo(Fo({},t),{waitTimeout:null!==(o=null==t?void 0:t.waitTimeout)&&void 0!==o?o:r.waitTimeout,runTimeout:null!==(a=null==t?void 0:t.runTimeout)&&void 0!==a?a:r.runTimeout,executer:e}));(0,h.firstValueFrom)(u.result$).then(n,i),r.task$.next(u)}))},e.prototype.destroy=function(){this.subscription.unsubscribe()},e}(),qo=new Map;function $o(e,t){return function(e){return qo.has(e)||qo.set(e,new Uo({concurrent:1})),qo.get(e)}(e).runTask(t,{waitTimeout:1e4,runTimeout:3e3})}var Vo,zo=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function u(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}c((n=n.apply(e,t||[])).next())}))},Wo=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(c){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},Go=3e3,Ho=new Map,Jo=new h.Subject;function Yo(e){Jo.next(e)}function Ko(e){var t=this,r=e.mac,n=e.requestDevice,i=e.onReceiveFile;function o(){var e={status:Vo.Timeout};return null==i||i(e),Zo(e)}return function(e){return Ho.has(e)||Ho.set(e,new Uo({concurrent:1})),Ho.get(e)}(r).runTask((function(){return zo(t,void 0,void 0,(function(){var e,t;return Wo(this,(function(a){switch(a.label){case 0:return[4,n()];case 1:return 1e6!==(null==(e=a.sent())?void 0:e.ErrorCode)?[3,3]:(t=Jo.pipe((0,h.filter)((function(e){return e.mac===r})),(0,h.timeout)({first:Go,with:function(){return(0,h.throwError)(o)}}),(0,h.map)((function(e){return function(e){if(e.type===fo.UploadDataType.Normal){var t={3:Vo.Request,4:Vo.SendChunk,5:Vo.SendComplete,6:Vo.Cancel};if(!(e.commandId in t))throw new Error("toReceiveFileInfo 异常 commandId=".concat(e.commandId));return{status:t[e.commandId],data:e.data}}if(e.type===fo.UploadDataType.File){return{status:Vo.Complete,data:e}}throw new Error("toReceiveFileInfo 异常类型")}(e.data)})),(0,h.tap)((function(e){null==i||i(e)})),(0,h.groupBy)((function(e){return e.status===Vo.Complete?"complete":"notComplete"})),(0,h.mergeMap)((function(e){return"complete"===e.key?e:e.pipe((0,h.tap)((function(e){if(e.status===Vo.Cancel)throw Zo(e)})),(0,h.debounceTime)(Go),(0,h.mergeMap)((function(){return(0,h.throwError)(o)})))}))),[4,(0,h.firstValueFrom)(t)]);case 2:a.sent(),a.label=3;case 3:return[2,e]}}))}))}),{waitTimeout:12e4,runTimeout:6e4})}function Zo(e){var t=e.status,r=new Error("接收文件异常 status=".concat(t));return r.status=t,r}!function(e){e.Request="request",e.SendChunk="sendChunk",e.SendComplete="sendComplete",e.Complete="complete",e.Cancel="cancel",e.Timeout="timeout"}(Vo||(Vo={}));var Qo=function(){return Qo=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Qo.apply(this,arguments)},Xo=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function u(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}c((n=n.apply(e,t||[])).next())}))},ea=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(c){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},ta=ar("internal/requestDevice/requestDevice");function ra(e){var t=e.mac,r=e.requestType,n=e.data,i=e.isRsp,o=e.seq,a=e.onReceiveFile;return Xo(this,void 0,void 0,(function(){var e,u;return ea(this,(function(c){if(ta.debug("requestDevice: requestType=".concat(r," "),n),!(e=No[r]))throw new Error("requestDevice: 暂不支持 requestType=".concat(r));return u=function(){return function(e){var t,r,n,i,o,a,u,c=e.mac,s=e.requestType,l=e.requestConfig,f=e.data,d=e.seq,p=e.isRsp;return Xo(this,void 0,void 0,(function(){var e,h,v,y,b,m,g,w=this;return ea(this,(function(S){switch(S.label){case 0:return e=l.categoryId,h=l.commandId,v=null!==(n=null===(r=null===(t=l.request)||void 0===t?void 0:t.parse)||void 0===r?void 0:r.call(t,f))&&void 0!==n?n:f,y=null!==(i=l.response)&&void 0!==i?i:{root:ur.pdfile.error,lookup:"ErrorCode_t"},ta.debug("requestDevice: requestType=".concat(s," "),f),b=l.request?Qo(Qo({},l.request),{data:v}):void 0,[4,$o(c,(function(){return Xo(w,void 0,void 0,(function(){var t,r;return ea(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),ta.debug("requestDeviceNative: categoryId=".concat(e,", commandId=").concat(h),b),[4,Bo({deviceId:na({mac:c}),categoryId:e,commandId:h,request:b,response:y,isRsp:p,seq:d})];case 1:return t=n.sent(),ta.debug("requestDeviceNative:  categoryId=".concat(e,", commandId=").concat(h),t),[2,t];case 2:throw r=n.sent(),ta.error("requestDevice error: requestType=".concat(s),r),r;case 3:return[2]}}))}))}))];case 1:return m=S.sent(),g=null!==(u=null===(a=null===(o=l.response)||void 0===o?void 0:o.format)||void 0===a?void 0:a.call(o,m))&&void 0!==u?u:m,ta.debug("requestDevice result: requestType=".concat(s," "),f,g),[2,g]}}))}))}({mac:t,requestType:r,requestConfig:e,data:n,isRsp:i,seq:o})},e.isGetFile?[2,new Promise((function(e,r){Ko({mac:t,requestDevice:function(){return u().then((function(t){return e(t),Promise.resolve(t)}),(function(e){return r(e),Promise.reject(e)}))},onReceiveFile:a})}))]:[2,u()]}))}))}function na(e){var t=Wr({mac:e.mac});if(!t)throw new Error("getDeviceId：没找到对应 mac");return t.deviceId}var ia,oa=function(){return oa=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},oa.apply(this,arguments)},aa=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function u(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}c((n=n.apply(e,t||[])).next())}))},ua=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(c){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},ca=ar("internal/requestDevice/requestDeviceGetFile");function sa(e){return aa(this,void 0,void 0,(function(){var t,r,n,i;return ua(this,(function(o){if(t=e.requestType,r=e.data,n=e.onReceiveFile,ca.debug("requestDeviceGetFile: requestType=".concat(t," "),r),!(null==(i=No[t])?void 0:i.isGetFile))throw new Error("requestDeviceGetFile: 暂不支持 requestType=".concat(t));return[2,new Promise((function(t,r){ra(oa(oa({},e),{onReceiveFile:function(e){null==n||n(e),e.status===Vo.Complete?t(e.data):[Vo.Cancel,Vo.Timeout].includes(e.status)&&r(e)}})).then((function(e){1e6!==(null==e?void 0:e.ErrorCode)&&r(e)}))}))]}))}))}!function(e){!function(e){e[e.Invalid=0]="Invalid",e[e.Sleep=1]="Sleep",e[e.WakeUp=2]="WakeUp",e[e.StartSport=3]="StartSport",e[e.EndSport=4]="EndSport",e[e.FileUpdate=5]="FileUpdate"}(e.EventType||(e.EventType={})),function(e){e[e.HeartRate=0]="HeartRate",e[e.BloodOxygen=1]="BloodOxygen",e[e.Sleep=2]="Sleep",e[e.DailyActivities=3]="DailyActivities",e[e.DailyActivitiesStatus=4]="DailyActivitiesStatus",e[e.Pressure=5]="Pressure",e[e.DailyActivitiesSummary=6]="DailyActivitiesSummary",e[e.PointBloodOxygen=7]="PointBloodOxygen",e[e.SportRecord=8]="SportRecord",e[e.TodayActivities=9]="TodayActivities",e[e.RestingHeartRate=10]="RestingHeartRate",e[e.All=31]="All"}(e.FileUpdateType||(e.FileUpdateType={}))}(ia||(ia={}));var la=function(){return la=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},la.apply(this,arguments)};function fa(e){var t=e.EventID,r={type:t,time:e.EventTime,originEvent:e};switch(t){case ia.EventType.Invalid:case ia.EventType.Sleep:case ia.EventType.WakeUp:return r;case ia.EventType.StartSport:case ia.EventType.EndSport:return la(la({},r),{data:{sportId:e.EventParaStr}});case ia.EventType.FileUpdate:return function(e){var t=Number(e.originEvent.EventParaUint).toString(2).split("").reverse().map(Number).reduce((function(e,t,r){return 1===t&&e.push(r),e}),[]);return la(la({},e),{data:{fileTypes:t}})}(r);default:throw new Error("无效 type=".concat(t))}}var da,pa=ar("internal/dataSync/event/EventManager"),ha=function(){function e(){this.event$=new h.Subject}return e.prototype.onEventObservable=function(e){var t=void 0===e?{}:e,r=t.mac,n=t.eventType,i=this.event$.asObservable();return r&&(i=i.pipe((0,h.filter)((function(e){return e.mac===r})))),n&&(i=i.pipe((0,h.filter)((function(e){return e.event.type===n})))),i},e.prototype.onEvent=function(e){var t=this.event$.subscribe(e);return function(){t.unsubscribe()}},e.prototype.triggerEvent=function(e,t){pa.getLevel()<=pa.levels.DEBUG&&pa.debug("triggerEvent originEvent = ".concat(JSON.stringify(t)));var r=fa(t);pa.getLevel()<=pa.levels.DEBUG&&pa.debug("triggerEvent event = ".concat(JSON.stringify(r))),this.event$.next({mac:e,event:r})},e}();function va(){return da||(da=new ha),da}var ya=cr(va,(function(e){return e.onEvent})),ba=cr(va,(function(e){return e.onEventObservable})),ma=cr(va,(function(e){return e.triggerEvent}));function ga(){ho({onUpload:function(e){var t=e.data,r=e.mac;if(t.type===fo.UploadDataType.Normal){var n=t.categoryId,i=t.commandId;switch(n){case 1:return void(16===i&&ma(r,t.data));case 3:return 12===i?To({mac:r,uploadData:t}):void 0;case 8:return void([3,4,5,6].includes(i)&&Yo({mac:r,data:t}))}}if(t.type===fo.UploadDataType.File&&(Yo({mac:r,data:t}),t.fileType===Tn.SportReport))return function(e){var t=e.uploadData,r=e.mac;t.fileList.forEach((function(e){e.hrSimpleDataFile&&ra({mac:r,requestType:"GetFile",data:{fileType:Tn.SportHr,fileName:e.hrSimpleDataFile}}),e.detailDataFile&&ra({mac:r,requestType:"GetFile",data:{fileType:Tn.SportReport,fileName:e.detailDataFile}}),e.gpsDataFile&&ra({mac:r,requestType:"GetFile",data:{fileType:Tn.SportReport,fileName:e.gpsDataFile}})}))}({mac:r,uploadData:t})}})}var wa=ar("internal/initInternal"),Sa=ar("LifesenseSdk");function _a(){return Dr(),function(){var e=Nr().filter((function(e){return e.mac})).map((function(e){return{deviceId:e.deviceId,mac:e.mac}}));Rr=new h.BehaviorSubject(e),qr.pipe((0,h.filter)((function(e){return!(!e.deviceId||!e.mac)||(Fr.error("updateDeviceMac：无效数据",e),!1)})),(0,h.tap)((function(e){e.saveToStorage&&(Fr.debug("saveToStorage=true, 保存到设备缓存",e),Lr({deviceId:e.deviceId,mac:e.mac}))})),(0,h.withLatestFrom)(Ur(),(function(e,t){return{options:e,deviceMacInfoList:t}})),(0,h.map)((function(e){var t=e.options,r=e.deviceMacInfoList,n=r.filter((function(e){return e.deviceId===t.deviceId||e.mac===t.mac}));return{options:t,deviceMacInfoList:r,oldItemList:n}})),(0,h.filter)((function(e){var t=e.options,r=e.oldItemList;if(1===r.length){var n=r[0];if(n.mac===t.mac&&n.deviceId===t.deviceId)return!1}return!0})),(0,h.tap)((function(e){var t=e.options;$r.next({deviceId:t.deviceId,mac:t.mac})})),(0,h.map)((function(e){var t=e.options,r=e.deviceMacInfoList,n=e.oldItemList,i=r.filter((function(e){return!n.includes(e)})),o={deviceId:t.deviceId,mac:t.mac};return i.push(o),i}))).subscribe(Rr)}(),En(),ga(),_o=new Co,wa.debug("init"),ur.BLEManager.init({openBLEAdapter:!1,bluetooth:wr(),platform:"wx",logger:Sa,discoverDelay:0,printValueChange:!0,printWrite:!0})}var Oa,Ia=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function u(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}c((n=n.apply(e,t||[])).next())}))},Ea=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(c){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}};!function(e){e.Error=b()}(Oa||(Oa={}));var Ca=ar("internal/init"),Aa=new h.BehaviorSubject({initializing:!1,initialized:!1});function xa(e){return void 0===e&&(e={}),Ia(this,void 0,void 0,(function(){var t,r,n,i;return Ea(this,(function(o){switch(o.label){case 0:if(o.trys.push([0,2,,3]),t=Aa.getValue(),r=t.initialized,n=t.initializing,r)throw new Oa.Error("已经初始化",u.Initialized);if(n)throw new Oa.Error("正在初始化",u.Initializing);return Aa.next({initialized:!1,initializing:!0}),e.logger&&(void 0!==e.logger.level&&or(e.logger.level),e.logger.method&&(c=e.logger.method,ir.loggerMethod=c)),Ht({apis:e.apis}),[4,_a().catch((function(e){return{error:e,success:void 0}}))];case 1:if(!o.sent().success)throw Aa.next({initialized:!1,initializing:!1}),new Oa.Error("初始化失败",u.InitBluetoothError);return Ca.debug("init success"),Aa.next({initialized:!0,initializing:!1}),[3,3];case 2:throw i=o.sent(),console.error(i),new Oa.Error("初始化失败",a.Unknow,i);case 3:return[2]}var c}))}))}function Ta(e){var t=Aa.pipe((0,h.filter)((function(e){return e.initialized})),(0,h.first)()).subscribe((function(){return e()}));return function(){return t.unsubscribe()}}function Pa(){try{Jt(),kr(),An(),xo(),Aa.next({initialized:!1,initializing:!1})}catch(e){console.error("销毁SDK失败",e)}console.info("销毁SDK成功")}var ja,Da,ka=r(4803);function Ma(e){var t=ka.parse(e.substr(e.indexOf("?")));return void 0!==t.m&&void 0!==t.s?{mac:t.m,sn:t.s}:{model:t.p,mac:t.mac}}function Ba(){kr()}!function(e){e.Error=b()}(ja||(ja={})),function(e){e.Error=b()}(Da||(Da={}));const La=function(e,t){return void 0===t&&(t={}),new Promise((function(r,n){var i,o,a=!1,u=e.subscribe({next:function(e){var r;o=e,a=!0,null===(r=t.next)||void 0===r||r.call(t,e)},error:n,complete:function(){a?r(o):n(new h.EmptyError)}});null===(i=t.canceler)||void 0===i||i.call(t,(function(){u.unsubscribe()}))}))};var Na=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function u(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}c((n=n.apply(e,t||[])).next())}))},Ra=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(c){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},Fa=ar("internal/bindDevice/bindDevice");function Ua(e){var t=this,r=e.userId,n=e.mac,i=e.language,o=e.onConfirmBind;return new h.Observable((function(e){if(Nn({mac:n}).connected){var u=Wr({mac:n});if(u){var c=u.deviceId;Vr({deviceId:c,mac:n,saveToStorage:!0}),e.next({state:"waitUserConfirm"}),ur.BLEManager.bindDevice(c,Ri({scanResult:{},bindUserId:r,languageConfig:i,listeners:{onConfirmBind:function(){return Na(t,void 0,void 0,(function(){return Ra(this,(function(t){return o?(e.next({state:"startConfirmBind"}),Fa.debug("startConfirmBind"),[2,o()]):[2,{success:!0}]}))}))}}})).then((function(t){Fa.debug("bindDevice success",t),e.next({state:"success"}),e.complete()}),(function(t){var r;if(e.next({state:"error"}),t instanceof ja.Error)e.error(t);else if(1!==(null==t?void 0:t.code)){if(2===(null==t?void 0:t.code)){var n=null===(r=null==t?void 0:t.originResponse)||void 0===r?void 0:r.BindReqAck;if(2===n)return void e.error(new ja.Error("设备拒绝绑定，已被其他用户绑定",s.DeviceAlreadyBind,{error:t}));if(3===n)return void e.error(new ja.Error("设备拒绝绑定，正在充电中",s.DeviceCharging,{error:t}))}3!==(null==t?void 0:t.code)?4!==(null==t?void 0:t.code)?(Fa.debug("bindDevice error",t),e.error(new ja.Error("未知异常",a.Unknow,{error:t}))):e.error(new ja.Error("onConfirmBind 函数返回结果中 success 不为 true",s.OnConfirmBindResultNotSuccess,{confirmResult:t.value.confirmResult})):e.error(new ja.Error("onConfirmBind 发生异常",s.OnConfirmBindError,{error:t}))}else e.error(new ja.Error("用户拒绝绑定",s.UserDeny,{error:t}))}))}else e.error(new ja.Error("绑定设备，找不到设备",s.NotFoundDevice))}else e.error(new ja.Error("绑定设备，设备未连接",s.NotConnected))}))}function qa(e){var t=e.mac,r=e.userId,n=e.language,i=e.onConfirmBind,o=e.onStateChange,a=e.canceler;return La(Ua({mac:t,userId:r,language:n,onConfirmBind:i}),{next:o,canceler:a})}var $a=ar("internal/bindDevice/connectAndBindDevice");function Va(e){var t=e.mac,r=e.userId,n=e.language,i=e.onConfirmBind,o=e.onStateChange,u=e.canceler;return La(function(e){var t=e.mac,r=e.userId,n=e.language,i=e.onConfirmBind;return new h.Observable((function(e){var o=!1,u=!1;e.next({state:"connectStart"}),(0,h.of)(1).pipe((0,h.mergeMap)((function(){return Bn({mac:t}).pipe((0,h.tap)((function(){o=!0})),(0,h.catchError)((function(e){if($a.debug("连接异常",e),e instanceof yr.Error)throw new Da.Error(e.message,e.code,{error:e});throw new Da.Error("连接设备未知异常",a.Unknow,{error:e})})))})),(0,h.tap)((function(){e.next({state:"connectSuccess"})})),(0,h.mergeMap)((function(){return Ua({mac:t,userId:r,language:n,onConfirmBind:i}).pipe((0,h.catchError)((function(e){if($a.debug("绑定异常",e),e instanceof ja.Error)throw new Da.Error(e.message,e.code,e.data);throw new Da.Error("绑定未知异常",a.Unknow,{error:e})})))})),(0,h.catchError)((function(e){if(u=!0,$a.debug("连接设备并进行绑定失败 发生异常",e,e instanceof Da.Error),e instanceof Da.Error)throw e;throw new Da.Error("连接设备并进行绑定失败, 未知异常",a.Unknow,{error:e})})),(0,h.finalize)((function(){$a.debug("连接并绑定设备 结束, isError=".concat(u,", connected=").concat(o)),u&&o&&Ln({mac:t})}))).subscribe(e)}))}({mac:t,userId:r,language:n,onConfirmBind:i}),{next:o,canceler:u})}var za=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function u(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}c((n=n.apply(e,t||[])).next())}))},Wa=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(c){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}};function Ga(e){var t=e.mac,r=e.bindUserId;return za(this,void 0,void 0,(function(){var e,n,i;return Wa(this,(function(o){switch(o.label){case 0:if(!Wr({mac:t}))throw new Error("没找到对应 mac");o.label=1;case 1:return o.trys.push([1,3,,4]),[4,ra({mac:t,requestType:"Unbind",data:{account:r}})];case 2:return e=o.sent(),[3,4];case 3:throw n=o.sent(),console.error(n),n;case 4:return o.trys.push([4,6,,7]),[4,Ln({mac:t})];case 5:return o.sent(),Er({mac:t}),[3,7];case 6:return i=o.sent(),console.error(i),[3,7];case 7:return[2,e]}}))}))}var Ha=o("A700"),Ja=o("A701"),Ya=o("A702"),Ka=o("A703"),Za=_("band-bluetooth-wxapp-sdk/internal/ota/initMainService");function Qa(e){var t=e.deviceId,r=Ha;return(0,h.of)(1).pipe((0,h.tap)((function(){Za.debug("初始化主服务特征值 开始")})),(0,h.mergeMap)((function(){return function(e){var t=e.deviceId,r=e.serviceId;return(0,h.of)(1).pipe((0,h.tap)((function(){return qt.debug("获取蓝牙设备某个服务中所有特征值 deviceId=".concat(t,", serviceId=").concat(r," 开始"))})),(0,h.mergeMap)((function(){return O(_e)({deviceId:t,serviceId:r})})),(0,h.map)((function(e){if(e.error)throw e.error;return e.success})),(0,h.catchError)((function(e){throw qt.debug("获取蓝牙设备某个服务中所有特征值 deviceId=".concat(t," 失败")),e})),(0,h.tap)((function(e){return qt.debug("获取蓝牙设备某个服务中所有特征值 deviceId=".concat(t,", serviceId=").concat(r," 成功"),e)})))}({deviceId:t,serviceId:r})})),(0,h.tap)((function(e){Za.debug("初始化主服务特征值 获取特征值成功",e)})),(0,h.map)((function(e){return function(e){var t=e.reduce((function(e,t){return e[t.uuid]=t,e}),{}),r=t[Ja];if(!r)throw new Error("主服务不存在 A701 通道");if(!r.properties.indicate)throw new Error("主服务 A701 特征值不支持 indicate");var n=t[Ya];if(!n)throw new Error("主服务不存在 A702 特征值");if(!n.properties.write)throw new Error("主服务 A702 特征值不支持 write");var i=t[Ka];if(!i)throw new Error("主服务不存在 A703 特征值");if(!i.properties.write)throw new Error("主服务 A703 特征值不支持 write");return{A701:r,A702:n,A703:i}}(e.characteristics)})),(0,h.mergeMap)((function(e){Za.debug("初始化主服务特征值 处理特征值",e);var n=[];return n.push(function(e){var t=e.deviceId,r=e.serviceId,n=e.characteristic;return function(e){var t=e.deviceId,r=e.serviceId,n=e.characteristicId,i=e.state;return(0,h.defer)((function(){return Vt.debug("订阅特征值 deviceId=".concat(t,", serviceId=").concat(r,", characteristicId=").concat(n," 开始")),O(Ee)({deviceId:t,serviceId:r,characteristicId:n,state:i})})).pipe((0,h.map)((function(e){if(e.error)throw e.error;return e.success})),(0,h.catchError)((function(e){throw Vt.debug("订阅特征值 deviceId=".concat(t,", serviceId=").concat(r,", characteristicId=").concat(n," 失败")),e})),(0,h.tap)((function(e){return Vt.debug("订阅特征值 deviceId=".concat(t,", serviceId=").concat(r,", characteristicId=").concat(n," 成功"),e)})))}({deviceId:t,serviceId:r,characteristicId:n.uuid,state:!0}).pipe((0,h.map)((function(e){return{characteristic:n,notifyResult:e}})))}({deviceId:t,serviceId:r,characteristic:e.A701}).pipe((0,h.map)((function(e){return{A701:e}})))),n.push((0,h.of)({A702:{characteristic:e.A702}})),n.push((0,h.of)({A703:{characteristic:e.A703}})),(0,h.from)(n)})),(0,h.concatAll)(),(0,h.reduce)((function(e,t){return Object.assign(e,t),e})),(0,h.tap)((function(e){return Za.debug("初始化主服务特征值 成功",e)})),(0,h.catchError)((function(e){throw Za.debug("初始化主服务特征值 异常",e),e})))}var Xa=new Map;function eu(e){if("fields"in e&&e.fields)return tu(e);if("decode"in e&&e.decode)return e;if("encode"in e&&e.encode)return e;throw new Error("无效的类型配置")}function tu(e){var t=Object.keys(e.fields).map((function(t){return{fieldName:t,fieldConfig:e.fields[t]}})).sort((function(e,t){return e.fieldConfig.id-t.fieldConfig.id})).map((function(e){var t=e.fieldName,r=e.fieldConfig,n=function(e,t){if("string"==typeof t.type){var r=Xa.get(t.type);if(!r)throw new Error("解析类型配置 fieldName=".concat(e,", type=").concat(t.type,": 找不到类型"));return r}return eu(t.type)}(t,r);return function(e,t){t.array&&void 0!==t.size&&console.warn("解析类型配置 fieldName=".concat(e,", type=").concat(t.type,": array 为 true 时，不需要设置 size; 如需设置 type 的大小，请用 itemSize; 如需设置 数组 size 请用 arraySize；"))}(t,r),function(e,t){if("number"==typeof t.size&&t.size<=0)throw new Error("解析类型配置 fieldName=".concat(e,", type=").concat(t.type,": size 不能少于等于 0"))}(t,r),r.array?function(e){var t=e.fieldName,r=e.fieldConfig,n=e.type,i=function(e){var t,r=e.fieldConfig,n=e.fieldName,i=e.type,o=r.itemSize||i.size;if(void 0===o)throw new Error("解析类型配置 fieldName=".concat(n,", type=").concat(r.type,": 使用数组时，必须确定数组每一个值的 size (type 有预设 size 或 手动设置 itemSize)"));if("number"==typeof r.arraySize&&r.arraySize<=0)throw new Error("解析类型配置 fieldName=".concat(n,", type=").concat(r.type,": arraySize 不能少于等于 0"));"number"==typeof r.arraySize&&(t=r.arraySize*o);return{size:t,itemSize:o}}({fieldConfig:r,fieldName:t,type:n}),o={fieldName:t,type:n,reversed:r.reversed,optional:r.optional,size:i.size,array:{itemSize:i.itemSize,itemReversed:r.itemReversed,arraySize:r.arraySize}};return o}({fieldName:t,fieldConfig:r,type:n}):function(e){var t,r=e.fieldName,n=e.fieldConfig,i=e.type,o=null!==(t=n.size)&&void 0!==t?t:i.size,a={fieldName:r,type:i,reversed:n.reversed,optional:n.optional,size:o};return a}({fieldName:t,fieldConfig:r,type:n})})),r=0;for(var n in t){var i=t[n];if("number"!=typeof i.size){r=void 0;break}r+=i.size}return{fields:t,size:r}}function ru(e,t){var r=eu(t);Xa.set(e,r)}var nu={decode:function(e){return Lt(e.buffer)},encode:function(e){var t=e.data,r=t.length;if(r%2!=0)throw new Error("hex encode, hex 长度应为 2 的倍数");r/=2;for(var n=new Uint8Array(r),i=0;i<r;i++){var o=t.substr(2*i,2),a=parseInt(o,16);n.set([a],i)}return n}},iu={size:1,decode:function(e){var t=e.buffer;return new DataView(t).getUint8(0)},encode:function(e){var t=e.data;return new Uint8Array([t])}},ou={size:2,decode:function(e){var t=e.buffer;return new DataView(t).getUint16(0)},encode:function(e){var t=e.data,r=new Uint8Array(2);return new DataView(r.buffer).setUint16(0,t),r}},au={size:4,decode:function(e){var t=e.buffer;return new DataView(t).getUint32(0)},encode:function(e){var t=e.data,r=new Uint8Array(4);return new DataView(r.buffer).setUint32(0,t),r}},uu={decode:function(e){return qi(e.buffer)}};function cu(e){return new Uint8Array(e).reverse().buffer}ru("bytes",{decode:function(e){return e.buffer},encode:function(e){var t=e.data;return new Uint8Array(t)}}),ru("hex",nu),ru("uint8",iu),ru("uint16",ou),ru("uint32",au),ru("string",uu);var su=_("byte-handler/internal/decode/decode");function lu(e){var t=e.type,r=e.buffer,n=e.reversed;su.debug("decode 开始",t);var i=tu(t);su.debug("decode parsedType",i);var o=du({type:i,buffer:r,reversed:n});return su.debug("decode data",o),o}function fu(e){var t=e.field,r=e.buffer;return t.array?function(e){var t=e.field,r=e.buffer,n=t.array;if(!n)throw new Error("decodeArrayField: array 不存在");var i=t.reversed?cu(r):r,o=Math.ceil(i.byteLength/n.itemSize);return Array.from({length:o}).map((function(e,r){var a=r===o-1?void 0:(r+1)*n.itemSize,u=i.slice(r*n.itemSize,a);return pu({type:t.type,buffer:u,reversed:n.itemReversed})}))}({field:t,buffer:r}):pu({type:t.type,buffer:r,reversed:t.reversed})}function du(e){for(var t=e.type,r=e.buffer,n=e.reversed?cu(r):r,i=0,o={},a=0;a<t.fields.length;a++){var u=t.fields[a];try{var c=a===t.fields.length-1,s=void 0,l=hu({field:u,data:o});if(void 0===l){if(!c)throw(d=new Error("无效的 field=".concat(u.fieldName,"，不是最后一个字段，缺少 size"))).type=t,d}else if((s=i+l)&&n.byteLength<s){if(u.optional)break;throw new Error("实际数据大小 少于 期望解析的数据大小 ")}var f=n.slice(i,s);o[u.fieldName]=fu({field:u,buffer:f}),void 0!==s&&(i=s),su.getLevel()<=su.levels.DEBUG&&su.debug("fieldName=".concat(u.fieldName,", size=").concat(l,", offset=").concat(i,", end=").concat(s,", fieldBuffer=").concat(Lt(f),", fieldValue=").concat(o[u.fieldName]))}catch(e){var d=e;throw new Error("解析 field=".concat(u.fieldName,"异常: ").concat(d.message))}}return o}function pu(e){var t=e.type,r=e.buffer,n=e.reversed;if("fields"in t&&t.fields)return du({type:t,buffer:r,reversed:n});if("decode"in t&&t.decode)return t.decode({buffer:n?cu(r):r});throw new Error("无效类型")}function hu(e){var t=e.field,r=e.data;if(t.array){var n=vu({size:t.array.arraySize,data:r});return void 0===n?n:n*t.array.itemSize}if(void 0!==t.size)return vu({size:t.size,data:r})}function vu(e){var t=e.size,r=e.data;if(void 0!==t){if("number"==typeof t)return t;if("object"==typeof t){if("number"==typeof t.decode)return t.decode;if("function"==typeof t.decode){var n=t.decode({data:r}),i=typeof n;if("number"!==i&&"undefined"!==i)throw new Error("size.decode 返回的值的类型不对，只能是 undefined 或 number");return n}}throw new Error("无效的 size 类型不对 field.size=".concat(t))}}var yu=_("byte-handler/internal/encode/encode");function bu(e){var t=e.type,r=e.data,n=e.reversed;yu.debug("encode 开始",t);var i=tu(t);yu.debug("encode parsedType",i);var o=mu({type:i,data:r,reversed:n});return yu.debug("encode uint8Array",o),o.buffer}function mu(e){var t=e.type,r=e.data,n=e.reversed,i=[];for(var o in t.fields){var a=t.fields[o],u=r[a.fieldName];if(a.optional&&void 0===u)break;var c=gu({field:a,data:u});i.push(c)}var s=Su(i);return n?s.reverse():s}function gu(e){var t=e.field,r=e.data;if(void 0===r)throw new Error("字段 field=".concat(t.fieldName," 数据不存在"));return t.array?function(e){var t=e.field,r=e.data,n=e.reversed,i=t.array;if(!i)throw new Error("encodeArrayField: array 不存在");var o=r.map((function(e){return wu({type:t.type,data:e,reversed:t.reversed})})),a=Su(o);return n?a.reverse():a}({field:t,data:r,reversed:t.reversed}):wu({type:t.type,data:r,reversed:t.reversed})}function wu(e){var t=e.type,r=e.data,n=e.reversed;if("fields"in t&&t.fields)return mu({type:t,data:r,reversed:n});if("encode"in t&&t.encode){var i=t.encode({data:r});return n?i.reverse():i}throw new Error("无效类型")}function Su(e){var t=e.reduce((function(e,t){return e+t.length}),0),r=new Uint8Array(t),n=0;return e.forEach((function(e){r.set(e,n),n+=e.length})),r}var _u=function(){return _u=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},_u.apply(this,arguments)},Ou={commandId:{id:1,type:"uint8"},frameId:{id:2,type:"uint8"}},Iu={fields:_u(_u({},Ou),{dataLength:{id:3,type:"uint8"},data:{id:4,type:"bytes"}})},Eu={fields:_u(_u({},Ou),{data:{id:3,type:"bytes"}})},Cu=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function u(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}c((n=n.apply(e,t||[])).next())}))},Au=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(c){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},xu=_("band-bluetooth-wxapp-sdk/internal/ota/send"),Tu=Ha;function Pu(e,t,r){var n=bu({type:Iu,data:r});return Ut({deviceId:e,serviceId:Tu,characteristicId:t,value:n})}function ju(e,t,r){var n=bu({type:Eu,data:r});return Ut({deviceId:e,serviceId:Tu,characteristicId:t,value:n})}var Du=17,ku=18;function Mu(e){var t=e.deviceId,r=e.characteristicId,n=e.sendData;return Cu(this,void 0,void 0,(function(){var e,i,o,a,u,c,s,l,f;return Au(this,(function(d){switch(d.label){case 0:return e=n.data,i={commandId:n.commandId,frameId:1,dataLength:e.byteLength,data:e.slice(0,Du)},o=[],[4,Pu(t,r,i)];case 1:a=d.sent(),o.push(a),u=function(e,t){if(t.data.byteLength<=Du)return[];var r=Math.ceil((t.data.byteLength-Du)/ku),n=Array.from({length:r}).map((function(r,n){var i=Du+n*ku;return{commandId:e,data:t.data.slice(i,i+ku),frameId:n+2}}));return n}(n.commandId,n),c=0,s=u,d.label=2;case 2:return c<s.length?(l=s[c],[4,ju(t,r,l)]):[3,5];case 3:f=d.sent(),o.push(f),d.label=4;case 4:return c++,[3,2];case 5:return xu.debug("获取下发的帧数数据",o),[2,o]}}))}))}var Bu=function(){return Bu=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Bu.apply(this,arguments)},Lu={u8RspCmdId:{id:1,type:"uint8"},u8RspCode:{id:2,type:"uint8"}},Nu={fields:Bu({},Lu)},Ru={fields:Bu(Bu({},Lu),{u8MaxFrmPerInter:{id:3,type:"uint8"},u8CntFrmBufBlock:{id:4,type:"uint8"},u32OffsetDnldStart:{id:6,type:"uint32"},u32OffsetDnldCurrent:{id:7,type:"uint32"},u32SizeNeedDnld:{id:8,type:"uint32"}})},Fu={fields:Bu(Bu({},Lu),{u32OffsetNextBlock:{id:3,type:"uint32"},u16PercentDnlded:{id:4,type:"uint16"}})},Uu=function(){return Uu=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Uu.apply(this,arguments)},qu=_("band-bluetooth-wxapp-sdk/internal/ota/index");function $u(e){var t=e.deviceId;return ze({immediate:!0}).pipe((0,h.switchMap)((function(e){return e?(0,h.fromEventPattern)(se,le):h.NEVER}))).pipe((0,h.filter)((function(e){return e.deviceId===t&&e.serviceId===Ha&&e.characteristicId===Ja})),(0,h.map)((function(e){return lu({type:Iu,buffer:e.value})})),(0,h.map)((function(e){var r={deviceId:t,commandId:e.commandId,originData:e.data,dataLength:e.dataLength,data:Vu(e)};return qu.debug("解析后的数据包",r),r})))}function Vu(e){var t=lu({type:{fields:Lu},buffer:e.data}),r=lu({type:zu(t.u8RspCmdId),buffer:e.data});return Uu(Uu({},t),r)}function zu(e){if(2===e)return Ru;if(3===e)return Fu;if(4===e||5===e||6===e)return Nu;throw new Error("收到未知命令, commandId=".concat(e))}var Wu=[];function Gu(){var e,t,r;for(t=0;t<256;t++){for(e=t,r=0;r<8;r++)1==(1&e)?e=3988292384^e>>>1:e>>>=1;Wu.push(e>>>0)}}function Hu(e){var t=0;0===Wu.length&&Gu();for(var r=e.length,n=0;n<r;n++){var i=parseInt((t^e[n])>>>0&255,10),o=t>>>8;t=(Wu[i]^o)>>>0}return t}var Ju={fields:{u32SizeTxedData:{id:1,type:"uint32"},u32CrcTxedData:{id:2,type:"uint32"},u32OffsetCurrent:{id:3,type:"uint32"}}},Yu=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function u(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}c((n=n.apply(e,t||[])).next())}))},Ku=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(c){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},Zu=Ha,Qu=Ka,Xu=_("band-bluetooth-wxapp-sdk/internal/ota/sendOtaFile");function ec(e){var t=e.deviceId,r=e.otaFile,n=e.u8MaxFrmPerInter,i=e.u8CntFrmBufBlock,o=e.offset;return Yu(this,void 0,void 0,(function(){var e,a,u,c,s,l,f;return Ku(this,(function(d){switch(d.label){case 0:e=n*i,a=r.slice(o,o+e),u=0,d.label=1;case 1:if(!(u<a.byteLength))return[3,6];c=u+n,s=a.slice(u,c),d.label=2;case 2:return d.trys.push([2,4,,5]),[4,Ut({deviceId:t,serviceId:Zu,characteristicId:Qu,value:s})];case 3:return d.sent(),[3,5];case 4:throw l=d.sent(),console.error("sentOTaFILE error",l),l;case 5:return u+=n,[3,1];case 6:Xu.debug("FileData0x03",Lt(bu({type:Ju,data:{u32CrcTxedData:Hu(new Uint8Array(a)),u32OffsetCurrent:o,u32SizeTxedData:e}}))),d.label=7;case 7:return d.trys.push([7,9,,10]),[4,Mu({deviceId:t,characteristicId:Ya,sendData:{commandId:3,data:bu({type:Ju,data:{u32CrcTxedData:Hu(new Uint8Array(a)),u32OffsetCurrent:o,u32SizeTxedData:a.byteLength}})}})];case 8:return[2,d.sent()];case 9:throw f=d.sent(),Xu.error("发送失败",f),f;case 10:return[2]}}))}))}var tc=r(6983),rc=r.n(tc)()((function(){return new Map}));function nc(e,t){rc().set(e,t)}var ic,oc=_("band-bluetooth-wxapp-sdk/internal/ota/index");function ac(e){var t=function(e){var t,r,n=e.mac,i=e.otaFile,o=new h.Observable((function(e){t=e})),u=new h.Observable((function(e){r=e}));return{mainProcess:new h.Observable((function(e){t.next(ic.State.Start),function(e){nc(e,{isUpgrading:!0})}(n);var o=Wr({mac:n});if(o){var u=o.deviceId,c=$u({deviceId:u}).pipe((0,h.share)()),s=c.subscribe();if(qn({mac:n}).subscribe((function(e){return e.connected}))){var f=(0,h.of)(1).pipe((0,h.mergeMap)((function(){return Qa({deviceId:u}).pipe((0,h.timeout)({each:3e3,with:function(){return(0,h.throwError)((function(){return new ic.Error("主服务初始化失败",l.NotFoundDevice)}))}}))})),(0,h.retry)(1)).pipe((0,h.mergeMap)((function(){return Mu({deviceId:u,characteristicId:Ya,sendData:{commandId:2,data:i.slice(0,120)}}),c.pipe((0,h.filter)((function(e){return 2===e.data.u8RspCmdId&&0===e.data.u8RspCode})),(0,h.first)()).pipe((0,h.catchError)((function(e){return e instanceof ic.Error?(0,h.throwError)((function(){return e})):(0,h.throwError)((function(){return new ic.Error("ota升级异常，数据传输失败",a.Unknow,{error:e})}))})))})),(0,h.tap)((function(){t.next(ic.State.DownLoadFileStart)})),(0,h.mergeMap)((function(e){var t=c.pipe((0,h.filter)((function(e){return 3===e.data.u8RspCmdId})),(0,h.timeout)({each:3e3,with:function(){return(0,h.throwError)((function(){return new ic.Error("文件发送超时",l.Timeout)}))}})).pipe((0,h.tap)((function(e){r.next(e.data.u16PercentDnlded/100),oc.debug("文件已发送百分比",e.data.u16PercentDnlded/100)}))).pipe((0,h.catchError)((function(e){return e instanceof ic.Error?(0,h.throwError)((function(){return e})):(0,h.throwError)((function(){return new ic.Error("ota升级异常，下发OTA文件出错",a.Unknow,{error:e})}))})));return function(e){var t=this,r=e.deviceId,n=e.otaFile,i=e.DataConfig,o=e.receiveData$,a=i.data,u=a.u8MaxFrmPerInter,c=a.u32OffsetDnldStart,s=a.u8CntFrmBufBlock,l=a.u32SizeNeedDnld;return new h.Observable((function(e){f(c);var i=0,a=o.subscribe((function(r){return Yu(t,void 0,void 0,(function(){var t;return Ku(this,(function(o){return t=r.data.u32OffsetNextBlock,i>2?[2]:0!==r.data.u8RspCode?(i=void 0===t?++i:0,f(t,i),[2]):t>=Math.min(l,n.byteLength-120)?(e.next(r),e.complete(),a.unsubscribe(),[2]):(f(t),[2])}))}))}));function f(e,t){return Yu(this,void 0,void 0,(function(){var i,a,c;return Ku(this,(function(f){switch(f.label){case 0:return f.trys.push([0,2,,3]),i=(null!=t?t:0)>0?20:u,[4,ec({deviceId:r,otaFile:n,receiveData$:o,u8MaxFrmPerInter:Math.max(i,20),offset:e,u8CntFrmBufBlock:s,u32SizeNeedDnld:l})];case 1:return a=f.sent(),Xu.debug("0x03发送成功",a),[3,3];case 2:throw c=f.sent(),console.log("error"),c;case 3:return[2]}}))}))}return function(){a.unsubscribe()}}))}({deviceId:u,otaFile:i,DataConfig:e,receiveData$:t})})),(0,h.tap)((function(){t.next(ic.State.DownLoadFileComplete)})),(0,h.mergeMap)((function(){return Mu({deviceId:u,characteristicId:Ya,sendData:{commandId:4,data:new ArrayBuffer(0)}}),c.pipe((0,h.filter)((function(e){return 4===e.data.u8RspCmdId})),(0,h.first)()).pipe((0,h.catchError)((function(e){return e instanceof ic.Error?(0,h.throwError)((function(){return e})):(0,h.throwError)((function(){return new ic.Error("ota升级异常，OTA文件校验失败",a.Unknow,{error:e})}))})))})),(0,h.mergeMap)((function(){return Mu({deviceId:u,characteristicId:Ya,sendData:{commandId:5,data:new ArrayBuffer(0)}}),c.pipe((0,h.filter)((function(e){return 5===e.data.u8RspCmdId})),(0,h.first)())}))).pipe((0,h.mergeMap)((function(){return Mu({deviceId:u,characteristicId:Ya,sendData:{commandId:6,data:new ArrayBuffer(0)}}),c.pipe((0,h.filter)((function(e){return 6===e.data.u8RspCmdId})),(0,h.first)()).pipe((0,h.tap)((function(){t.next(ic.State.Complete)})),(0,h.first)(),(0,h.catchError)((function(e){return e instanceof ic.Error?(0,h.throwError)((function(){return e})):(0,h.throwError)((function(){return new ic.Error("ota升级异常，OTA更新失败",a.Unknow,{error:e})}))})))}))).pipe((0,h.catchError)((function(e){return e instanceof ic.Error?(0,h.throwError)((function(){return e})):(0,h.throwError)((function(){return new ic.Error("ota升级异常，请检查蓝牙是否连接正常",a.Unknow,{error:e})}))}))).subscribe(e);return function(){r.unsubscribe(),t.unsubscribe(),s.unsubscribe(),f.unsubscribe(),function(e){nc(e,{isUpgrading:!1})}(n)}}e.error(new ic.Error("请检查设备是否正常连接, mac=".concat(n),l.NotFoundDevice))}else e.error(new ic.Error("找不到设备, mac=".concat(n),l.NotFoundDevice))})),state:o,uploadFilePercent:u}}(e),r=t.mainProcess,n=t.state,i=t.uploadFilePercent;return e.onStateChange&&n.subscribe((function(t){var r;null===(r=e.onStateChange)||void 0===r||r.call(e,t)})),e.onUploadFilePercent&&i.subscribe((function(t){var r;return null===(r=e.onUploadFilePercent)||void 0===r?void 0:r.call(e,t)})),La(r,{canceler:e.canceler})}function uc(e){return!(/^T[0-9]{3}$/.exec(e)&&Number(e.substr(1))<=11)}!function(e){!function(e){e.Start="start",e.DownLoadFileStart="downLoadFileStart",e.DownLoadFileComplete="downLoadFileComplete",e.Complete="complete"}(e.State||(e.State={})),e.Error=b()}(ic||(ic={}))})();var i=exports;for(var o in n)i[o]=n[o];n.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();